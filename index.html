<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Lakshita üíñ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-pink: #ff69b4;
            --secondary-pink: #ff1493;
            --accent-purple: #da70d6;
            --accent-blue: #87ceeb;
            --accent-gold: #ffd700;
            --soft-white: #fffafa;
            --light-bg: linear-gradient(135deg, #fff0f5 0%, #f8f8ff 50%, #fff0f5 100%);
            --dark-bg: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            --text-dark: #4a4a4a;
            --text-light: #f5f5f5;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--light-bg);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            transition: all 0.8s ease;
            opacity: 0;
            animation: fadeIn 1s ease forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        body.night-mode {
            background: var(--dark-bg);
        }

        /* Smooth Transitions */
        .smooth-transition {
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Animated Background Particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            background: var(--primary-pink);
            border-radius: 50%;
            animation: float 15s infinite linear;
            opacity: 0.2;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-100px) rotate(180deg); }
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff69b4 0%, #da70d6 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.8s ease-out;
        }

        .birthday-text {
            font-family: 'Dancing Script', cursive;
            font-size: 4rem;
            color: white;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
            animation: heartbeat 2s infinite;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .loading-bar {
            width: 300px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
        }

        .loading-progress {
            width: 0%;
            height: 100%;
            background: white;
            border-radius: 10px;
            animation: loading 3s ease-out forwards;
        }

        @keyframes loading {
            to { width: 100%; }
        }

        /* Container */
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Stage Containers */
        .stage {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            width: 100%;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .stage.active {
            display: flex;
            opacity: 1;
            transform: translateY(0);
        }

        /* Elegant Stage Titles */
        .stage-title {
            font-family: 'Dancing Script', cursive;
            color: var(--primary-pink);
            font-size: clamp(2.5rem, 5vw, 4rem);
            margin-bottom: 40px;
            text-align: center;
            position: relative;
            padding-bottom: 20px;
            animation: titleFloat 6s ease-in-out infinite;
        }

        @keyframes titleFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .stage-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--primary-pink), transparent);
            animation: lineWidth 3s ease-in-out infinite;
        }

        @keyframes lineWidth {
            0%, 100% { width: 100px; }
            50% { width: 150px; }
        }

        body.night-mode .stage-title {
            color: var(--accent-gold);
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }

        /* Birthday Countdown */
        .countdown-container {
            background: rgba(255, 255, 255, 0.9);
            padding: 30px 40px;
            border-radius: 25px;
            box-shadow: 0 20px 40px rgba(255, 105, 180, 0.2);
            backdrop-filter: blur(10px);
            margin: 40px 0;
            border: 3px solid rgba(255, 105, 180, 0.2);
            animation: containerFloat 4s ease-in-out infinite;
        }

        @keyframes containerFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        body.night-mode .countdown-container {
            background: rgba(26, 26, 46, 0.9);
            border-color: rgba(255, 215, 0, 0.2);
        }

        .countdown-title {
            font-family: 'Dancing Script', cursive;
            color: var(--primary-pink);
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 25px;
        }

        body.night-mode .countdown-title {
            color: var(--accent-gold);
        }

        .countdown-timer {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .countdown-unit {
            text-align: center;
            min-width: 100px;
        }

        .countdown-number {
            font-size: 3.5rem;
            font-weight: bold;
            color: var(--primary-pink);
            background: linear-gradient(135deg, rgba(255, 105, 180, 0.1), rgba(255, 20, 147, 0.1));
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 10px;
            display: inline-block;
            min-width: 90px;
            box-shadow: 0 10px 20px rgba(255, 105, 180, 0.15);
            animation: pulseGlow 2s infinite;
        }

        @keyframes pulseGlow {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 10px 20px rgba(255, 105, 180, 0.15);
            }
            50% { 
                transform: scale(1.05);
                box-shadow: 0 15px 30px rgba(255, 105, 180, 0.3);
            }
        }

        body.night-mode .countdown-number {
            color: var(--accent-gold);
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 170, 0, 0.1));
            animation: pulseGlowNight 2s infinite;
        }

        @keyframes pulseGlowNight {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 10px 20px rgba(255, 215, 0, 0.15);
            }
            50% { 
                transform: scale(1.05);
                box-shadow: 0 15px 30px rgba(255, 215, 0, 0.3);
            }
        }

        .countdown-label {
            font-size: 1.1rem;
            color: var(--text-dark);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        body.night-mode .countdown-label {
            color: var(--text-light);
        }

        /* Fireworks Canvas */
        .fireworks-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 900;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .fireworks-canvas.active {
            opacity: 1;
        }

        /* Fireworks Controls */
        .fireworks-controls {
            position: fixed;
            bottom: 120px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 25px;
            border-radius: 50px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .fireworks-controls.hidden {
            opacity: 0;
            transform: translateX(-50%) translateY(50px);
            pointer-events: none;
        }

        .firework-btn {
            padding: 12px 25px;
            background: linear-gradient(135deg, var(--primary-pink), var(--secondary-pink));
            border: none;
            border-radius: 25px;
            color: white;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 5px 15px rgba(255, 105, 180, 0.3);
        }

        .firework-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 25px rgba(255, 105, 180, 0.4);
        }

        .firework-btn:active {
            transform: translateY(-1px) scale(1.02);
        }

        /* Custom Envelope */
        .envelope-wrapper {
            position: relative;
            width: 400px;
            height: 280px;
            cursor: pointer;
            perspective: 1500px;
            margin: 40px 0;
            filter: drop-shadow(0 20px 40px rgba(255, 105, 180, 0.3));
            transition: transform 0.5s ease;
        }

        .envelope-wrapper:hover {
            transform: scale(1.02);
        }

        .envelope {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 1.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .envelope-body {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 20px;
            overflow: hidden;
            background: linear-gradient(135deg, var(--primary-pink), var(--secondary-pink));
        }

        .envelope-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.9;
            transition: transform 1s ease;
        }

        .envelope-flap {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 105, 180, 0.9), rgba(255, 20, 147, 0.9));
            clip-path: polygon(0 0, 50% 50%, 100% 0);
            transform-origin: top;
            transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.2);
            z-index: 2;
        }

        .envelope.open .envelope-flap {
            transform: rotateX(-180deg);
        }

        .envelope-seal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--accent-gold), #ffaa00);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            z-index: 10;
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.4);
            animation: sealGlow 2s infinite alternate;
            cursor: pointer;
        }

        @keyframes sealGlow {
            from { 
                transform: translate(-50%, -50%) scale(1);
                box-shadow: 0 10px 30px rgba(255, 215, 0, 0.4);
            }
            to { 
                transform: translate(-50%, -50%) scale(1.1);
                box-shadow: 0 10px 40px rgba(255, 215, 0, 0.6), 0 0 60px rgba(255, 215, 0, 0.3);
            }
        }

        .envelope-content {
            position: absolute;
            width: 90%;
            height: 85%;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            top: 7.5%;
            left: 5%;
            padding: 30px;
            opacity: 0;
            transform: translateY(200px) scale(0.8);
            transition: all 1s cubic-bezier(0.4, 0, 0.2, 1) 0.5s;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
            z-index: 1;
            backdrop-filter: blur(10px);
        }

        .envelope.open .envelope-content {
            opacity: 1;
            transform: translateY(-250px) scale(1.05);
        }

        .envelope-content h2 {
            font-family: 'Dancing Script', cursive;
            color: var(--primary-pink);
            text-align: center;
            margin-bottom: 15px;
            font-size: 2.2rem;
        }

        .envelope-content p {
            text-align: center;
            color: var(--text-dark);
            font-size: 1.1rem;
            line-height: 1.6;
            opacity: 0.8;
        }

        /* HEART LEAVES TREE */
        .tree-container {
            position: relative;
            width: 700px;
            height: 700px;
            margin: 40px 0;
        }

        .tree-structure {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1;
        }

        .tree-trunk {
            width: 80px;
            height: 280px;
            background: linear-gradient(45deg, #8b4513 0%, #a0522d 50%, #8b4513 100%);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
            position: relative;
            z-index: 2;
        }

        .tree-trunk::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
            animation: trunkShine 4s infinite linear;
        }

        @keyframes trunkShine {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }

        /* Heart Leaves Container */
        .heart-leaves {
            position: absolute;
            width: 600px;
            height: 550px;
            bottom: 250px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1;
        }

        /* Individual Heart Leaf */
        .heart-leaf {
            position: absolute;
            width: 40px;
            height: 40px;
            background: var(--heart-color);
            clip-path: polygon(50% 15%, 80% 0%, 100% 35%, 50% 100%, 0% 35%, 20% 0%);
            transform-origin: center bottom;
            animation: leafFloat 4s infinite ease-in-out;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.2));
        }

        .heart-leaf:hover {
            transform: scale(1.3) rotate(15deg);
            filter: drop-shadow(0 0 25px currentColor);
            animation: heartPulse 0.8s infinite alternate;
            z-index: 10;
        }

        @keyframes leafFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-8px) rotate(5deg); }
        }

        @keyframes heartPulse {
            0% { transform: scale(1.2); }
            100% { transform: scale(1.4); }
        }

        /* Heart Leaf Colors */
        .heart-leaf-red { --heart-color: #ff3366; animation-delay: 0s; }
        .heart-leaf-pink { --heart-color: #ff69b4; animation-delay: 0.5s; }
        .heart-leaf-purple { --heart-color: #da70d6; animation-delay: 1s; }
        .heart-leaf-blue { --heart-color: #87ceeb; animation-delay: 1.5s; }
        .heart-leaf-gold { --heart-color: #ffd700; animation-delay: 2s; }
        .heart-leaf-orange { --heart-color: #ff9900; animation-delay: 2.5s; }
        .heart-leaf-green { --heart-color: #2ecc71; animation-delay: 3s; }
        .heart-leaf-teal { --heart-color: #1abc9c; animation-delay: 3.5s; }

        /* Branches */
        .branch {
            position: absolute;
            background: linear-gradient(45deg, #8b4513 0%, #a0522d 100%);
            border-radius: 10px;
            transform-origin: bottom center;
            z-index: 2;
        }

        .branch-1 { width: 300px; height: 15px; bottom: 250px; left: 150px; transform: rotate(-20deg); }
        .branch-2 { width: 280px; height: 15px; bottom: 250px; right: 150px; transform: rotate(20deg); }
        .branch-3 { width: 250px; height: 12px; bottom: 350px; left: 180px; transform: rotate(-40deg); }
        .branch-4 { width: 250px; height: 12px; bottom: 350px; right: 180px; transform: rotate(40deg); }
        .branch-5 { width: 200px; height: 10px; bottom: 450px; left: 220px; transform: rotate(-60deg); }
        .branch-6 { width: 200px; height: 10px; bottom: 450px; right: 220px; transform: rotate(60deg); }
        .branch-7 { width: 150px; height: 8px; bottom: 520px; left: 250px; transform: rotate(-80deg); }
        .branch-8 { width: 150px; height: 8px; bottom: 520px; right: 250px; transform: rotate(80deg); }

        /* Tree Title */
        .tree-title {
            position: absolute;
            top: -60px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Dancing Script', cursive;
            color: var(--primary-pink);
            font-size: 2.5rem;
            text-align: center;
            white-space: nowrap;
            animation: titleFloat 4s infinite ease-in-out;
        }

        body.night-mode .tree-title {
            color: var(--accent-gold);
        }

        @keyframes titleFloat {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }

        /* Cake with Automatic Cutting */
        .cake-wrapper {
            position: relative;
            margin: 50px 0;
            cursor: pointer;
            animation: gentleFloat 6s ease-in-out infinite;
        }

        @keyframes gentleFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            33% { transform: translateY(-15px) rotate(1deg); }
            66% { transform: translateY(-5px) rotate(-1deg); }
        }

        .cake-container {
            width: 350px;
            height: 350px;
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 30px 60px rgba(255, 105, 180, 0.3);
            border: 3px solid rgba(255, 255, 255, 0.6);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .cake-container:hover {
            transform: scale(1.05);
            box-shadow: 0 40px 80px rgba(255, 105, 180, 0.4);
        }

        .cake-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .cake-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, transparent 50%, rgba(0, 0, 0, 0.5) 100%);
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding: 30px;
            opacity: 0;
            transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .cake-container:hover .cake-overlay {
            opacity: 1;
        }

        .cake-text {
            color: white;
            font-family: 'Dancing Script', cursive;
            font-size: 2rem;
            text-align: center;
            transform: translateY(20px);
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .cake-container:hover .cake-text {
            transform: translateY(0);
        }

        .candle {
            position: absolute;
            width: 25px;
            height: 70px;
            background: linear-gradient(180deg, #ffd700, #ffaa00);
            top: -70px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 12px 12px 0 0;
            box-shadow: 0 0 25px rgba(255, 215, 0, 0.6);
            z-index: 2;
        }

        .flame {
            position: absolute;
            width: 18px;
            height: 30px;
            background: linear-gradient(180deg, #ffff00, #ff4500);
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 50% 50% 20% 20%;
            animation: flicker 0.5s infinite alternate;
            box-shadow: 0 0 35px rgba(255, 69, 0, 0.8);
            z-index: 3;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes flicker {
            0%, 100% { transform: translateX(-50%) scale(1); opacity: 1; }
            50% { transform: translateX(-50%) scale(1.1); opacity: 0.9; }
        }

        /* Cake Cutting Animation */
        .cake-cut {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 4;
            opacity: 0;
        }

        .cake-cut.active {
            animation: cutAnimation 2s forwards;
        }

        @keyframes cutAnimation {
            0% {
                opacity: 1;
                transform: translateX(0);
            }
            100% {
                opacity: 1;
                transform: translateX(100px);
            }
        }

        /* Custom Gallery */
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 50px 0;
            max-width: 1000px;
            padding: 0 20px;
            width: 100%;
        }

        .gallery-item {
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            cursor: pointer;
            aspect-ratio: 3/4;
            background: var(--soft-white);
        }

        .gallery-item:hover {
            transform: translateY(-20px) scale(1.03);
            box-shadow: 0 40px 80px rgba(0, 0, 0, 0.25);
        }

        .gallery-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .gallery-item:hover .gallery-img {
            transform: scale(1.1);
        }

        .gallery-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.7), transparent);
            color: white;
            padding: 30px 20px 20px;
            transform: translateY(100%);
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            font-family: 'Dancing Script', cursive;
            font-size: 1.8rem;
        }

        .gallery-item:hover .gallery-overlay {
            transform: translateY(0);
        }

        /* Message Box */
        .message-container {
            max-width: 800px;
            margin: 40px auto;
            position: relative;
        }

        .message-box {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 240, 245, 0.95));
            padding: 50px;
            border-radius: 30px;
            box-shadow: 0 30px 60px rgba(255, 105, 180, 0.15);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.5);
            position: relative;
            overflow: hidden;
        }

        body.night-mode .message-box {
            background: linear-gradient(135deg, rgba(26, 26, 46, 0.95), rgba(30, 30, 60, 0.95));
            border-color: rgba(255, 215, 0, 0.2);
        }

        .message-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--primary-pink), var(--accent-purple), var(--accent-blue));
        }

        .typing-text {
            font-family: 'Georgia', serif;
            font-size: 1.3rem;
            line-height: 1.8;
            min-height: 300px;
            color: var(--text-dark);
            white-space: pre-wrap;
            overflow-wrap: break-word;
        }

        body.night-mode .typing-text {
            color: var(--text-light);
        }

        .cursor {
            display: inline-block;
            width: 3px;
            height: 1.4em;
            background: var(--primary-pink);
            margin-left: 3px;
            animation: blink 0.8s infinite;
            vertical-align: middle;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        /* Controls */
        .controls {
            position: fixed;
            top: 30px;
            right: 30px;
            display: flex;
            gap: 15px;
            z-index: 1000;
        }

        .control-btn {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: var(--primary-pink);
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .control-btn:hover {
            background: white;
            transform: scale(1.15) rotate(15deg);
            box-shadow: 0 15px 30px rgba(255, 105, 180, 0.3);
            color: var(--secondary-pink);
        }

        .control-btn.active {
            background: white;
            color: var(--secondary-pink);
            transform: scale(1.1);
        }

        /* Navigation Dots */
        .nav-dots {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 35px;
            border-radius: 50px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 105, 180, 0.3);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid transparent;
        }

        .dot:hover {
            transform: scale(1.5);
            background: var(--primary-pink);
        }

        .dot.active {
            background: var(--primary-pink);
            transform: scale(1.6);
            box-shadow: 0 0 20px var(--primary-pink);
            border-color: white;
        }

        /* Day/Night Toggle */
        .day-night-toggle {
            position: fixed;
            top: 30px;
            left: 30px;
            z-index: 1000;
        }

        .toggle-btn {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: var(--primary-pink);
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .toggle-btn:hover {
            background: white;
            transform: scale(1.15) rotate(15deg);
            box-shadow: 0 15px 30px rgba(255, 105, 180, 0.3);
            color: var(--secondary-pink);
        }

        /* Instruction Text */
        .instruction {
            color: var(--primary-pink);
            font-size: 1.1rem;
            margin-top: 25px;
            text-align: center;
            max-width: 500px;
            padding: 0 20px;
            font-weight: 500;
            opacity: 0.9;
            animation: gentlePulse 3s infinite;
        }

        body.night-mode .instruction {
            color: var(--accent-gold);
        }

        @keyframes gentlePulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }

        /* Floating Elements */
        .floating-element {
            position: fixed;
            pointer-events: none;
            z-index: 900;
            animation: floatUp 6s linear forwards;
            font-size: 28px;
            opacity: 0;
            filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.2));
        }

        @keyframes floatUp {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Birthday Status */
        .birthday-status {
            font-family: 'Dancing Script', cursive;
            font-size: 2rem;
            color: var(--primary-pink);
            text-align: center;
            margin-top: 20px;
            padding: 10px 30px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 20px;
            display: inline-block;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body.night-mode .birthday-status {
            color: var(--accent-gold);
            background: rgba(26, 26, 46, 0.8);
        }

        /* Final Celebration */
        .final-celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(255, 105, 180, 0.2), transparent);
            z-index: 800;
            pointer-events: none;
            opacity: 0;
            transition: opacity 2s ease;
        }

        .final-celebration.active {
            opacity: 1;
        }

        /* Falling Petals */
        .falling-petal {
            position: absolute;
            pointer-events: none;
            z-index: 0;
            opacity: 0;
            font-size: 25px;
            filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.2));
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .envelope-wrapper {
                width: 320px;
                height: 220px;
            }
            
            .tree-container {
                width: 500px;
                height: 500px;
            }
            
            .heart-leaves {
                width: 450px;
                height: 400px;
                bottom: 200px;
            }
            
            .heart-leaf {
                width: 30px;
                height: 30px;
            }
            
            .branch-1 { width: 200px; height: 12px; bottom: 200px; left: 100px; }
            .branch-2 { width: 200px; height: 12px; bottom: 200px; right: 100px; }
            .branch-3 { width: 180px; height: 10px; bottom: 280px; left: 120px; }
            .branch-4 { width: 180px; height: 10px; bottom: 280px; right: 120px; }
            .branch-5 { width: 150px; height: 8px; bottom: 350px; left: 150px; }
            .branch-6 { width: 150px; height: 8px; bottom: 350px; right: 150px; }
            .branch-7 { width: 120px; height: 6px; bottom: 400px; left: 180px; }
            .branch-8 { width: 120px; height: 6px; bottom: 400px; right: 180px; }
            
            .tree-title {
                font-size: 2rem;
                top: -50px;
            }
            
            .cake-container {
                width: 280px;
                height: 280px;
            }
            
            .gallery {
                grid-template-columns: 1fr;
                max-width: 350px;
            }
            
            .message-box {
                padding: 30px;
                margin: 20px;
            }
            
            .countdown-container {
                padding: 20px;
            }
            
            .countdown-number {
                font-size: 2.5rem;
                min-width: 70px;
                padding: 10px;
            }
            
            .countdown-unit {
                min-width: 70px;
            }
            
            .fireworks-controls {
                bottom: 140px;
                flex-direction: column;
                align-items: center;
                padding: 15px;
            }
            
            .firework-btn {
                width: 200px;
                justify-content: center;
            }
            
            .controls, .day-night-toggle {
                top: 20px;
                right: 20px;
            }
            
            .day-night-toggle {
                left: 20px;
            }
            
            .nav-dots {
                bottom: 25px;
                padding: 12px 25px;
            }
            
            .birthday-text {
                font-size: 3rem;
            }
            
            .control-btn, .toggle-btn {
                width: 50px;
                height: 50px;
            }
        }

        @media (max-width: 480px) {
            .stage-title {
                font-size: 2.2rem;
                margin-bottom: 30px;
            }
            
            .envelope-wrapper {
                width: 280px;
                height: 190px;
            }
            
            .tree-container {
                width: 350px;
                height: 400px;
            }
            
            .heart-leaves {
                width: 300px;
                height: 300px;
                bottom: 150px;
            }
            
            .heart-leaf {
                width: 25px;
                height: 25px;
            }
            
            .branch-1 { width: 140px; height: 10px; bottom: 150px; left: 70px; }
            .branch-2 { width: 140px; height: 10px; bottom: 150px; right: 70px; }
            .branch-3 { width: 120px; height: 8px; bottom: 220px; left: 90px; }
            .branch-4 { width: 120px; height: 8px; bottom: 220px; right: 90px; }
            .branch-5 { width: 100px; height: 6px; bottom: 270px; left: 110px; }
            .branch-6 { width: 100px; height: 6px; bottom: 270px; right: 110px; }
            .branch-7 { width: 80px; height: 5px; bottom: 310px; left: 130px; }
            .branch-8 { width: 80px; height: 5px; bottom: 310px; right: 130px; }
            
            .tree-title {
                font-size: 1.8rem;
                top: -40px;
            }
            
            .cake-container {
                width: 240px;
                height: 240px;
            }
            
            .gallery {
                gap: 15px;
            }
            
            .message-box {
                padding: 25px 20px;
            }
            
            .countdown-number {
                font-size: 2rem;
                min-width: 60px;
            }
            
            .countdown-unit {
                min-width: 60px;
            }
            
            .birthday-text {
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Background Music - AUTO PLAY -->
    <audio id="background-music" loop autoplay>
        <source src="song.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <!-- Fireworks Canvas -->
    <canvas id="fireworks-canvas" class="fireworks-canvas"></canvas>

    <!-- Final Celebration Overlay -->
    <div class="final-celebration" id="final-celebration"></div>

    <!-- Animated Background Particles -->
    <div class="particles" id="particles"></div>

    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="birthday-text">Happy Birthday Lakshita!</div>
        <div class="loading-bar">
            <div class="loading-progress"></div>
        </div>
        <p style="color: white; margin-top: 20px; font-family: 'Dancing Script', cursive; font-size: 1.2rem;">
            Preparing your special birthday experience...
        </p>
    </div>

    <div class="container">
        <!-- Stage 1: Birthday Countdown -->
        <div id="stage-1" class="stage active">
            <h2 class="stage-title">Birthday Countdown üéâ</h2>
            
            <div class="countdown-container">
                <div class="countdown-title">Counting down to December 18th!</div>
                <div class="countdown-timer">
                    <div class="countdown-unit">
                        <div class="countdown-number" id="days">00</div>
                        <div class="countdown-label">Days</div>
                    </div>
                    <div class="countdown-unit">
                        <div class="countdown-number" id="hours">00</div>
                        <div class="countdown-label">Hours</div>
                    </div>
                    <div class="countdown-unit">
                        <div class="countdown-number" id="minutes">00</div>
                        <div class="countdown-label">Minutes</div>
                    </div>
                    <div class="countdown-unit">
                        <div class="countdown-number" id="seconds">00</div>
                        <div class="countdown-label">Seconds</div>
                    </div>
                </div>
                <div class="birthday-status" id="birthday-status"></div>
            </div>
            
            <p class="instruction">Get ready to celebrate Lakshita's special day! üéÇ</p>
        </div>

        <!-- Stage 2: Envelope -->
        <div id="stage-2" class="stage">
            <h2 class="stage-title">Your Birthday Invitation üíå</h2>
            <div class="envelope-wrapper">
                <div class="envelope">
                    <div class="envelope-body">
                        <img src="envelope.png" alt="Beautiful Birthday Envelope" class="envelope-img">
                    </div>
                    <div class="envelope-flap"></div>
                    <div class="envelope-seal">üíù</div>
                    <div class="envelope-content">
                        <h2>Dearest Lakshita,</h2>
                        <p>On this beautiful day, I've prepared something very special just for you. Every moment has been crafted with love and care for the amazing person you are!</p>
                        <p style="margin-top: 15px; font-style: italic; color: var(--primary-pink);">
                            Click the golden seal to open your birthday surprise! üíñ
                        </p>
                    </div>
                </div>
            </div>
            <p class="instruction">Click the golden seal to open your birthday invitation</p>
        </div>

        <!-- Stage 3: HEART LEAVES TREE -->
        <div id="stage-3" class="stage">
            <h2 class="stage-title">Your Sakura HeartTree üíñ</h2>
            <div class="tree-container">
                <div class="tree-title">"Your Sakura HeartTree is blooming..."</div>
                
                <!-- Branches -->
                <div class="branch branch-1"></div>
                <div class="branch branch-2"></div>
                <div class="branch branch-3"></div>
                <div class="branch branch-4"></div>
                <div class="branch branch-5"></div>
                <div class="branch branch-6"></div>
                <div class="branch branch-7"></div>
                <div class="branch branch-8"></div>
                
                <div class="tree-structure">
                    <div class="tree-trunk"></div>
                </div>
                
                <!-- Heart Leaves Container -->
                <div class="heart-leaves" id="heart-leaves"></div>
                
                <!-- Falling petals container -->
                <div id="falling-petals"></div>
            </div>
            <p class="instruction">Click on the heart leaves to discover special birthday messages! üíï</p>
        </div>

        <!-- Stage 4: Cake Celebration with Automatic Cutting -->
        <div id="stage-4" class="stage">
            <h2 class="stage-title">Make a Wish! üéÇ</h2>
            <div class="cake-wrapper">
                <div class="cake-container" id="cake-container">
                    <img src="cake.jpg" alt="Beautiful Birthday Cake" class="cake-img" id="cake-img">
                    <div class="cake-overlay">
                        <div class="cake-text">Click to Cut the Cake! ‚ú®</div>
                    </div>
                    <div class="candle" id="candle"></div>
                    <div class="flame" id="flame"></div>
                    <div class="cake-cut" id="cake-cut"></div>
                </div>
            </div>
            <p class="instruction">Click on the cake to cut it and celebrate! Fireworks controls will appear!</p>
        </div>

        <!-- Stage 5: Memory Gallery -->
        <div id="stage-5" class="stage">
            <h2 class="stage-title">Beautiful Memories üì∏</h2>
            <div class="gallery">
                <div class="gallery-item">
                    <img src="pic_one.jpg" alt="Beautiful Memory 1" class="gallery-img">
                    <div class="gallery-overlay">Lakshita's Precious Moments üíï</div>
                </div>
                <div class="gallery-item">
                    <img src="pic_two.jpg" alt="Beautiful Memory 2" class="gallery-img">
                    <div class="gallery-overlay">Special Times ‚ú®</div>
                </div>
                <div class="gallery-item">
                    <img src="pic_three.png" alt="Beautiful Memory 3" class="gallery-img">
                    <div class="gallery-overlay">Cherished Memories üå∏</div>
                </div>
            </div>
            <p class="instruction">Hover over the photos to see them come to life!</p>
        </div>

        <!-- Stage 6: Final Message with Automatic Celebration -->
        <div id="stage-6" class="stage">
            <h2 class="stage-title">For My Dear Lakshita üíù</h2>
            <div class="message-container">
                <div class="message-box">
                    <div class="typing-text" id="typing-text"></div>
                    <div class="cursor"></div>
                </div>
            </div>
            <p class="instruction">Enjoy the final celebration! üéâ</p>
        </div>
    </div>

    <!-- Fireworks Controls (Initially Hidden) -->
    <div class="fireworks-controls hidden" id="fireworks-controls">
        <button class="firework-btn" id="single-firework">
            <i class="fas fa-fire"></i> Single Firework
        </button>
        <button class="firework-btn" id="multi-firework">
            <i class="fas fa-bolt"></i> Multi Fireworks
        </button>
        <button class="firework-btn" id="heart-firework">
            <i class="fas fa-heart"></i> Heart Fireworks
        </button>
        <button class="firework-btn" id="clear-fireworks">
            <i class="fas fa-times"></i> Clear All
        </button>
    </div>

    <!-- Day/Night Toggle -->
    <div class="day-night-toggle">
        <button class="toggle-btn">
            <i class="fas fa-moon"></i>
        </button>
    </div>

    <!-- Controls -->
    <div class="controls">
        <button class="control-btn active" id="music-toggle">
            <i class="fas fa-volume-up"></i>
        </button>
        <button class="control-btn" id="special-effects">
            <i class="fas fa-magic"></i>
        </button>
        <button class="control-btn" id="surprise-btn">
            <i class="fas fa-gift"></i>
        </button>
    </div>

    <!-- Navigation Dots -->
    <div class="nav-dots">
        <div class="dot active" data-stage="1"></div>
        <div class="dot" data-stage="2"></div>
        <div class="dot" data-stage="3"></div>
        <div class="dot" data-stage="4"></div>
        <div class="dot" data-stage="5"></div>
        <div class="dot" data-stage="6"></div>
    </div>

    <script>
        // SMOOTH FIREWORKS SIMULATOR
        class SmoothFireworksSimulator {
            constructor() {
                this.canvas = document.getElementById('fireworks-canvas');
                this.ctx = this.canvas.getContext('2d');
                this.particles = [];
                this.fireworks = [];
                this.hue = 120;
                this.limiterTotal = 5;
                this.limiterTick = 0;
                this.mouseDown = false;
                this.mx = 0;
                this.my = 0;
                this.isActive = false;
                
                this.resizeCanvas();
                window.addEventListener('resize', () => this.resizeCanvas());
                
                this.animate();
            }
            
            resizeCanvas() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
            }
            
            random(min, max) {
                return Math.random() * (max - min) + min;
            }
            
            calculateDistance(p1x, p1y, p2x, p2y) {
                const xDistance = p1x - p2x;
                const yDistance = p1y - p2y;
                return Math.sqrt(Math.pow(xDistance, 2) + Math.pow(yDistance, 2));
            }
            
            createParticle(x, y, color) {
                this.particles.push({
                    x: x,
                    y: y,
                    coordinates: [],
                    coordinateCount: 10,
                    angle: this.random(0, Math.PI * 2),
                    speed: this.random(1, 10),
                    friction: 0.95,
                    gravity: 0.2,
                    hue: this.hue,
                    brightness: this.random(50, 80),
                    alpha: 1,
                    decay: this.random(0.015, 0.03),
                    color: color || `hsl(${this.hue}, 100%, 50%)`
                });
            }
            
            createFirework(sx, sy, tx, ty, color, type = 'normal') {
                const firework = {
                    x: sx,
                    y: sy,
                    sx: sx,
                    sy: sy,
                    tx: tx,
                    ty: ty,
                    distanceToTarget: this.calculateDistance(sx, sy, tx, ty),
                    distanceTraveled: 0,
                    coordinates: [],
                    coordinateCount: 3,
                    angle: Math.atan2(ty - sy, tx - sx),
                    speed: 2,
                    acceleration: 1.05,
                    brightness: this.random(50, 70),
                    hue: this.hue,
                    targetRadius: 1,
                    color: color,
                    type: type
                };
                
                this.fireworks.push(firework);
                return firework;
            }
            
            launchFirework(x, y, color = null, type = 'normal') {
                if (!this.isActive) return;
                
                const startX = this.canvas.width / 2;
                const startY = this.canvas.height;
                
                if (type === 'heart') {
                    const targetX = x || this.random(100, this.canvas.width - 100);
                    const targetY = y || this.random(100, this.canvas.height / 2);
                    const firework = this.createFirework(startX, startY, targetX, targetY, color || `hsl(${this.hue}, 100%, 50%)`, 'heart');
                    firework.speed = 3;
                    
                    setTimeout(() => {
                        if (firework && firework.x && firework.y) {
                            this.explodeHeart(firework.x, firework.y, color);
                        }
                    }, 1000);
                } else {
                    const targetX = x || this.random(100, this.canvas.width - 100);
                    const targetY = y || this.random(100, this.canvas.height / 2);
                    this.createFirework(startX, startY, targetX, targetY, color || `hsl(${this.hue}, 100%, 50%)`, type);
                }
            }
            
            explodeFirework(firework) {
                const particleCount = firework.type === 'heart' ? 100 : 80;
                
                for (let i = 0; i < particleCount; i++) {
                    const color = firework.color || `hsl(${this.hue}, 100%, 50%)`;
                    this.createParticle(firework.x, firework.y, color);
                }
                
                if (firework.type === 'heart') {
                    this.explodeHeart(firework.x, firework.y, firework.color);
                }
            }
            
            explodeHeart(x, y, color) {
                for (let i = 0; i < Math.PI * 2; i += 0.1) {
                    const heartX = 16 * Math.pow(Math.sin(i), 3);
                    const heartY = -(13 * Math.cos(i) - 5 * Math.cos(2*i) - 2 * Math.cos(3*i) - Math.cos(4*i));
                    
                    this.createParticle(
                        x + heartX * 3,
                        y + heartY * 3,
                        color || `hsl(${this.hue}, 100%, 50%)`
                    );
                }
            }
            
            updateParticles() {
                for (let i = this.particles.length - 1; i >= 0; i--) {
                    const p = this.particles[i];
                    
                    p.coordinates.unshift([p.x, p.y]);
                    
                    if (p.coordinates.length > p.coordinateCount) {
                        p.coordinates.pop();
                    }
                    
                    p.speed *= p.friction;
                    p.x += Math.cos(p.angle) * p.speed;
                    p.y += Math.sin(p.angle) * p.speed + p.gravity;
                    
                    p.alpha -= p.decay;
                    
                    if (p.alpha <= p.decay) {
                        this.particles.splice(i, 1);
                    }
                }
            }
            
            updateFireworks() {
                for (let i = this.fireworks.length - 1; i >= 0; i--) {
                    const f = this.fireworks[i];
                    
                    f.coordinates.unshift([f.x, f.y]);
                    
                    if (f.coordinates.length > f.coordinateCount) {
                        f.coordinates.pop();
                    }
                    
                    if (f.targetRadius < 8) {
                        f.targetRadius += 0.3;
                    } else {
                        f.targetRadius = 1;
                    }
                    
                    const angle = Math.atan2(f.ty - f.sy, f.tx - f.sx);
                    const distance = this.calculateDistance(f.sx, f.sy, f.tx, f.ty);
                    f.distanceTraveled = this.calculateDistance(f.sx, f.sy, f.x, f.y);
                    
                    const currentDistance = f.distanceTraveled / distance;
                    
                    if (currentDistance >= 1) {
                        this.explodeFirework(f);
                        this.fireworks.splice(i, 1);
                    } else {
                        f.speed *= f.acceleration;
                        const velX = Math.cos(angle) * f.speed;
                        const velY = Math.sin(angle) * f.speed;
                        
                        f.x += velX;
                        f.y += velY;
                    }
                }
            }
            
            drawParticles() {
                for (let i = 0; i < this.particles.length; i++) {
                    const p = this.particles[i];
                    
                    this.ctx.beginPath();
                    this.ctx.moveTo(p.coordinates[0][0], p.coordinates[0][1]);
                    
                    for (let j = 1; j < p.coordinates.length; j++) {
                        this.ctx.lineTo(p.coordinates[j][0], p.coordinates[j][1]);
                    }
                    
                    this.ctx.strokeStyle = `rgba(${this.hexToRgb(p.color)}, ${p.alpha})`;
                    this.ctx.lineWidth = 2;
                    this.ctx.stroke();
                    
                    this.ctx.beginPath();
                    this.ctx.arc(p.x, p.y, 3, 0, Math.PI * 2);
                    this.ctx.fillStyle = p.color;
                    this.ctx.fill();
                    
                    const glow = this.ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, 8);
                    glow.addColorStop(0, p.color);
                    glow.addColorStop(1, 'transparent');
                    
                    this.ctx.beginPath();
                    this.ctx.arc(p.x, p.y, 8, 0, Math.PI * 2);
                    this.ctx.fillStyle = glow;
                    this.ctx.fill();
                }
            }
            
            drawFireworks() {
                for (let i = 0; i < this.fireworks.length; i++) {
                    const f = this.fireworks[i];
                    
                    this.ctx.beginPath();
                    this.ctx.moveTo(f.coordinates[f.coordinates.length - 1][0], f.coordinates[f.coordinates.length - 1][1]);
                    this.ctx.lineTo(f.x, f.y);
                    this.ctx.strokeStyle = f.color;
                    this.ctx.lineWidth = 2;
                    this.ctx.stroke();
                    
                    this.ctx.beginPath();
                    this.ctx.arc(f.x, f.y, f.targetRadius, 0, Math.PI * 2);
                    this.ctx.fillStyle = f.color;
                    this.ctx.fill();
                    
                    const glow = this.ctx.createRadialGradient(f.x, f.y, 0, f.x, f.y, f.targetRadius * 3);
                    glow.addColorStop(0, f.color);
                    glow.addColorStop(1, 'transparent');
                    
                    this.ctx.beginPath();
                    this.ctx.arc(f.x, f.y, f.targetRadius * 3, 0, Math.PI * 2);
                    this.ctx.fillStyle = glow;
                    this.ctx.fill();
                }
            }
            
            hexToRgb(hex) {
                const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                return result ? 
                    `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` : 
                    '255, 105, 180';
            }
            
            animate() {
                requestAnimationFrame(() => this.animate());
                
                this.ctx.globalCompositeOperation = 'destination-out';
                this.ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                this.ctx.globalCompositeOperation = 'lighter';
                
                this.hue += 0.5;
                
                if (this.isActive && this.limiterTick >= this.limiterTotal) {
                    if (!this.mouseDown) {
                        this.launchFirework();
                        this.limiterTick = 0;
                    }
                } else {
                    this.limiterTick++;
                }
                
                this.updateFireworks();
                this.updateParticles();
                this.drawFireworks();
                this.drawParticles();
            }
            
            // Public methods
            activate() {
                this.isActive = true;
                document.querySelector('.fireworks-canvas').classList.add('active');
            }
            
            deactivate() {
                this.isActive = false;
                document.querySelector('.fireworks-canvas').classList.remove('active');
            }
            
            launchSingleFirework(color = null) {
                const x = this.random(100, this.canvas.width - 100);
                const y = this.random(100, this.canvas.height / 2);
                this.launchFirework(x, y, color);
            }
            
            launchMultiFireworks(count = 5) {
                for (let i = 0; i < count; i++) {
                    setTimeout(() => {
                        const colors = ['#ff3366', '#ff69b4', '#ffd700', '#87ceeb', '#2ecc71'];
                        const color = colors[Math.floor(Math.random() * colors.length)];
                        this.launchSingleFirework(color);
                    }, i * 200);
                }
            }
            
            launchHeartFireworks(count = 3) {
                for (let i = 0; i < count; i++) {
                    setTimeout(() => {
                        const colors = ['#ff3366', '#ff69b4', '#da70d6'];
                        const color = colors[Math.floor(Math.random() * colors.length)];
                        this.launchFirework(null, null, color, 'heart');
                    }, i * 300);
                }
            }
            
            clearAll() {
                this.particles = [];
                this.fireworks = [];
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
            }
            
            grandFinale() {
                // First wave: Multi fireworks
                this.launchMultiFireworks(10);
                
                // Second wave: Heart fireworks
                setTimeout(() => {
                    this.launchHeartFireworks(5);
                }, 1500);
                
                // Third wave: Continuous single fireworks
                setTimeout(() => {
                    for (let i = 0; i < 15; i++) {
                        setTimeout(() => {
                            const colors = ['#ff3366', '#ff69b4', '#ffd700', '#87ceeb', '#2ecc71', '#da70d6'];
                            const color = colors[Math.floor(Math.random() * colors.length)];
                            this.launchFirework(
                                this.random(100, this.canvas.width - 100),
                                this.random(100, this.canvas.height / 2),
                                color,
                                i % 3 === 0 ? 'heart' : 'normal'
                            );
                        }, i * 200);
                    }
                }, 3000);
                
                // Fourth wave: Final burst
                setTimeout(() => {
                    for (let i = 0; i < 20; i++) {
                        setTimeout(() => {
                            this.launchSingleFirework();
                        }, i * 100);
                    }
                }, 6000);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Smooth Fireworks Simulator
            const fireworks = new SmoothFireworksSimulator();
            
            // Create animated particles
            createParticles();
            
            // Background Music - AUTO PLAY
            const backgroundMusic = document.getElementById('background-music');
            let isMusicPlaying = true;
            
            // Set initial volume
            backgroundMusic.volume = 0.4;
            
            // Handle autoplay with user interaction
            let isPageLoaded = false;
            
            function startMusic() {
                if (!isPageLoaded) {
                    backgroundMusic.play().then(() => {
                        isMusicPlaying = true;
                        document.getElementById('music-toggle').innerHTML = '<i class="fas fa-volume-up"></i>';
                        document.getElementById('music-toggle').classList.add('active');
                    }).catch(e => {
                        console.log("Autoplay blocked, will play on first click");
                    });
                    isPageLoaded = true;
                }
            }
            
            // Try to start music on page load
            setTimeout(startMusic, 1000);
            
            // Also start music on first user interaction
            document.addEventListener('click', function firstClick() {
                if (!isPageLoaded) {
                    startMusic();
                }
                document.removeEventListener('click', firstClick);
            }, { once: true });
            
            // Music toggle button
            const musicBtn = document.getElementById('music-toggle');
            musicBtn.addEventListener('click', function() {
                if (isMusicPlaying) {
                    backgroundMusic.pause();
                    isMusicPlaying = false;
                    this.innerHTML = '<i class="fas fa-volume-mute"></i>';
                    this.classList.remove('active');
                    createFloatingElement('üîá Music Paused');
                } else {
                    backgroundMusic.play();
                    isMusicPlaying = true;
                    this.innerHTML = '<i class="fas fa-volume-up"></i>';
                    this.classList.add('active');
                    createFloatingElement('üéµ Music Playing');
                }
            });
            
            // BIRTHDAY COUNTDOWN
            function updateCountdown() {
                const now = new Date();
                const currentYear = now.getFullYear();
                
                // Set birthday to December 18th of current year
                let birthday = new Date(currentYear, 11, 18); // December 18th
                
                // If birthday has already passed this year, set to next year
                if (now > birthday) {
                    birthday = new Date(currentYear + 1, 11, 18);
                }
                
                const diff = birthday - now;
                
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                document.getElementById('days').textContent = days.toString().padStart(2, '0');
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
                
                // Update birthday status
                const statusElement = document.getElementById('birthday-status');
                if (days === 0 && hours === 0 && minutes === 0 && seconds === 0) {
                    statusElement.textContent = "üéâ HAPPY BIRTHDAY LAKSHITA! üéâ";
                    statusElement.style.animation = 'heartbeat 1s infinite';
                    // Launch automatic celebration
                    startAutomaticCelebration();
                } else if (days === 1) {
                    statusElement.textContent = "Birthday is tomorrow! Get ready! üéÅ";
                } else if (days < 7) {
                    statusElement.textContent = `Only ${days} days to go! Exciting! ü•≥`;
                } else if (days < 30) {
                    statusElement.textContent = `${days} days until the big day! ‚ú®`;
                } else {
                    statusElement.textContent = `Counting down to December 18th! üéÇ`;
                }
            }
            
            // Update countdown every second
            setInterval(updateCountdown, 1000);
            updateCountdown(); // Initial call
            
            // Hide loading screen after loading
            setTimeout(() => {
                const loadingScreen = document.getElementById('loading-screen');
                loadingScreen.style.opacity = '0';
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                    createFloatingElement('üéâ Welcome to Lakshita\'s Birthday! üéâ');
                }, 800);
            }, 3000);
            
            function createParticles() {
                const particlesContainer = document.getElementById('particles');
                for (let i = 0; i < 30; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.width = particle.style.height = (Math.random() * 20 + 10) + 'px';
                    particle.style.left = Math.random() * 100 + 'vw';
                    particle.style.top = Math.random() * 100 + 'vh';
                    particle.style.background = getRandomParticleColor();
                    particle.style.animationDelay = Math.random() * 5 + 's';
                    particle.style.animationDuration = (Math.random() * 10 + 15) + 's';
                    particlesContainer.appendChild(particle);
                }
            }
            
            function getRandomParticleColor() {
                const colors = [
                    'rgba(255, 105, 180, 0.2)',
                    'rgba(255, 20, 147, 0.2)',
                    'rgba(218, 112, 214, 0.2)',
                    'rgba(135, 206, 235, 0.2)',
                    'rgba(255, 215, 0, 0.2)'
                ];
                return colors[Math.floor(Math.random() * colors.length)];
            }
            
            // Stage Navigation
            const stages = document.querySelectorAll('.stage');
            const dots = document.querySelectorAll('.dot');
            let currentStage = 1;
            
            function navigateToStage(stageNumber) {
                // Smooth transition out
                stages.forEach(stage => {
                    if (stage.classList.contains('active')) {
                        stage.style.opacity = '0';
                        stage.style.transform = 'translateY(-20px)';
                        setTimeout(() => {
                            stage.classList.remove('active');
                        }, 300);
                    }
                });
                
                // Smooth transition in
                setTimeout(() => {
                    const targetStage = document.getElementById(`stage-${stageNumber}`);
                    if (targetStage) {
                        targetStage.classList.add('active');
                        setTimeout(() => {
                            targetStage.style.opacity = '1';
                            targetStage.style.transform = 'translateY(0)';
                        }, 50);
                        
                        // Update navigation dots
                        dots.forEach((dot, index) => {
                            if (index === stageNumber - 1) {
                                dot.classList.add('active');
                            } else {
                                dot.classList.remove('active');
                            }
                        });
                        
                        currentStage = stageNumber;
                        
                        // Special initialization for each stage
                        switch(stageNumber) {
                            case 3:
                                createHeartLeavesTree();
                                break;
                            case 4:
                                initCakeStage();
                                break;
                            case 6:
                                startFinalCelebration();
                                break;
                        }
                        
                        // Create floating elements
                        createFloatingElements();
                    }
                }, 350);
            }
            
            // Navigation dots click
            dots.forEach((dot, index) => {
                dot.addEventListener('click', () => {
                    navigateToStage(index + 1);
                });
            });
            
            // Stage 2: Envelope click
            const envelopeSeal = document.querySelector('.envelope-seal');
            if (envelopeSeal) {
                envelopeSeal.addEventListener('click', function() {
                    const envelope = document.querySelector('.envelope');
                    if (!envelope.classList.contains('open')) {
                        envelope.classList.add('open');
                        createFloatingElement('‚ú® Happy Birthday Lakshita! ‚ú®');
                        
                        // Smooth transition to next stage
                        setTimeout(() => {
                            navigateToStage(3);
                        }, 2000);
                    }
                });
            }
            
            // Stage 4: Cake Stage with Automatic Cutting
            let cakeCut = false;
            
            function initCakeStage() {
                const cakeContainer = document.getElementById('cake-container');
                const cakeImg = document.getElementById('cake-img');
                const flame = document.getElementById('flame');
                const cakeCutElement = document.getElementById('cake-cut');
                
                // Reset cake state
                cakeCut = false;
                cakeContainer.style.transform = 'scale(1)';
                cakeImg.style.transform = 'scale(1)';
                flame.style.animation = 'flicker 0.5s infinite alternate';
                flame.style.opacity = '1';
                cakeCutElement.classList.remove('active');
                
                // Cake click event
                cakeContainer.addEventListener('click', function() {
                    if (!cakeCut) {
                        cutCake();
                        cakeCut = true;
                    }
                });
            }
            
            function cutCake() {
                const cakeContainer = document.getElementById('cake-container');
                const cakeImg = document.getElementById('cake-img');
                const flame = document.getElementById('flame');
                const cakeCutElement = document.getElementById('cake-cut');
                
                // Blow out candle
                flame.style.animation = 'none';
                flame.style.opacity = '0';
                flame.style.transform = 'translateX(-50%) scale(0.5)';
                
                // Cake cutting animation
                cakeCutElement.classList.add('active');
                
                // Cake image animation
                cakeImg.style.transform = 'scale(1.1) rotate(5deg)';
                cakeContainer.style.transform = 'scale(1.05)';
                
                // Show fireworks controls
                setTimeout(() => {
                    const fireworksControls = document.getElementById('fireworks-controls');
                    fireworksControls.classList.remove('hidden');
                    createFloatingElement('üéÜ Fireworks Controls Activated!');
                    
                    // Activate fireworks
                    fireworks.activate();
                    
                    // Launch celebration fireworks
                    fireworks.launchMultiFireworks(5);
                    fireworks.launchHeartFireworks(2);
                }, 1000);
                
                // Move to next stage after delay
                setTimeout(() => {
                    navigateToStage(5);
                }, 4000);
            }
            
            // Fireworks Control Buttons
            document.getElementById('single-firework').addEventListener('click', function() {
                fireworks.launchSingleFirework();
                createFloatingElement('üéÜ Single Firework!');
            });
            
            document.getElementById('multi-firework').addEventListener('click', function() {
                fireworks.launchMultiFireworks(8);
                createFloatingElement('‚ú® Multiple Fireworks!');
            });
            
            document.getElementById('heart-firework').addEventListener('click', function() {
                fireworks.launchHeartFireworks(3);
                createFloatingElement('üíñ Heart Fireworks!');
            });
            
            document.getElementById('clear-fireworks').addEventListener('click', function() {
                fireworks.clearAll();
                createFloatingElement('üßπ Cleared Fireworks');
            });
            
            // Special effects button
            document.getElementById('special-effects').addEventListener('click', function() {
                fireworks.launchMultiFireworks(5);
                fireworks.launchHeartFireworks(2);
                createFloatingElement('‚ú® Special Effects!');
            });
            
            // Surprise button
            document.getElementById('surprise-btn').addEventListener('click', function() {
                fireworks.grandFinale();
                createFloatingElement('üéÅ Birthday Surprise!');
            });
            
            // Stage 6: Final Celebration
            function startFinalCelebration() {
                // Hide fireworks controls
                const fireworksControls = document.getElementById('fireworks-controls');
                fireworksControls.classList.add('hidden');
                
                // Start typing effect
                startTypingEffect();
                
                // Start grand finale after typing
                setTimeout(() => {
                    startAutomaticCelebration();
                }, 5000);
            }
            
            function startAutomaticCelebration() {
                // Show final celebration overlay
                const finalCelebration = document.getElementById('final-celebration');
                finalCelebration.classList.add('active');
                
                // Activate fireworks
                fireworks.activate();
                
                // Start grand finale
                fireworks.grandFinale();
                
                // Create floating elements
                for (let i = 0; i < 20; i++) {
                    setTimeout(() => {
                        createFloatingElement('üéâ');
                    }, i * 300);
                }
                
                // Update birthday status if it's the birthday
                const statusElement = document.getElementById('birthday-status');
                statusElement.textContent = "üéâ HAPPY BIRTHDAY LAKSHITA! üéâ";
                statusElement.style.animation = 'heartbeat 1s infinite';
                
                // Auto-navigate to countdown stage after finale
                setTimeout(() => {
                    navigateToStage(1);
                }, 12000);
            }
            
            // Auto navigation every 30 seconds (smooth)
            const autoNav = setInterval(() => {
                if (currentStage < 6) {
                    navigateToStage(currentStage + 1);
                } else {
                    clearInterval(autoNav);
                }
            }, 30000);
            
            // Stage 3: Create Heart Leaves Tree
            function createHeartLeavesTree() {
                const heartLeavesContainer = document.getElementById('heart-leaves');
                if (!heartLeavesContainer) return;
                
                heartLeavesContainer.innerHTML = '';
                
                const leafClasses = [
                    'heart-leaf-red', 'heart-leaf-pink', 'heart-leaf-purple', 
                    'heart-leaf-blue', 'heart-leaf-gold', 'heart-leaf-orange',
                    'heart-leaf-green', 'heart-leaf-teal'
                ];
                
                const messages = [
                    "You're the light in my life! üí´",
                    "Stay blessed Lakshita! üåü",
                    "Your smile is everything! üòä",
                    "Wishing you endless joy! üéâ",
                    "You're one of a kind! üíñ",
                    "Stay beautiful always! üå∏",
                    "Many happy returns! üéÇ",
                    "Enjoy your special day! ü•≥",
                    "You're so special! ‚ú®",
                    "Stay amazing! üí´",
                    "Sending you love! üíï",
                    "Stay happy always! üòÑ",
                    "You're wonderful! üåà",
                    "Stay magical! üîÆ",
                    "You're incredible! üöÄ",
                    "My heart beats for you! üíì",
                    "You complete me! üíû",
                    "Forever yours! üíò",
                    "My love for you grows! üíó",
                    "You're my everything! ‚ù§Ô∏è"
                ];
                
                // Create heart leaves in a tree pattern
                const totalLeaves = 120;
                
                for (let i = 0; i < totalLeaves; i++) {
                    setTimeout(() => {
                        const leaf = document.createElement('div');
                        leaf.className = 'heart-leaf';
                        
                        // Random color class
                        const colorClass = leafClasses[Math.floor(Math.random() * leafClasses.length)];
                        leaf.classList.add(colorClass);
                        
                        // Random position within the tree shape
                        const angle = Math.random() * Math.PI * 2;
                        const distance = Math.random() * 200 + 50;
                        const x = Math.cos(angle) * distance;
                        const y = Math.sin(angle) * distance * 0.8;
                        
                        // Adjust for tree shape (more leaves at top)
                        const adjustedY = y - Math.abs(x) * 0.3;
                        
                        leaf.style.left = `calc(50% + ${x}px)`;
                        leaf.style.top = `calc(50% + ${adjustedY}px)`;
                        
                        // Random rotation
                        const rotation = Math.random() * 360;
                        leaf.style.transform = `rotate(${rotation}deg)`;
                        
                        // Random animation delay
                        leaf.style.animationDelay = `${Math.random() * 4}s`;
                        
                        // Random size variation
                        const size = 0.8 + Math.random() * 0.6;
                        leaf.style.width = `${40 * size}px`;
                        leaf.style.height = `${40 * size}px`;
                        
                        // Click event
                        leaf.addEventListener('click', function(e) {
                            e.stopPropagation();
                            const msgIndex = Math.floor(Math.random() * messages.length);
                            createFloatingElement(messages[msgIndex]);
                            
                            // Animation on click
                            this.style.transform = `scale(1.5) rotate(${rotation + 45}deg)`;
                            this.style.filter = 'drop-shadow(0 0 30px currentColor)';
                            this.style.zIndex = '100';
                            
                            // Launch a small firework
                            setTimeout(() => {
                                fireworks.launchSingleFirework(getHeartColor(colorClass));
                            }, 200);
                            
                            setTimeout(() => {
                                this.style.transform = `rotate(${rotation}deg) scale(${size})`;
                                this.style.filter = 'drop-shadow(0 5px 15px rgba(0, 0, 0, 0.2))';
                                this.style.zIndex = '1';
                            }, 800);
                        });
                        
                        // Hover effect
                        leaf.addEventListener('mouseenter', function() {
                            this.style.transform = `rotate(${rotation + 10}deg) scale(${size * 1.2})`;
                        });
                        
                        leaf.addEventListener('mouseleave', function() {
                            this.style.transform = `rotate(${rotation}deg) scale(${size})`;
                        });
                        
                        heartLeavesContainer.appendChild(leaf);
                    }, i * 30);
                }
                
                // Create falling petals effect
                createFallingPetals();
            }
            
            function getHeartColor(colorClass) {
                const colorMap = {
                    'heart-leaf-red': '#ff3366',
                    'heart-leaf-pink': '#ff69b4',
                    'heart-leaf-purple': '#da70d6',
                    'heart-leaf-blue': '#87ceeb',
                    'heart-leaf-gold': '#ffd700',
                    'heart-leaf-orange': '#ff9900',
                    'heart-leaf-green': '#2ecc71',
                    'heart-leaf-teal': '#1abc9c'
                };
                return colorMap[colorClass] || '#ff69b4';
            }
            
            function createFallingPetals() {
                const petalsContainer = document.getElementById('falling-petals');
                if (!petalsContainer) return;
                
                petalsContainer.innerHTML = '';
                
                const petalSymbols = ['üíñ', 'üíï', 'üíó', 'üå∏', '‚ú®', 'üåü', 'üí´', 'ü•≥', 'üéâ'];
                
                // Create 20 falling petals
                for (let i = 0; i < 20; i++) {
                    const petal = document.createElement('div');
                    petal.className = 'falling-petal';
                    petal.textContent = petalSymbols[Math.floor(Math.random() * petalSymbols.length)];
                    petal.style.position = 'absolute';
                    petal.style.left = `${Math.random() * 100}%`;
                    petal.style.top = '-50px';
                    petal.style.fontSize = '25px';
                    petal.style.opacity = '0.8';
                    petal.style.zIndex = '0';
                    petal.style.pointerEvents = 'none';
                    
                    // Random color
                    const colors = ['#ff3366', '#ff69b4', '#da70d6', '#87ceeb', '#ffd700', '#2ecc71'];
                    petal.style.color = colors[Math.floor(Math.random() * colors.length)];
                    
                    // Animation
                    const duration = 5 + Math.random() * 5;
                    const delay = Math.random() * 5;
                    const xMovement = (Math.random() - 0.5) * 200;
                    
                    petal.style.setProperty('--x-movement', `${xMovement}px`);
                    petal.style.animation = `
                        fallDown ${duration}s linear ${delay}s infinite,
                        sway ${duration / 2}s ease-in-out ${delay}s infinite alternate
                    `;
                    
                    petalsContainer.appendChild(petal);
                }
            }
            
            // Add falling animation styles
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fallDown {
                    0% {
                        transform: translateY(0) translateX(0) rotate(0deg);
                        opacity: 0;
                    }
                    10% {
                        opacity: 0.8;
                    }
                    90% {
                        opacity: 0.8;
                    }
                    100% {
                        transform: translateY(600px) translateX(var(--x-movement)) rotate(360deg);
                        opacity: 0;
                    }
                }
                
                @keyframes sway {
                    0%, 100% {
                        transform: translateX(-5px);
                    }
                    50% {
                        transform: translateX(5px);
                    }
                }
            `;
            document.head.appendChild(style);
            
            // Stage 5: Gallery interactions
            const galleryItems = document.querySelectorAll('.gallery-item');
            galleryItems.forEach((item, index) => {
                item.addEventListener('click', function() {
                    const messages = [
                        "Beautiful memory of Lakshita! üíï",
                        "Precious moment captured forever! üì∏",
                        "Lakshita makes every moment special! ‚ú®"
                    ];
                    createFloatingElement(messages[index % messages.length]);
                    
                    // Image zoom effect
                    const img = this.querySelector('.gallery-img');
                    img.style.transform = 'scale(1.15)';
                    setTimeout(() => {
                        img.style.transform = 'scale(1.1)';
                    }, 300);
                });
            });
            
            // Typing effect
            function startTypingEffect() {
                const typingText = document.getElementById('typing-text');
                if (!typingText) return;
                
                const message = `My Dearest Lakshita,

Happy Birthday to the most wonderful person I know! üéâüéÇ

On this special day, I want you to know how much you mean to me. 
Your smile brightens up the darkest days, and your laughter is the most beautiful melody.

May this year bring you:
üíñ Endless happiness and joy
‚ú® Success in all your endeavors
üå∏ Good health and prosperity
üåü Love that grows stronger every day
üéâ Adventures that create beautiful memories

You deserve all the love and happiness in the world. 
May all your dreams come true and may this birthday be as special as you are!

Wishing you the most amazing birthday ever!

With all my love and warmest wishes,
Your Secret Admirer üíù`;

                typingText.textContent = '';
                let i = 0;
                
                function typeWriter() {
                    if (i < message.length) {
                        typingText.textContent += message.charAt(i);
                        i++;
                        setTimeout(typeWriter, 30);
                    }
                }
                
                // Start typing after a brief pause
                setTimeout(typeWriter, 500);
            }
            
            // Floating elements
            function createFloatingElement(text) {
                const element = document.createElement('div');
                element.className = 'floating-element';
                element.textContent = text;
                element.style.left = Math.random() * 80 + 10 + 'vw';
                element.style.color = getRandomColor();
                element.style.fontSize = (Math.random() * 10 + 20) + 'px';
                element.style.fontFamily = Math.random() > 0.5 ? '"Dancing Script", cursive' : '"Poppins", sans-serif';
                
                document.body.appendChild(element);
                
                setTimeout(() => {
                    element.remove();
                }, 6000);
            }
            
            function createFloatingElements() {
                const symbols = ['üíñ', '‚ú®', 'üåü', 'üéâ', 'üéÇ', 'üå∏', 'üéÅ', 'üí´', 'üéà', 'ü•≥'];
                for (let i = 0; i < 3; i++) {
                    setTimeout(() => {
                        createFloatingElement(symbols[Math.floor(Math.random() * symbols.length)]);
                    }, i * 300);
                }
            }
            
            function getRandomColor() {
                const colors = ['#ff3366', '#ff69b4', '#da70d6', '#87ceeb', '#ffd700', '#ff9900'];
                return colors[Math.floor(Math.random() * colors.length)];
            }
            
            // Day/Night mode toggle
            const toggleBtn = document.querySelector('.toggle-btn');
            if (toggleBtn) {
                toggleBtn.addEventListener('click', function() {
                    document.body.classList.toggle('night-mode');
                    const icon = this.querySelector('i');
                    if (document.body.classList.contains('night-mode')) {
                        icon.className = 'fas fa-sun';
                        icon.style.color = '#ffd700';
                    } else {
                        icon.className = 'fas fa-moon';
                        icon.style.color = '#ff69b4';
                    }
                    
                    // Create magical transition effect
                    for (let i = 0; i < 10; i++) {
                        setTimeout(() => {
                            createFloatingElement('‚ú®');
                        }, i * 100);
                    }
                });
            }
            
            // Initialize first stage
            createFloatingElements();
        });
    </script>
</body>
</html>
