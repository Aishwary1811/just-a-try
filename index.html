<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Lakshita üíñ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-pink: #ff69b4;
            --secondary-pink: #ff1493;
            --accent-purple: #da70d6;
            --accent-blue: #87ceeb;
            --accent-gold: #ffd700;
            --dark-pink: #d63384;
            --dark-bg: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            --final-bg: linear-gradient(135deg, #8a2c6e 0%, #b03084 50%, #d63384 100%);
            --text-light: #f5f5f5;
            --transition-smooth: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--dark-bg);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            transition: var(--transition-smooth);
            opacity: 0;
            animation: fadeIn 1.5s ease forwards;
            color: var(--text-light);
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #8a2c6e 0%, #d63384 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: all 1.2s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .birthday-text {
            font-family: 'Dancing Script', cursive;
            font-size: 4.5rem;
            color: white;
            text-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
            margin-bottom: 40px;
            animation: heartbeat 2s infinite;
            background: linear-gradient(45deg, #ffffff, #ffd6e7);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.05); }
            50% { transform: scale(1.03); }
            75% { transform: scale(1.07); }
        }

        .loading-bar {
            width: 400px;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .loading-progress {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #ffffff, #ffd6e7);
            border-radius: 10px;
            animation: loading 3s ease-out forwards;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        @keyframes loading {
            to { width: 100%; }
        }

        /* Container */
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Stage Containers */
        .stage {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            width: 100%;
            opacity: 0;
            transform: translateY(20px);
            transition: var(--transition-smooth);
            padding: 20px;
        }

        .stage.active {
            display: flex;
            opacity: 1;
            transform: translateY(0);
        }

        /* Elegant Stage Titles */
        .stage-title {
            font-family: 'Dancing Script', cursive;
            color: var(--accent-gold);
            font-size: clamp(3rem, 6vw, 4.5rem);
            margin-bottom: 50px;
            text-align: center;
            position: relative;
            padding-bottom: 25px;
            animation: titleFloat 10s ease-in-out infinite;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
        }

        @keyframes titleFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .stage-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--accent-gold), transparent);
            animation: lineWidth 6s ease-in-out infinite;
        }

        @keyframes lineWidth {
            0%, 100% { width: 150px; opacity: 1; }
            50% { width: 200px; opacity: 0.8; }
        }

        /* Birthday Countdown */
        .countdown-container {
            background: rgba(26, 26, 46, 0.92);
            padding: 40px 50px;
            border-radius: 30px;
            box-shadow: 0 20px 40px rgba(255, 215, 0, 0.15);
            backdrop-filter: blur(15px);
            margin: 40px 0;
            border: 2px solid rgba(255, 215, 0, 0.15);
            animation: containerFloat 8s ease-in-out infinite;
            position: relative;
            overflow: hidden;
            transition: var(--transition-smooth);
        }

        @keyframes containerFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            33% { transform: translateY(-10px) rotate(0.5deg); }
            66% { transform: translateY(-5px) rotate(-0.5deg); }
        }

        .countdown-title {
            font-family: 'Dancing Script', cursive;
            color: var(--accent-gold);
            font-size: 3rem;
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            z-index: 2;
        }

        .countdown-timer {
            display: flex;
            justify-content: center;
            gap: 25px;
            flex-wrap: wrap;
            position: relative;
            z-index: 2;
        }

        .countdown-unit {
            text-align: center;
            min-width: 120px;
            perspective: 1000px;
        }

        .countdown-number {
            font-size: 4rem;
            font-weight: bold;
            color: var(--accent-gold);
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 170, 0, 0.1));
            padding: 20px;
            border-radius: 20px;
            margin-bottom: 15px;
            display: inline-block;
            min-width: 110px;
            box-shadow: 
                0 10px 25px rgba(255, 215, 0, 0.15),
                inset 0 3px 10px rgba(255, 255, 255, 0.1);
            animation: pulseGlowNight 4s infinite;
            transition: var(--transition-smooth);
            transform-style: preserve-3d;
            position: relative;
            overflow: hidden;
        }

        @keyframes pulseGlowNight {
            0%, 100% { 
                transform: scale(1) rotateX(0deg);
                box-shadow: 0 10px 25px rgba(255, 215, 0, 0.15);
            }
            50% { 
                transform: scale(1.03) rotateX(3deg);
                box-shadow: 0 15px 35px rgba(255, 215, 0, 0.25), 0 0 40px rgba(255, 215, 0, 0.2);
            }
        }

        .countdown-label {
            font-size: 1.2rem;
            color: var(--text-light);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-top: 10px;
            opacity: 0.9;
        }

        /* IMPROVED HEART TREE */
        .tree-container {
            position: relative;
            width: 800px;
            height: 800px;
            margin: 50px 0;
        }

        .tree-structure {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1;
        }

        /* Realistic Tree Trunk */
        .tree-trunk {
            width: 100px;
            height: 350px;
            background: linear-gradient(45deg, 
                #8b4513 0%, 
                #a0522d 20%, 
                #8b4513 40%, 
                #a0522d 60%, 
                #8b4513 80%, 
                #a0522d 100%);
            border-radius: 25px 25px 15px 15px;
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.5),
                inset 0 5px 20px rgba(255, 255, 255, 0.1),
                0 0 30px rgba(139, 69, 19, 0.3);
            position: relative;
            z-index: 2;
            overflow: hidden;
        }

        .tree-trunk::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                90deg,
                transparent,
                transparent 10px,
                rgba(255, 255, 255, 0.05) 10px,
                rgba(255, 255, 255, 0.05) 20px
            );
            animation: barkPattern 20s infinite linear;
        }

        @keyframes barkPattern {
            0% { transform: translateX(0); }
            100% { transform: translateX(20px); }
        }

        /* Heart Leaves Container */
        .heart-leaves {
            position: absolute;
            width: 700px;
            height: 650px;
            bottom: 300px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1;
            filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.2));
        }

        /* Enhanced Heart Leaves with Better Animation */
        .heart-leaf {
            position: absolute;
            width: 50px;
            height: 50px;
            background: var(--heart-color);
            clip-path: path('M 25 10 C 35 5, 45 10, 50 20 C 50 30, 40 40, 25 50 C 10 40, 0 30, 0 20 C 0 10, 15 5, 25 10');
            transform-origin: center bottom;
            animation: leafFloat 8s infinite ease-in-out;
            cursor: pointer;
            transition: var(--transition-smooth);
            filter: 
                drop-shadow(0 5px 15px rgba(0, 0, 0, 0.3))
                brightness(1.1);
            transform-style: preserve-3d;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .heart-leaf::before {
            content: '';
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.4), transparent);
            clip-path: path('M 25 10 C 35 5, 45 10, 50 20 C 50 30, 40 40, 25 50 C 10 40, 0 30, 0 20 C 0 10, 15 5, 25 10');
            filter: blur(1px);
        }

        .heart-leaf::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.6), transparent 70%);
            clip-path: path('M 25 10 C 35 5, 45 10, 50 20 C 50 30, 40 40, 25 50 C 10 40, 0 30, 0 20 C 0 10, 15 5, 25 10');
            opacity: 0.3;
        }

        .heart-leaf:hover {
            transform: scale(1.6) rotate(15deg) translateZ(20px);
            filter: 
                drop-shadow(0 0 40px currentColor)
                brightness(1.5);
            animation: heartPulse 1.2s infinite alternate;
            z-index: 100;
        }

        @keyframes leafFloat {
            0%, 100% { 
                transform: translateY(0) rotate(0deg) scale(1);
            }
            25% { 
                transform: translateY(-15px) rotate(5deg) scale(1.1);
            }
            50% { 
                transform: translateY(-8px) rotate(-3deg) scale(0.95);
            }
            75% { 
                transform: translateY(-20px) rotate(8deg) scale(1.15);
            }
        }

        @keyframes heartPulse {
            0% { transform: scale(1.5) rotate(15deg); }
            100% { transform: scale(1.8) rotate(25deg); }
        }

        /* Colorful Heart Leaf Colors */
        .heart-leaf-1 { 
            --heart-color: linear-gradient(135deg, #ff3366, #ff6699, #ff99cc); 
            animation-delay: 0s; 
        }
        .heart-leaf-2 { 
            --heart-color: linear-gradient(135deg, #ff1493, #ff69b4, #ff99cc); 
            animation-delay: 0.2s; 
        }
        .heart-leaf-3 { 
            --heart-color: linear-gradient(135deg, #da70d6, #dda0dd, #e6e6fa); 
            animation-delay: 0.4s; 
        }
        .heart-leaf-4 { 
            --heart-color: linear-gradient(135deg, #87ceeb, #b3e0ff, #e6f7ff); 
            animation-delay: 0.6s; 
        }
        .heart-leaf-5 { 
            --heart-color: linear-gradient(135deg, #ffd700, #ffed99, #fffacd); 
            animation-delay: 0.8s; 
        }
        .heart-leaf-6 { 
            --heart-color: linear-gradient(135deg, #ff9900, #ffcc66, #ffe6b3); 
            animation-delay: 1s; 
        }
        .heart-leaf-7 { 
            --heart-color: linear-gradient(135deg, #2ecc71, #85e0a3, #c8f7c5); 
            animation-delay: 1.2s; 
        }
        .heart-leaf-8 { 
            --heart-color: linear-gradient(135deg, #1abc9c, #7fd9c7, #c1f0e6); 
            animation-delay: 1.4s; 
        }
        .heart-leaf-9 { 
            --heart-color: linear-gradient(135deg, #9b59b6, #c39bd3, #e8daef); 
            animation-delay: 1.6s; 
        }
        .heart-leaf-10 { 
            --heart-color: linear-gradient(135deg, #3498db, #85c1e9, #d6eaf8); 
            animation-delay: 1.8s; 
        }

        /* Realistic Branches */
        .branch {
            position: absolute;
            background: linear-gradient(45deg, #8b4513 0%, #a0522d 30%, #8b4513 70%, #a0522d 100%);
            border-radius: 12px;
            transform-origin: bottom center;
            z-index: 2;
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.3),
                inset 0 2px 8px rgba(255, 255, 255, 0.2),
                0 0 20px rgba(139, 69, 19, 0.2);
            animation: branchSway 15s infinite ease-in-out;
        }

        .branch::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                90deg,
                transparent,
                transparent 5px,
                rgba(255, 255, 255, 0.1) 5px,
                rgba(255, 255, 255, 0.1) 10px
            );
            border-radius: 12px;
        }

        .branch-1 { width: 350px; height: 20px; bottom: 300px; left: 140px; transform: rotate(-25deg); animation-delay: 0s; }
        .branch-2 { width: 320px; height: 20px; bottom: 300px; right: 140px; transform: rotate(25deg); animation-delay: 1s; }
        .branch-3 { width: 290px; height: 18px; bottom: 400px; left: 180px; transform: rotate(-45deg); animation-delay: 2s; }
        .branch-4 { width: 290px; height: 18px; bottom: 400px; right: 180px; transform: rotate(45deg); animation-delay: 3s; }
        .branch-5 { width: 240px; height: 15px; bottom: 500px; left: 220px; transform: rotate(-65deg); animation-delay: 4s; }
        .branch-6 { width: 240px; height: 15px; bottom: 500px; right: 220px; transform: rotate(65deg); animation-delay: 5s; }
        .branch-7 { width: 190px; height: 12px; bottom: 580px; left: 250px; transform: rotate(-85deg); animation-delay: 6s; }
        .branch-8 { width: 190px; height: 12px; bottom: 580px; right: 250px; transform: rotate(85deg); animation-delay: 7s; }

        @keyframes branchSway {
            0%, 100% { transform: rotate(var(--base-rotation)); }
            25% { transform: rotate(calc(var(--base-rotation) + 2deg)); }
            50% { transform: rotate(calc(var(--base-rotation) - 1deg)); }
            75% { transform: rotate(calc(var(--base-rotation) + 1deg)); }
        }

        /* Tree Title */
        .tree-title {
            position: absolute;
            top: -80px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Dancing Script', cursive;
            color: var(--accent-gold);
            font-size: 3.2rem;
            text-align: center;
            white-space: nowrap;
            animation: titleFloat 8s infinite ease-in-out;
            text-shadow: 
                0 3px 10px rgba(0, 0, 0, 0.25),
                0 0 30px rgba(255, 215, 0, 0.4);
            padding: 20px 50px;
            background: rgba(26, 26, 46, 0.9);
            border-radius: 60px;
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255, 215, 0, 0.2);
            box-shadow: 
                0 20px 40px rgba(255, 215, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        /* Tree Ground */
        .tree-ground {
            position: absolute;
            bottom: -50px;
            left: 50%;
            transform: translateX(-50%);
            width: 600px;
            height: 100px;
            background: linear-gradient(to top, #2d5016, #3a5f1d);
            border-radius: 50% 50% 0 0;
            box-shadow: 
                0 -10px 30px rgba(0, 0, 0, 0.4),
                inset 0 -10px 20px rgba(255, 255, 255, 0.1);
            z-index: 0;
        }

        .tree-ground::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 30px;
            background: linear-gradient(to top, transparent, rgba(255, 255, 255, 0.1));
            border-radius: 50% 50% 0 0;
        }

        /* Final Page - Movable/Scrollable */
        .final-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9000;
            display: none;
            justify-content: center;
            align-items: flex-start;
            opacity: 0;
            transition: opacity 2s ease;
            background: var(--final-bg);
            overflow-y: auto;
            padding: 40px 20px;
        }

        .final-page.active {
            display: flex;
            opacity: 1;
        }

        .final-container {
            width: 100%;
            max-width: 900px;
            padding: 40px;
            position: relative;
            z-index: 2;
            margin-top: 40px;
            margin-bottom: 100px;
        }

        .final-message-box {
            background: rgba(26, 26, 46, 0.95);
            padding: 80px;
            border-radius: 40px;
            box-shadow: 
                0 35px 70px rgba(0, 0, 0, 0.3),
                0 0 70px rgba(214, 51, 132, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(25px);
            border: 3px solid rgba(255, 215, 0, 0.25);
            position: relative;
            overflow: hidden;
        }

        .final-message-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: linear-gradient(90deg, 
                var(--dark-pink), 
                var(--accent-purple), 
                var(--accent-blue), 
                var(--accent-gold),
                var(--dark-pink));
            background-size: 300% 100%;
            animation: finalGradient 8s linear infinite;
        }

        @keyframes finalGradient {
            0% { background-position: 0% 50%; }
            100% { background-position: 300% 50%; }
        }

        /* Final Page Font - Scrollable */
        .final-typing-text {
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            line-height: 1.8;
            color: #f8d7e8;
            white-space: pre-wrap;
            overflow-wrap: break-word;
            opacity: 0.95;
            min-height: 400px;
            padding: 20px;
            text-align: center;
            font-weight: 400;
            letter-spacing: 1px;
            max-height: 70vh;
            overflow-y: auto;
            padding-right: 20px;
        }

        /* Custom scrollbar for final page */
        .final-typing-text::-webkit-scrollbar {
            width: 8px;
        }

        .final-typing-text::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .final-typing-text::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--dark-pink), var(--accent-purple));
            border-radius: 10px;
        }

        .final-cursor {
            display: inline-block;
            width: 4px;
            height: 2.5rem;
            background: linear-gradient(180deg, 
                var(--dark-pink), 
                var(--accent-purple),
                var(--accent-gold));
            margin-left: 3px;
            animation: blink 0.8s infinite;
            vertical-align: middle;
            border-radius: 3px;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; transform: scaleY(1); }
            51%, 100% { opacity: 0.3; transform: scaleY(0.7); }
        }

        /* Scroll indicator for final page */
        .scroll-indicator {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: var(--accent-gold);
            font-size: 1.2rem;
            animation: bounce 2s infinite;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            background: rgba(26, 26, 46, 0.8);
            padding: 10px 30px;
            border-radius: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 215, 0, 0.2);
            display: none;
        }

        .scroll-indicator.active {
            display: block;
        }

        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }

        /* Back to Start Button */
        .back-to-start {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10000;
            display: none;
        }

        .back-btn {
            padding: 18px 45px;
            background: linear-gradient(135deg, 
                var(--dark-pink), 
                var(--secondary-pink),
                var(--accent-purple));
            border: none;
            border-radius: 50px;
            color: white;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 1.2rem;
            cursor: pointer;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 
                0 12px 30px rgba(214, 51, 132, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.5);
            position: relative;
            overflow: hidden;
            letter-spacing: 1px;
        }

        .back-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.3), 
                transparent);
            transition: left 1s ease;
        }

        .back-btn:hover::before {
            left: 100%;
        }

        .back-btn:hover {
            transform: translateY(-4px) scale(1.03);
            box-shadow: 
                0 20px 40px rgba(214, 51, 132, 0.4),
                0 0 50px rgba(214, 51, 132, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }

        /* Controls */
        .controls {
            position: fixed;
            top: 35px;
            right: 35px;
            display: flex;
            gap: 20px;
            z-index: 1000;
        }

        .control-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.12);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: var(--accent-gold);
            font-size: 1.4rem;
            cursor: pointer;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(15px);
            box-shadow: 
                0 10px 25px rgba(0, 0, 0, 0.12),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: scale(1.15);
            box-shadow: 
                0 15px 35px rgba(255, 215, 0, 0.25),
                0 0 25px rgba(255, 215, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            color: var(--accent-gold);
        }

        .control-btn.active {
            background: rgba(255, 255, 255, 0.25);
            color: var(--accent-gold);
            transform: scale(1.1);
        }

        /* Navigation Dots */
        .nav-dots {
            position: fixed;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.08);
            padding: 20px 45px;
            border-radius: 60px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 
                0 12px 30px rgba(0, 0, 0, 0.12),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            flex-wrap: wrap;
            max-width: 90%;
            justify-content: center;
        }

        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 215, 0, 0.3);
            cursor: pointer;
            transition: var(--transition-smooth);
            border: 2px solid transparent;
            flex-shrink: 0;
        }

        .dot:hover {
            transform: scale(1.6);
            background: var(--accent-gold);
        }

        .dot.active {
            background: var(--accent-gold);
            transform: scale(1.6);
            box-shadow: 
                0 0 20px var(--accent-gold),
                0 0 40px rgba(255, 215, 0, 0.4);
            border-color: white;
        }

        /* Instruction Text */
        .instruction {
            color: var(--accent-gold);
            font-size: 1.2rem;
            margin-top: 35px;
            text-align: center;
            max-width: 600px;
            padding: 0 30px;
            font-weight: 500;
            opacity: 0.9;
            animation: gentlePulse 5s infinite;
            background: rgba(26, 26, 46, 0.9);
            padding: 15px 30px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 215, 0, 0.15);
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.08);
        }

        @keyframes gentlePulse {
            0%, 100% { 
                opacity: 0.85;
                transform: translateY(0);
            }
            50% { 
                opacity: 1;
                transform: translateY(-3px);
            }
        }

        /* Birthday Status */
        .birthday-status {
            font-family: 'Dancing Script', cursive;
            font-size: 2.2rem;
            color: var(--accent-gold);
            text-align: center;
            margin-top: 25px;
            padding: 15px 40px;
            background: rgba(26, 26, 46, 0.9);
            border-radius: 25px;
            display: inline-block;
            transition: var(--transition-smooth);
            box-shadow: 
                0 12px 30px rgba(255, 215, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 215, 0, 0.15);
        }

        /* Final Celebration */
        .final-celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 30% 30%, rgba(214, 51, 132, 0.2), transparent),
                      radial-gradient(circle at 70% 70%, rgba(255, 20, 147, 0.15), transparent),
                      radial-gradient(circle at 50% 50%, rgba(218, 112, 214, 0.15), transparent);
            z-index: 800;
            pointer-events: none;
            opacity: 0;
            transition: opacity 3s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .final-celebration.active {
            opacity: 1;
            animation: celebrationPulse 5s infinite alternate;
        }

        @keyframes celebrationPulse {
            0% { 
                background-size: 100% 100%, 100% 100%, 100% 100%;
                opacity: 0.7;
            }
            100% { 
                background-size: 120% 120%, 120% 120%, 120% 120%;
                opacity: 0.9;
            }
        }

        /* Heart Confetti */
        .heart-confetti {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 700;
        }

        .confetti-heart {
            position: absolute;
            font-size: 18px;
            opacity: 0;
            animation: confettiFall 10s linear forwards;
            text-shadow: 0 2px 8px currentColor;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(-100px) translateX(var(--start-x)) rotate(0deg) scale(0);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
                transform: translateY(0) translateX(var(--start-x)) rotate(180deg) scale(1);
            }
            90% {
                opacity: 0.8;
                transform: translateY(calc(100vh - 50px)) translateX(var(--end-x)) rotate(720deg) scale(1);
            }
            100% {
                transform: translateY(calc(100vh + 50px)) translateX(var(--end-x)) rotate(900deg) scale(0);
                opacity: 0;
            }
        }

        /* Stage Progress Bar */
        .stage-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 3px;
            background: linear-gradient(90deg, var(--dark-pink), var(--accent-purple), var(--accent-blue));
            z-index: 1001;
            transition: width 1s cubic-bezier(0.2, 0.8, 0.2, 1);
            box-shadow: 0 0 15px rgba(214, 51, 132, 0.4);
        }

        /* Magic Sparkles */
        .sparkle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            z-index: 999;
            animation: sparklePop 1.2s ease-out forwards;
            box-shadow: 0 0 8px white, 0 0 15px white;
        }

        @keyframes sparklePop {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 1;
            }
            50% {
                transform: scale(1) rotate(180deg);
                opacity: 1;
            }
            100% {
                transform: scale(0) rotate(360deg);
                opacity: 0;
            }
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .tree-container {
                width: 650px;
                height: 650px;
            }
            
            .heart-leaves {
                width: 580px;
                height: 550px;
                bottom: 250px;
            }
            
            .heart-leaf {
                width: 40px;
                height: 40px;
            }
            
            .tree-ground {
                width: 500px;
            }
        }

        @media (max-width: 768px) {
            .birthday-text {
                font-size: 3.5rem;
            }
            
            .loading-bar {
                width: 300px;
            }
            
            .tree-container {
                width: 500px;
                height: 550px;
            }
            
            .heart-leaves {
                width: 450px;
                height: 400px;
                bottom: 220px;
            }
            
            .heart-leaf {
                width: 32px;
                height: 32px;
            }
            
            .tree-title {
                font-size: 2.2rem;
                top: -60px;
                padding: 15px 35px;
            }
            
            .tree-ground {
                width: 400px;
            }
            
            .final-container {
                padding: 20px;
            }
            
            .final-message-box {
                padding: 40px 30px;
                margin: 30px 20px;
            }
            
            .final-typing-text {
                font-size: 1.8rem;
                line-height: 1.6;
                max-height: 60vh;
            }
            
            .controls {
                top: 25px;
                right: 25px;
            }
            
            .nav-dots {
                bottom: 30px;
                padding: 15px 30px;
                gap: 20px;
            }
            
            .control-btn {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
        }

        @media (max-width: 480px) {
            .stage-title {
                font-size: 2.5rem;
                margin-bottom: 40px;
            }
            
            .birthday-text {
                font-size: 2.8rem;
            }
            
            .tree-container {
                width: 350px;
                height: 450px;
            }
            
            .heart-leaves {
                width: 320px;
                height: 320px;
                bottom: 180px;
            }
            
            .heart-leaf {
                width: 25px;
                height: 25px;
            }
            
            .tree-title {
                font-size: 1.8rem;
                top: -50px;
                padding: 12px 25px;
            }
            
            .tree-ground {
                width: 300px;
                height: 80px;
            }
            
            .final-message-box {
                padding: 30px 20px;
            }
            
            .final-typing-text {
                font-size: 1.5rem;
                line-height: 1.6;
                max-height: 50vh;
            }
            
            .countdown-number {
                font-size: 2.5rem;
                min-width: 70px;
                padding: 12px;
            }
            
            .countdown-unit {
                min-width: 70px;
            }
            
            .birthday-status {
                font-size: 1.8rem;
                padding: 12px 25px;
            }
            
            .instruction {
                font-size: 1.1rem;
                padding: 12px 20px;
            }
        }

        /* Floating Elements */
        .floating-element {
            position: fixed;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: all 1.5s cubic-bezier(0.2, 0.8, 0.2, 1);
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        /* Animated Background Elements */
        .background-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .floating-heart {
            position: absolute;
            font-size: 24px;
            opacity: 0.1;
            animation: floatRandom 20s infinite linear;
        }

        @keyframes floatRandom {
            0% {
                transform: translateY(100vh) translateX(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.3;
            }
            90% {
                opacity: 0.3;
            }
            100% {
                transform: translateY(-100px) translateX(100px) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Background Music -->
    <audio id="background-music" loop>
        <source src="https://assets.mixkit.co/music/preview/mixkit-happy-birthday-to-you-443.mp3" type="audio/mpeg">
    </audio>

    <!-- Final Celebration Overlay -->
    <div class="final-celebration" id="final-celebration"></div>

    <!-- Heart Confetti Container -->
    <div class="heart-confetti" id="heart-confetti"></div>

    <!-- Stage Progress Bar -->
    <div class="stage-progress" id="stage-progress"></div>

    <!-- Scroll Indicator -->
    <div class="scroll-indicator" id="scroll-indicator">
        <i class="fas fa-chevron-down"></i> Scroll to read
    </div>

    <!-- Animated Background Elements -->
    <div class="background-elements" id="background-elements"></div>

    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="birthday-text">Happy Birthday Lakshita! üíñ</div>
        <div class="loading-bar">
            <div class="loading-progress"></div>
        </div>
        <p style="color: white; margin-top: 30px; font-family: 'Dancing Script', cursive; font-size: 1.4rem; text-shadow: 0 2px 10px rgba(0,0,0,0.3);">
            Creating magical moments just for you...
        </p>
    </div>

    <div class="container">
        <!-- Stage 1: Birthday Countdown -->
        <div id="stage-1" class="stage active">
            <h2 class="stage-title">Birthday Countdown üéâ</h2>
            
            <div class="countdown-container">
                <div class="countdown-title">Counting down to December 18th!</div>
                <div class="countdown-timer">
                    <div class="countdown-unit">
                        <div class="countdown-number" id="days">00</div>
                        <div class="countdown-label">Days</div>
                    </div>
                    <div class="countdown-unit">
                        <div class="countdown-number" id="hours">00</div>
                        <div class="countdown-label">Hours</div>
                    </div>
                    <div class="countdown-unit">
                        <div class="countdown-number" id="minutes">00</div>
                        <div class="countdown-label">Minutes</div>
                    </div>
                    <div class="countdown-unit">
                        <div class="countdown-number" id="seconds">00</div>
                        <div class="countdown-label">Seconds</div>
                    </div>
                </div>
                <div class="birthday-status" id="birthday-status"></div>
            </div>
            
            <p class="instruction">Get ready to celebrate Lakshita's special day! üéÇ</p>
        </div>

        <!-- Stage 2: IMPROVED HEART TREE -->
        <div id="stage-2" class="stage">
            <h2 class="stage-title">Your Sakura HeartTree üíñ</h2>
            <div class="tree-container">
                <div class="tree-title">"Your Sakura HeartTree is blooming..."</div>
                
                <!-- Tree Ground -->
                <div class="tree-ground"></div>
                
                <!-- Animated Branches -->
                <div class="branch branch-1" style="--base-rotation: -25deg;"></div>
                <div class="branch branch-2" style="--base-rotation: 25deg;"></div>
                <div class="branch branch-3" style="--base-rotation: -45deg;"></div>
                <div class="branch branch-4" style="--base-rotation: 45deg;"></div>
                <div class="branch branch-5" style="--base-rotation: -65deg;"></div>
                <div class="branch branch-6" style="--base-rotation: 65deg;"></div>
                <div class="branch branch-7" style="--base-rotation: -85deg;"></div>
                <div class="branch branch-8" style="--base-rotation: 85deg;"></div>
                
                <div class="tree-structure">
                    <div class="tree-trunk"></div>
                </div>
                
                <!-- Heart Leaves Container -->
                <div class="heart-leaves" id="heart-leaves"></div>
            </div>
            <p class="instruction">Click on the colorful heart leaves to discover special birthday messages! üíï</p>
        </div>

        <!-- Stage 3: Birthday Card with PDF Content -->
        <div id="stage-3" class="stage">
            <h2 class="stage-title">Your Birthday Card üíå</h2>
            <div class="birthday-card-container">
                <div class="final-message-box" style="margin: 0 auto; max-width: 600px;">
                    <div class="final-typing-text" style="max-height: 500px; font-size: 3rem; line-height: 1.5;">
                        Happy Birthday<br>
                        Lakshita
                    </div>
                </div>
            </div>
            <p class="instruction">This special message is just for you! üíù</p>
        </div>

        <!-- Stage 4: Final Birthday Message -->
        <div id="stage-4" class="stage">
            <h2 class="stage-title">Special Message for You ‚ú®</h2>
            <div class="birthday-card-container">
                <div class="final-message-box" style="margin: 0 auto; max-width: 800px;">
                    <div class="final-typing-text" id="special-message" style="text-align: left; padding: 40px; font-size: 1.8rem; line-height: 1.8;">
                        My Dearest Lakshita,<br><br>
                        
                        On this beautiful day, I want to take a moment to tell you how truly special you are. 
                        Your kindness, your smile, and your beautiful spirit light up the lives of everyone around you.<br><br>
                        
                        May this birthday bring you:<br>
                        üíñ Endless joy and laughter<br>
                        ‚ú® Success in all your dreams<br>
                        üå∏ Beautiful moments to cherish<br>
                        üéâ Adventures that create memories<br>
                        üíï Love that grows stronger every day<br><br>
                        
                        You deserve all the happiness in the world. May this year be filled with wonderful surprises, 
                        amazing opportunities, and dreams that come true.<br><br>
                        
                        Wishing you the happiest birthday ever!<br><br>
                        
                        With all my love and warmest wishes,<br>
                        Someone who cares about you deeply üíù
                    </div>
                </div>
            </div>
            <p class="instruction">Scroll to read the complete birthday message! üìú</p>
        </div>
    </div>

    <!-- Final Page with Complete Message -->
    <div id="final-page" class="final-page">
        <div class="final-container">
            <div class="final-message-box">
                <div class="final-typing-text" id="final-typing-text"></div>
                <div class="final-cursor"></div>
            </div>
        </div>
    </div>

    <!-- Back to Start Button -->
    <div class="back-to-start" id="back-to-start">
        <button class="back-btn" id="back-btn">
            <i class="fas fa-star"></i> Back to Start
        </button>
    </div>

    <!-- Controls -->
    <div class="controls">
        <button class="control-btn active" id="music-toggle">
            <i class="fas fa-volume-up"></i>
        </button>
        <button class="control-btn" id="special-effects">
            <i class="fas fa-magic"></i>
        </button>
    </div>

    <!-- Navigation Dots -->
    <div class="nav-dots">
        <div class="dot active" data-stage="1"></div>
        <div class="dot" data-stage="2"></div>
        <div class="dot" data-stage="3"></div>
        <div class="dot" data-stage="4"></div>
        <div class="dot" data-stage="final">‚≠ê</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log("Birthday Card Loaded Successfully!");
            
            // Create background floating hearts
            createBackgroundElements();
            
            // BIRTHDAY COUNTDOWN
            function updateCountdown() {
                const now = new Date();
                const currentYear = now.getFullYear();
                
                // Set birthday to December 18th of current year
                let birthday = new Date(currentYear, 11, 18);
                
                // If birthday has already passed this year, set to next year
                if (now > birthday) {
                    birthday = new Date(currentYear + 1, 11, 18);
                }
                
                const diff = birthday - now;
                
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                document.getElementById('days').textContent = days.toString().padStart(2, '0');
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
                
                // Update birthday status
                const statusElement = document.getElementById('birthday-status');
                if (days === 0 && hours === 0 && minutes === 0 && seconds === 0) {
                    statusElement.textContent = "üéâ HAPPY BIRTHDAY LAKSHITA! üéâ";
                    statusElement.style.animation = 'heartbeat 1.5s infinite';
                    createHeartConfetti(30);
                } else if (days === 1) {
                    statusElement.textContent = "Birthday is tomorrow! Get ready! üéÅ";
                } else if (days < 7) {
                    statusElement.textContent = `Only ${days} days to go! Exciting! ü•≥`;
                } else if (days < 30) {
                    statusElement.textContent = `${days} days until the big day! ‚ú®`;
                } else {
                    statusElement.textContent = `Counting down to December 18th! üéÇ`;
                }
            }
            
            // Update countdown every second
            setInterval(updateCountdown, 1000);
            updateCountdown();
            
            // Hide loading screen after loading
            setTimeout(() => {
                const loadingScreen = document.getElementById('loading-screen');
                loadingScreen.style.opacity = '0';
                loadingScreen.style.transform = 'scale(1.05)';
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                    createFloatingElement('üéâ Welcome to Lakshita\'s Birthday! üéâ');
                    createHeartConfetti(15);
                }, 1200);
            }, 3500);
            
            // Create background floating elements
            function createBackgroundElements() {
                const container = document.getElementById('background-elements');
                const hearts = ['üíñ', 'üíï', 'üíó', 'üíì', 'üíû', '‚ú®', 'üåü', 'üéâ'];
                
                for (let i = 0; i < 20; i++) {
                    const heart = document.createElement('div');
                    heart.className = 'floating-heart';
                    heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                    heart.style.left = Math.random() * 100 + 'vw';
                    heart.style.animationDelay = Math.random() * 20 + 's';
                    heart.style.fontSize = (Math.random() * 20 + 15) + 'px';
                    
                    const colors = ['#ff3366', '#d63384', '#da70d6', '#87ceeb', '#ffd700'];
                    heart.style.color = colors[Math.floor(Math.random() * colors.length)];
                    
                    container.appendChild(heart);
                }
            }
            
            // Create sparkle effects
            function createSparkles(e) {
                for (let i = 0; i < 5; i++) {
                    setTimeout(() => {
                        const sparkle = document.createElement('div');
                        sparkle.className = 'sparkle';
                        sparkle.style.left = (e.pageX + (Math.random() - 0.5) * 40) + 'px';
                        sparkle.style.top = (e.pageY + (Math.random() - 0.5) * 40) + 'px';
                        document.body.appendChild(sparkle);
                        
                        setTimeout(() => {
                            sparkle.remove();
                        }, 1200);
                    }, i * 60);
                }
            }
            
            // Create heart confetti
            function createHeartConfetti(count = 20) {
                const container = document.getElementById('heart-confetti');
                const hearts = ['üíñ', 'üíï', 'üíó', 'üíì', 'üíû'];
                
                for (let i = 0; i < count; i++) {
                    const heart = document.createElement('div');
                    heart.className = 'confetti-heart';
                    heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                    
                    const startX = Math.random() * 100;
                    const endX = startX + (Math.random() - 0.5) * 30;
                    
                    heart.style.setProperty('--start-x', `${startX}vw`);
                    heart.style.setProperty('--end-x', `${endX}vw`);
                    
                    const colors = ['#ff3366', '#d63384', '#da70d6', '#87ceeb'];
                    heart.style.color = colors[Math.floor(Math.random() * colors.length)];
                    
                    heart.style.fontSize = (Math.random() * 8 + 16) + 'px';
                    heart.style.animationDelay = Math.random() * 4 + 's';
                    
                    container.appendChild(heart);
                    
                    setTimeout(() => {
                        heart.remove();
                    }, 11000);
                }
            }
            
            // Stage Navigation with smooth transitions
            const stages = document.querySelectorAll('.stage');
            const dots = document.querySelectorAll('.dot');
            let currentStage = 1;
            
            function navigateToStage(stageNumber) {
                if (stageNumber === currentStage) return;
                
                if (stageNumber === 'final') {
                    showFinalPage();
                    return;
                }
                
                // Update progress bar
                const progress = (stageNumber - 1) * (100 / 4);
                document.getElementById('stage-progress').style.width = `${progress}%`;
                
                // Smooth transition out
                stages.forEach(stage => {
                    if (stage.classList.contains('active')) {
                        stage.style.opacity = '0';
                        stage.style.transform = 'translateY(20px) scale(0.98)';
                        setTimeout(() => {
                            stage.classList.remove('active');
                        }, 600);
                    }
                });
                
                // Smooth transition in
                setTimeout(() => {
                    const targetStage = document.getElementById(`stage-${stageNumber}`);
                    if (targetStage) {
                        targetStage.classList.add('active');
                        setTimeout(() => {
                            targetStage.style.opacity = '1';
                            targetStage.style.transform = 'translateY(0) scale(1)';
                        }, 50);
                        
                        // Update navigation dots
                        dots.forEach((dot, index) => {
                            if (index === stageNumber - 1) {
                                dot.classList.add('active');
                            } else {
                                dot.classList.remove('active');
                            }
                        });
                        
                        // Special dot for final page
                        document.querySelector('.dot[data-stage="final"]').classList.remove('active');
                        
                        currentStage = stageNumber;
                        
                        // Special initialization for each stage
                        switch(stageNumber) {
                            case 2:
                                createImprovedHeartTree();
                                break;
                            case 4:
                                initSpecialMessage();
                                break;
                        }
                        
                        // Create heart confetti
                        createHeartConfetti(8);
                        
                        // Create floating elements
                        createFloatingElements();
                    }
                }, 650);
            }
            
            // Show final page
            function showFinalPage() {
                console.log("Showing final page");
                
                // Hide all stages
                stages.forEach(stage => {
                    stage.classList.remove('active');
                    stage.style.opacity = '0';
                });
                
                // Update dots
                dots.forEach(dot => dot.classList.remove('active'));
                document.querySelector('.dot[data-stage="final"]').classList.add('active');
                
                // Hide back button initially
                document.getElementById('back-to-start').style.display = 'none';
                
                // Show scroll indicator
                document.getElementById('scroll-indicator').classList.add('active');
                
                // Show final page
                const finalPage = document.getElementById('final-page');
                finalPage.classList.add('active');
                setTimeout(() => {
                    finalPage.style.opacity = '1';
                }, 100);
                
                // Start typing effect
                startFinalTypingEffect();
                
                // Start celebration after typing
                setTimeout(() => {
                    createHeartConfetti(30);
                    
                    // Update birthday status
                    const statusElement = document.getElementById('birthday-status');
                    statusElement.textContent = "üéâ HAPPY BIRTHDAY LAKSHITA! üéâ";
                    statusElement.style.animation = 'heartbeat 1.5s infinite';
                    
                    // Show back button
                    setTimeout(() => {
                        document.getElementById('back-to-start').style.display = 'block';
                    }, 2000);
                    
                    // Start final celebration
                    startSubtleCelebration();
                }, 7000);
                
                // Hide scroll indicator when user scrolls
                finalPage.addEventListener('scroll', () => {
                    document.getElementById('scroll-indicator').classList.remove('active');
                });
            }
            
            // Navigation dots click
            dots.forEach((dot, index) => {
                dot.addEventListener('click', (e) => {
                    createSparkles(e);
                    if (dot.dataset.stage === 'final') {
                        showFinalPage();
                    } else {
                        navigateToStage(index + 1);
                    }
                });
            });
            
            // Back to start button
            document.getElementById('back-btn').addEventListener('click', function(e) {
                createSparkles(e);
                
                // Hide final page
                document.getElementById('final-page').classList.remove('active');
                document.getElementById('back-to-start').style.display = 'none';
                document.getElementById('scroll-indicator').classList.remove('active');
                
                // Navigate to stage 1
                navigateToStage(1);
            });
            
            // IMPROVED HEART TREE Creation
            function createImprovedHeartTree() {
                const heartLeavesContainer = document.getElementById('heart-leaves');
                if (!heartLeavesContainer) return;
                
                heartLeavesContainer.innerHTML = '';
                
                const leafClasses = [
                    'heart-leaf-1', 'heart-leaf-2', 'heart-leaf-3', 
                    'heart-leaf-4', 'heart-leaf-5', 'heart-leaf-6',
                    'heart-leaf-7', 'heart-leaf-8', 'heart-leaf-9', 'heart-leaf-10'
                ];
                
                const messages = [
                    "You're amazing Lakshita! üí´",
                    "Stay blessed always! üåü",
                    "Your smile is everything! üòä",
                    "Wishing you endless joy! üéâ",
                    "You're one of a kind! üíñ",
                    "Stay beautiful always! üå∏",
                    "Many happy returns! üéÇ",
                    "Enjoy your special day! ü•≥",
                    "You're so special! ‚ú®",
                    "Stay amazing! üí´",
                    "Sending you love! üíï",
                    "Stay happy always! üòÑ",
                    "You're wonderful! üåà",
                    "Stay magical! üîÆ",
                    "You're incredible! üöÄ"
                ];
                
                // Create heart leaves in a beautiful tree pattern
                const totalLeaves = 150;
                
                for (let i = 0; i < totalLeaves; i++) {
                    setTimeout(() => {
                        const leaf = document.createElement('div');
                        leaf.className = 'heart-leaf';
                        
                        // Random color class
                        const colorClass = leafClasses[Math.floor(Math.random() * leafClasses.length)];
                        leaf.classList.add(colorClass);
                        
                        // Create realistic tree shape (denser at top, sparse at bottom)
                        const layer = Math.floor(Math.random() * 5);
                        const angle = Math.random() * Math.PI * 2;
                        const baseDistance = [60, 100, 140, 180, 220];
                        const distance = baseDistance[layer] + Math.random() * 40;
                        const x = Math.cos(angle) * distance;
                        const y = Math.sin(angle) * distance * 0.7 - (layer * 50);
                        
                        leaf.style.left = `calc(50% + ${x}px)`;
                        leaf.style.top = `calc(50% + ${y}px)`;
                        
                        // Random rotation
                        const rotation = Math.random() * 360;
                        leaf.style.transform = `rotate(${rotation}deg) scale(1)`;
                        
                        // Random animation delay
                        leaf.style.animationDelay = `${Math.random() * 6}s`;
                        
                        // Random size variation (smaller at top, larger at bottom)
                        const size = 0.5 + (layer * 0.15) + Math.random() * 0.3;
                        leaf.style.width = `${50 * size}px`;
                        leaf.style.height = `${50 * size}px`;
                        
                        // Add leaf stem
                        const stem = document.createElement('div');
                        stem.style.position = 'absolute';
                        stem.style.width = '2px';
                        stem.style.height = `${15 * size}px`;
                        stem.style.background = 'linear-gradient(to bottom, #8b4513, #a0522d)';
                        stem.style.top = '100%';
                        stem.style.left = '50%';
                        stem.style.transform = 'translateX(-50%)';
                        stem.style.borderRadius = '1px';
                        leaf.appendChild(stem);
                        
                        // Click event
                        leaf.addEventListener('click', function(e) {
                            createSparkles(e);
                            const msgIndex = Math.floor(Math.random() * messages.length);
                            createFloatingElement(messages[msgIndex]);
                            
                            // Enhanced animation on click
                            this.style.transform = `scale(1.8) rotate(${rotation + 45}deg) translateZ(30px)`;
                            this.style.filter = 'drop-shadow(0 0 40px currentColor) brightness(1.5)';
                            this.style.zIndex = '100';
                            this.style.transition = 'all 0.5s cubic-bezier(0.2, 0.8, 0.2, 1.5)';
                            
                            // Create extra sparkles
                            for (let j = 0; j < 3; j++) {
                                setTimeout(() => {
                                    createSparkles({
                                        pageX: e.clientX + (Math.random() - 0.5) * 100,
                                        pageY: e.clientY + (Math.random() - 0.5) * 100
                                    });
                                }, j * 200);
                            }
                            
                            setTimeout(() => {
                                this.style.transform = `rotate(${rotation}deg) scale(${size})`;
                                this.style.filter = 'drop-shadow(0 5px 15px rgba(0, 0, 0, 0.3)) brightness(1.1)';
                                this.style.zIndex = '1';
                                this.style.transition = 'all 0.8s cubic-bezier(0.2, 0.8, 0.2, 1)';
                            }, 1500);
                        });
                        
                        // Enhanced hover effect
                        leaf.addEventListener('mouseenter', function() {
                            this.style.transform = `rotate(${rotation + 15}deg) scale(${size * 1.3}) translateZ(15px)`;
                            this.style.filter = 'drop-shadow(0 0 25px currentColor) brightness(1.3)';
                            this.style.transition = 'all 0.4s cubic-bezier(0.2, 0.8, 0.2, 1.2)';
                        });
                        
                        leaf.addEventListener('mouseleave', function() {
                            this.style.transform = `rotate(${rotation}deg) scale(${size})`;
                            this.style.filter = 'drop-shadow(0 5px 15px rgba(0, 0, 0, 0.3)) brightness(1.1)';
                            this.style.transition = 'all 0.6s cubic-bezier(0.2, 0.8, 0.2, 1)';
                        });
                        
                        heartLeavesContainer.appendChild(leaf);
                    }, i * 20);
                }
                
                // Create falling leaves animation
                createFallingLeaves();
            }
            
            function createFallingLeaves() {
                const container = document.querySelector('.tree-container');
                if (!container) return;
                
                for (let i = 0; i < 10; i++) {
                    const leaf = document.createElement('div');
                    leaf.className = 'heart-leaf';
                    leaf.classList.add(`heart-leaf-${Math.floor(Math.random() * 10) + 1}`);
                    
                    leaf.style.position = 'absolute';
                    leaf.style.width = '35px';
                    leaf.style.height = '35px';
                    leaf.style.left = Math.random() * 100 + '%';
                    leaf.style.top = '-50px';
                    leaf.style.zIndex = '0';
                    leaf.style.pointerEvents = 'none';
                    leaf.style.animation = `fallingLeaf ${15 + Math.random() * 10}s linear infinite`;
                    leaf.style.animationDelay = `${Math.random() * 5}s`;
                    
                    // Add falling animation
                    const style = document.createElement('style');
                    if (!document.querySelector('#falling-leaves-style')) {
                        style.id = 'falling-leaves-style';
                        style.textContent = `
                            @keyframes fallingLeaf {
                                0% {
                                    transform: translateY(0) rotate(0deg) translateX(0);
                                    opacity: 0;
                                }
                                10% {
                                    opacity: 0.8;
                                }
                                90% {
                                    opacity: 0.8;
                                }
                                100% {
                                    transform: translateY(calc(100vh + 100px)) rotate(720deg) translateX(${Math.random() * 200 - 100}px);
                                    opacity: 0;
                                }
                            }
                        `;
                        document.head.appendChild(style);
                    }
                    
                    container.appendChild(leaf);
                }
            }
            
            // Special message initialization
            function initSpecialMessage() {
                // Just ensure the message is visible
                console.log("Special message stage loaded");
            }
            
            // Typing effect for final page
            function startFinalTypingEffect() {
                const typingText = document.getElementById('final-typing-text');
                if (!typingText) return;
                
                const message = `My Dearest Lakshita,

Happy Birthday to the most wonderful person I know! üéâüéÇ

On this special day, I want you to know how much you mean to me. 
Your smile brightens up the darkest days, and your laughter is the most beautiful melody.

May this year bring you:
üíñ Endless happiness and joy
‚ú® Success in all your endeavors
üå∏ Good health and prosperity
üåü Love that grows stronger every day
üéâ Adventures that create beautiful memories

You deserve all the love and happiness in the world. 
May all your dreams come true and may this birthday be as special as you are!

Wishing you the most amazing birthday ever!

With all my love and warmest wishes,
Your Secret Admirer üíù

PS: Every word here is written with love and care for you, my dear Lakshita. 
May this birthday mark the beginning of the most wonderful year of your life! üíï

Remember:
‚Ä¢ You are stronger than you think
‚Ä¢ More beautiful than you realize
‚Ä¢ More loved than you can imagine
‚Ä¢ And destined for amazing things! ‚ú®

Here's to you, Lakshita - may your day be as bright and beautiful as you are! üåü`;

                typingText.textContent = '';
                let i = 0;
                
                function typeWriter() {
                    if (i < message.length) {
                        typingText.textContent += message.charAt(i);
                        i++;
                        setTimeout(typeWriter, 30);
                    }
                }
                
                setTimeout(typeWriter, 1000);
            }
            
            // Enhanced Floating elements
            function createFloatingElement(text) {
                const element = document.createElement('div');
                element.className = 'floating-element';
                element.textContent = text;
                element.style.position = 'fixed';
                element.style.left = Math.random() * 70 + 15 + 'vw';
                element.style.top = '100vh';
                element.style.color = getRandomColor();
                element.style.fontSize = (Math.random() * 10 + 20) + 'px';
                element.style.fontFamily = Math.random() > 0.5 ? '"Dancing Script", cursive' : '"Poppins", sans-serif';
                element.style.zIndex = Math.floor(Math.random() * 100) + 800;
                element.style.opacity = '0';
                element.style.transform = 'translateY(0) scale(0.8)';
                element.style.transition = 'all 1.5s cubic-bezier(0.2, 0.8, 0.2, 1)';
                element.style.pointerEvents = 'none';
                element.style.textShadow = '0 2px 10px rgba(0,0,0,0.3)';
                
                document.body.appendChild(element);
                
                setTimeout(() => {
                    element.style.opacity = '1';
                    element.style.transform = 'translateY(-100px) scale(1)';
                }, 10);
                
                setTimeout(() => {
                    element.style.opacity = '0';
                    element.style.transform = 'translateY(-200px) scale(0.5)';
                    setTimeout(() => {
                        element.remove();
                    }, 1500);
                }, 6000);
            }
            
            function createFloatingElements() {
                const symbols = ['üíñ', '‚ú®', 'üåü', 'üéâ', 'üéÇ', 'üå∏'];
                for (let i = 0; i < 3; i++) {
                    setTimeout(() => {
                        createFloatingElement(symbols[Math.floor(Math.random() * symbols.length)]);
                    }, i * 600);
                }
            }
            
            function getRandomColor() {
                const colors = ['#ff3366', '#d63384', '#da70d6', '#87ceeb', '#ffd700'];
                return colors[Math.floor(Math.random() * colors.length)];
            }
            
            // Subtle celebration
            function startSubtleCelebration() {
                const finalCelebration = document.getElementById('final-celebration');
                finalCelebration.classList.add('active');
                
                for (let i = 0; i < 5; i++) {
                    setTimeout(() => {
                        createHeartConfetti(10);
                    }, i * 800);
                }
                
                for (let i = 0; i < 15; i++) {
                    setTimeout(() => {
                        createFloatingElement('üéâ');
                    }, i * 300);
                }
                
                createHeartConfetti(40);
            }
            
            // Background Music
            const backgroundMusic = document.getElementById('background-music');
            let isMusicPlaying = false;
            
            // Set initial volume
            backgroundMusic.volume = 0.4;
            
            // Music toggle button
            const musicBtn = document.getElementById('music-toggle');
            musicBtn.addEventListener('click', function() {
                if (isMusicPlaying) {
                    backgroundMusic.pause();
                    isMusicPlaying = false;
                    this.innerHTML = '<i class="fas fa-volume-mute"></i>';
                    this.classList.remove('active');
                    createFloatingElement('üîá Music Paused');
                } else {
                    backgroundMusic.play();
                    isMusicPlaying = true;
                    this.innerHTML = '<i class="fas fa-volume-up"></i>';
                    this.classList.add('active');
                    createFloatingElement('üéµ Music Playing');
                }
            });
            
            // Special effects button
            document.getElementById('special-effects').addEventListener('click', function(e) {
                createSparkles(e);
                createHeartConfetti(15);
                createFloatingElement('‚ú® Special Birthday Magic!');
            });
            
            // Auto-start music on user interaction
            document.addEventListener('click', function startMusicOnInteraction() {
                if (!isMusicPlaying) {
                    backgroundMusic.play();
                    isMusicPlaying = true;
                    musicBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
                    musicBtn.classList.add('active');
                }
                document.removeEventListener('click', startMusicOnInteraction);
            }, { once: true });
            
            // Initialize first stage
            createFloatingElements();
            createHeartConfetti(10);
            
            // Auto navigation every 30 seconds
            const autoNav = setInterval(() => {
                if (currentStage < 4) {
                    navigateToStage(currentStage + 1);
                } else {
                    clearInterval(autoNav);
                }
            }, 30000);
        });
    </script>
</body>
</html>
