<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday Lakshtu ðŸ’–</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');
:root{
  --bg1:#fff6f3; --bg2:#ffeef9; --accent:#ff4f9a; --peach:#ffb88c; --muted:#63414a;
}
*{box-sizing:border-box}
body{margin:0;font-family:'Poppins',sans-serif;background:linear-gradient(160deg,var(--bg1),var(--bg2));color:var(--muted);min-height:100vh;display:flex;justify-content:center;align-items:center;overflow-x:hidden;}
.container{width:100%;max-width:900px;position:relative;padding:20px;display:flex;flex-direction:column;align-items:center;gap:12px;background:rgba(255,255,255,0.96);border-radius:16px;box-shadow:0 30px 80px rgba(120,50,80,0.06);}

/* Buttons */
.btn{padding:12px 20px;border-radius:999px;border:none;color:white;font-weight:700;cursor:pointer;background:linear-gradient(180deg,var(--peach),var(--accent));box-shadow:0 12px 30px rgba(255,100,150,0.14);transition:transform .18s;}
.btn:active{transform:translateY(1px);}
.btn.secondary{background:linear-gradient(180deg,#aebaff,#c89bff);}

/* Stage sections */
.stage{display:none;flex-direction:column;align-items:center;gap:12px;}
.stage.active{display:flex;}

/* Envelope */
#envelope{width:320px;max-width:86vw;border-radius:12px;cursor:pointer;box-shadow:0 18px 40px rgba(0,0,0,0.12);transition:transform .5s;}
#envelope:hover{transform:translateY(-6px);}

/* Tree */
#treeStage{position:relative;width:100%;height:300px;}
#treeBase {
  width: 24px;
  height: 0;
  background: #8b5a2b;
  border-radius: 12px;
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  z-index:1;
  box-shadow: 0 6px 18px rgba(0,0,0,0.2);
  transition: height 1.2s ease;
}
.branch{
  position:absolute;
  width:12px;
  height:0;
  background:#8b5a2b;
  border-radius:6px;
  bottom:150px;
  left:50%;
  transform-origin:bottom center;
  z-index:1;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  transition: height 1s ease, transform 0.6s ease;
}
.branch1{transform:translateX(-50%) rotate(-40deg);}
.branch2{transform:translateX(-50%) rotate(-25deg);}
.branch3{transform:translateX(-50%) rotate(20deg);}
.branch4{transform:translateX(-50%) rotate(35deg);}
.branch5{transform:translateX(-50%) rotate(10deg);}

/* Leaf hearts */
#leafLayer{position:absolute;top:0;left:0;width:100%;height:100%;z-index:2;pointer-events:none;}
.tree-heart{
  position:absolute;
  width:28px;height:28px;
  background-image:url('heart.png');
  background-size:contain;
  background-repeat:no-repeat;
  opacity:0;
  transform:scale(0);
  transition:transform 0.8s ease, opacity 0.8s ease;
  filter:drop-shadow(0 2px 8px rgba(255,100,150,0.3));
}
.tree-heart.pop{
  opacity:1;
  transform:scale(1);
  animation: floatGlow 2.5s ease forwards;
}
@keyframes floatGlow {
  0%{transform:scale(1) translateY(0);}
  100%{transform:scale(0.7) translateY(-40px);}
}

/* Cake */
#cakeBox{display:flex;flex-direction:column;align-items:center;gap:8px;}
#cakeImg{width:360px;max-width:88vw;border-radius:16px;cursor:pointer;box-shadow:0 26px 68px rgba(0,0,0,0.12);transition:transform .18s;}
#cakeImg:active{transform:scale(.94);}
.candle{position:relative;width:8px;height:34px;background:#fff;border-radius:8px;left:50%;transform:translateX(-50%);top:-52px;opacity:1;}
.flame{position:absolute;left:50%;top:-18px;width:14px;height:14px;border-radius:50%;transform:translateX(-50%);background:radial-gradient(circle,#ffd800 0%, #ff5e00 70%);filter:drop-shadow(0 8px 14px rgba(255,120,60,0.3));opacity:1;}

/* Gift */
#gift3D{width:240px;height:140px;border-radius:12px;background:linear-gradient(180deg,#fff3e6,#ffd6b3);display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 22px 68px rgba(255,150,120,0.12);position:relative;overflow:visible;transform-style:preserve-3d;transition:transform .45s;}
.lid{position:absolute;top:-18px;left:50%;transform:translateX(-50%);width:260px;height:44px;background:linear-gradient(180deg,#ffd8b0,#ffb07a);border-radius:8px;transform-origin:50% 100%;transition:transform .6s;}
.lid.open{transform:translateX(-50%) rotateX(-78deg) translateY(-14px);}

/* Final letter */
#finalPanel{width:92%;max-width:760px;background:linear-gradient(180deg,#fff7f9,#fff2f6);border-radius:14px;padding:18px;margin-top:12px;box-shadow:0 20px 48px rgba(255,150,190,0.07);text-align:left;display:none;}
.typewriter{white-space:pre-wrap;font-weight:500;font-size:16px;}
.cursor{display:inline-block;width:10px;height:18px;background:var(--accent);margin-left:8px;border-radius:3px;animation:blink 1s steps(2,start) infinite;}
@keyframes blink{50%{opacity:0;}}

/* Gallery */
.gallery-section{padding:40px 20px;text-align:center;display:none;}
.gallery-title{font-size:2rem;margin-bottom:20px;color:#ff5599;font-weight:700;}
.gallery-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:25px;width:90%;margin:auto;}
.gallery-item{overflow:hidden;border-radius:20px;box-shadow:0 8px 20px rgba(0,0,0,0.15);transition:0.4s ease;}
.gallery-item:hover{transform:scale(1.05);box-shadow:0 10px 30px rgba(0,0,0,0.25);}
.gallery-item img{width:100%;height:100%;object-fit:cover;}
.gallery-item.tall img{object-position:center top;}
</style>
</head>
<body>
<div class="container">
  <!-- Intro -->
  <div id="intro" class="stage active">
    <h2 style="margin:6px 0;color:var(--accent)">It's your special day!</h2>
    <div style="color:#7a3b54;margin-bottom:6px">Ready to open your surprise?</div>
    <div style="display:flex;gap:12px">
      <button id="startBtn" class="btn">Start & Play Music ðŸ’–</button>
    </div>
  </div>

  <!-- Envelope -->
  <div id="envelopeStage" class="stage">
    <img id="envelope" src="envelope.png" alt="envelope"/>
    <div style="font-size:13px;color:#7a3b54">Tap the envelope ðŸ’Œ</div>
  </div>

  <!-- Tree -->
  <div id="treeStage" class="stage">
    <div id="treeBase"></div>
    <div class="branch branch1"></div>
    <div class="branch branch2"></div>
    <div class="branch branch3"></div>
    <div class="branch branch4"></div>
    <div class="branch branch5"></div>
    <div id="leafLayer"></div>
    <div style="font-size:13px;color:#7a3b54;position:absolute;bottom:-25px;">Tree grows slowly â€” watch the blossoms ðŸŒ³ðŸ’–</div>
  </div>

  <!-- Cake -->
  <div id="cakeStage" class="stage">
    <div id="cakeBox">
      <div class="candle" id="candle"><div class="flame" id="flame"></div></div>
      <img id="cakeImg" src="cake.jpg" alt="cake"/>
    </div>
    <div style="font-size:13px;color:#7a3b54">Tap the cake to cut it ðŸŽ‚</div>
  </div>

  <!-- Gift -->
  <div id="giftStage" class="stage">
    <div id="gift3D">
      <div class="lid" id="lid"></div>
      <div id="giftText">Open Gift</div>
    </div>
  </div>

  <!-- Final Letter -->
  <div id="finalStage" class="stage">
    <div id="finalPanel">
      <div id="typed" class="typewriter"></div><span id="cursor" class="cursor"></span>
    </div>
  </div>

  <!-- Gallery -->
  <section id="gallery" class="gallery-section">
    <h2 class="gallery-title">Our Beautiful Moments ðŸ’—</h2>
    <div class="gallery-grid">
      <div class="gallery-item tall"><img src="pic_three.png" alt="Her Eyes"></div>
      <div class="gallery-item"><img src="pic_one.jpg" alt="Memory 1"></div>
      <div class="gallery-item"><img src="pic_two.jpg" alt="Memory 2"></div>
    </div>
  </section>
</div>

<audio id="bgm" src="song.mp3" preload="auto" loop></audio>

<script>
const startBtn = document.getElementById('startBtn');
const envelopeStage = document.getElementById('envelopeStage');
const treeStage = document.getElementById('treeStage');
const cakeStage = document.getElementById('cakeStage');
const giftStage = document.getElementById('giftStage');
const finalStage = document.getElementById('finalStage');
const typed = document.getElementById('typed');
const cursor = document.getElementById('cursor');
const gallerySection = document.getElementById('gallery');
const leafLayer = document.getElementById('leafLayer');
const cakeImg = document.getElementById('cakeImg');
const lid = document.getElementById('lid');
const treeBase = document.getElementById('treeBase');
const branches = document.querySelectorAll('.branch');
const bgm = document.getElementById('bgm');

startBtn.addEventListener('click', ()=>{
  bgm.play().catch(()=>{});
  document.getElementById('intro').classList.remove('active');
  envelopeStage.classList.add('active');
});

document.getElementById('envelope').addEventListener('click', async ()=>{
  envelopeStage.classList.remove('active');
  treeStage.classList.add('active');

  // Animate trunk
  treeBase.style.height='150px';

  // Animate branches sequentially
  branches.forEach((b,i)=>setTimeout(()=>b.style.height='90px', i*300));

  // After branches appear, create hearts
  setTimeout(()=>{
    for(let i=0;i<25;i++){
      setTimeout(()=>createHeartOnBranch(), i*150);
    }
  }, 1800);

  // After all, move to cake
  setTimeout(()=>{
    treeStage.classList.remove('active');
    cakeStage.classList.add('active');
  }, 6000);
});

function createHeartOnBranch(){
  const w = leafLayer.clientWidth||300;
  const h = leafLayer.clientHeight||200;
  const el = document.createElement('div'); 
  el.className='tree-heart';
  const branchX = [0.3,0.4,0.5,0.6,0.7][Math.floor(Math.random()*5)];
  const branchY = 0.1 + Math.random()*0.3;
  el.style.left = w*branchX + Math.random()*20 - 10 + 'px';
  el.style.top = h*branchY + 'px';
  leafLayer.appendChild(el);
  setTimeout(()=>el.classList.add('pop'),Math.random()*300);
  setTimeout(()=>{
    el.style.transition='transform 2500ms ease, opacity 2500ms ease';
    el.style.transform='translateY(-40px) scale(0.7) rotate('+Math.random()*360+'deg)';
    el.style.opacity=0;
    setTimeout(()=>el.remove(),2500);
  },1000 + Math.random()*1000);
}

cakeImg.addEventListener('click', ()=>{
  cakeStage.classList.remove('active');
  giftStage.classList.add('active');
});

document.getElementById('gift3D').addEventListener('click', ()=>{
  lid.classList.add('open');
  setTimeout(()=>{
    giftStage.classList.remove('active');
    gallerySection.style.display='block';
    finalStage.classList.add('active');
    document.getElementById('finalPanel').style.display='block';
    startTyping();
  },900);
});

const message = `My sweet Lakshtu,\n\nYou make my world brighter just by being in it. You are the kindest part of my heart â€” the calm in my chaos, and the softest place where my feelings rest.\n\nThank you for loving me in your own little ways, for supporting me, for choosing me, and for making every day feel special without even trying.\n\nOn your birthday, I just want you to know â€” you are precious to me, you are loved more than words can hold, and you will always, always have a place in my heart.\n\nI LOVE YOU, LAKSHTU ðŸ’–âœ¨`;
let tIndex=0;
function startTyping(){
  typed.textContent=''; tIndex=0; cursor.style.display='inline-block';
  function step(){
    if(tIndex<message.length){
      typed.textContent+=message.charAt(tIndex++);
      setTimeout(step,28+Math.random()*18);
    }else cursor.style.display='none';
  }
  step();
}
</script>
</body>
</html>
