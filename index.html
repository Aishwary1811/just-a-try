<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Lakshita üíñ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-pink: #ff69b4;
            --secondary-pink: #ff1493;
            --accent-purple: #da70d6;
            --accent-blue: #87ceeb;
            --accent-gold: #ffd700;
            --accent-green: #2ecc71;
            --soft-white: #fffafa;
            --light-bg: linear-gradient(135deg, #fff0f5 0%, #f8f8ff 50%, #fff0f5 100%);
            --dark-bg: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            --text-dark: #4a4a4a;
            --text-light: #f5f5f5;
            --transition-smooth: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--light-bg);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            transition: var(--transition-smooth);
            opacity: 0;
            animation: fadeIn 1.2s ease forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        body.night-mode {
            background: var(--dark-bg);
        }

        /* Elegant Cursor */
        body {
            cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 32 32'%3E%3Cpath fill='%23ff69b4' d='M16 3C8.83 3 3 8.83 3 16s5.83 13 13 13 13-5.83 13-13S23.17 3 16 3zm0 2c6.08 0 11 4.92 11 11s-4.92 11-11 11S5 22.08 5 16 9.92 5 16 5z'/%3E%3Cpath fill='%23ff69b4' d='M16 8c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 2c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6 2.69-6 6-6z'/%3E%3C/svg%3E") 16 16, auto;
        }

        /* Magical Particle Background */
        .magic-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
            overflow: hidden;
        }

        .magic-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: radial-gradient(circle, var(--primary-pink) 30%, transparent 70%);
            border-radius: 50%;
            animation: floatMagic 15s infinite linear;
            box-shadow: 0 0 20px var(--primary-pink);
            opacity: 0.3;
        }

        @keyframes floatMagic {
            0% {
                transform: translateY(100vh) translateX(0) rotate(0deg) scale(0.5);
                opacity: 0;
            }
            10% {
                opacity: 0.6;
            }
            90% {
                opacity: 0.6;
            }
            100% {
                transform: translateY(-100px) translateX(100px) rotate(360deg) scale(0.5);
                opacity: 0;
            }
        }

        /* Flowing Gradient Background */
        .flowing-gradient {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.3;
            background: linear-gradient(45deg, 
                rgba(255, 105, 180, 0.1) 0%, 
                rgba(255, 20, 147, 0.1) 25%, 
                rgba(218, 112, 214, 0.1) 50%, 
                rgba(135, 206, 235, 0.1) 75%, 
                rgba(255, 105, 180, 0.1) 100%);
            background-size: 400% 400%;
            animation: gradientFlow 20s ease infinite;
        }

        @keyframes gradientFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff69b4 0%, #da70d6 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 1s ease-out, transform 1s ease-out;
        }

        .birthday-text {
            font-family: 'Dancing Script', cursive;
            font-size: 5rem;
            color: white;
            text-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
            margin-bottom: 40px;
            animation: heartbeat 1.8s infinite;
            background: linear-gradient(45deg, #ffffff, #ffd6e7, #ffffff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            background-size: 200% 100%;
            animation: textShine 3s ease-in-out infinite;
        }

        @keyframes textShine {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .loading-bar {
            width: 400px;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .loading-progress {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #ffffff, #ffd6e7, #ffffff);
            background-size: 200% 100%;
            border-radius: 10px;
            animation: loading 2.5s ease-out forwards, gradientMove 2s ease infinite;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        @keyframes loading {
            to { width: 100%; }
        }

        @keyframes gradientMove {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Container */
        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Stage Containers */
        .stage {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            width: 100%;
            opacity: 0;
            transform: translateY(30px);
            transition: var(--transition-smooth);
            padding: 40px 20px;
        }

        .stage.active {
            display: flex;
            opacity: 1;
            transform: translateY(0);
        }

        /* Elegant Stage Titles */
        .stage-title {
            font-family: 'Dancing Script', cursive;
            color: var(--primary-pink);
            font-size: clamp(3.5rem, 8vw, 5rem);
            margin-bottom: 60px;
            text-align: center;
            position: relative;
            padding-bottom: 30px;
            animation: titleFloat 8s ease-in-out infinite;
            text-shadow: 0 5px 25px rgba(255, 105, 180, 0.3);
        }

        .stage-title::before {
            content: '';
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(255, 105, 180, 0.2) 0%, transparent 70%);
            border-radius: 50%;
            animation: glowPulse 4s infinite;
        }

        @keyframes glowPulse {
            0%, 100% { transform: translateX(-50%) scale(1); opacity: 0.5; }
            50% { transform: translateX(-50%) scale(1.3); opacity: 0.8; }
        }

        .stage-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 4px;
            background: linear-gradient(90deg, transparent, var(--primary-pink), transparent);
            animation: lineWidth 4s ease-in-out infinite;
        }

        body.night-mode .stage-title {
            color: var(--accent-gold);
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        /* Birthday Countdown */
        .countdown-container {
            background: rgba(255, 255, 255, 0.95);
            padding: 50px 60px;
            border-radius: 40px;
            box-shadow: 
                0 30px 60px rgba(255, 105, 180, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            margin: 40px 0;
            border: 3px solid rgba(255, 255, 255, 0.4);
            animation: containerFloat 8s ease-in-out infinite;
            position: relative;
            overflow: hidden;
            max-width: 900px;
            width: 90%;
        }

        .countdown-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 300%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.4), 
                transparent);
            animation: shine 8s infinite linear;
        }

        @keyframes shine {
            0% { transform: translateX(0) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }

        .countdown-title {
            font-family: 'Dancing Script', cursive;
            color: var(--primary-pink);
            font-size: 3.5rem;
            text-align: center;
            margin-bottom: 40px;
            position: relative;
            z-index: 2;
        }

        .countdown-timer {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            position: relative;
            z-index: 2;
        }

        .countdown-unit {
            text-align: center;
            min-width: 140px;
            perspective: 1000px;
        }

        .countdown-number {
            font-size: 5rem;
            font-weight: bold;
            color: var(--primary-pink);
            background: linear-gradient(135deg, rgba(255, 105, 180, 0.2), rgba(255, 20, 147, 0.2));
            padding: 25px;
            border-radius: 25px;
            margin-bottom: 15px;
            display: inline-block;
            min-width: 130px;
            box-shadow: 
                0 20px 40px rgba(255, 105, 180, 0.3),
                inset 0 5px 15px rgba(255, 255, 255, 0.9);
            animation: pulseGlow 3s infinite;
            transition: var(--transition-smooth);
            position: relative;
            overflow: hidden;
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
        }

        .countdown-number::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, 
                transparent, 
                rgba(255, 255, 255, 0.6), 
                transparent);
            animation: numberShine 6s infinite linear;
        }

        @keyframes pulseGlow {
            0%, 100% { 
                transform: scale(1) translateY(0);
                box-shadow: 
                    0 20px 40px rgba(255, 105, 180, 0.3),
                    inset 0 5px 15px rgba(255, 255, 255, 0.9);
            }
            50% { 
                transform: scale(1.08) translateY(-10px);
                box-shadow: 
                    0 30px 60px rgba(255, 105, 180, 0.5),
                    0 0 80px rgba(255, 105, 180, 0.4),
                    inset 0 5px 20px rgba(255, 255, 255, 1);
            }
        }

        body.night-mode .countdown-number {
            color: var(--accent-gold);
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 170, 0, 0.2));
        }

        .countdown-label {
            font-size: 1.3rem;
            color: var(--text-dark);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-top: 10px;
            opacity: 0.9;
            font-family: 'Poppins', sans-serif;
        }

        /* Custom Envelope - Enhanced */
        .envelope-wrapper {
            position: relative;
            width: 500px;
            height: 360px;
            cursor: pointer;
            perspective: 1800px;
            margin: 50px 0;
            filter: drop-shadow(0 30px 60px rgba(255, 105, 180, 0.4));
            transition: transform 0.8s ease;
        }

        .envelope-wrapper:hover {
            transform: scale(1.05) rotateY(8deg) rotateX(3deg);
        }

        .envelope {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 2.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .envelope-body {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 30px;
            overflow: hidden;
            background: linear-gradient(135deg, var(--primary-pink), var(--secondary-pink), var(--accent-purple));
            background-size: 200% 200%;
            animation: envelopeGradient 8s ease infinite;
            box-shadow: 
                inset 0 0 60px rgba(0, 0, 0, 0.15),
                0 0 40px rgba(255, 105, 180, 0.3);
        }

        @keyframes envelopeGradient {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .envelope-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.9;
            transition: transform 1.5s ease;
            filter: brightness(1.1) contrast(1.1) saturate(1.2);
        }

        .envelope-flap {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, 
                rgba(255, 105, 180, 0.95), 
                rgba(255, 20, 147, 0.95), 
                rgba(218, 112, 214, 0.95));
            clip-path: polygon(0 0, 50% 50%, 100% 0);
            transform-origin: top;
            transition: transform 1.8s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 30px 30px 0 0;
            box-shadow: 
                0 -20px 50px rgba(0, 0, 0, 0.4),
                inset 0 8px 25px rgba(255, 255, 255, 0.5);
            z-index: 2;
        }

        .envelope.open .envelope-flap {
            transform: rotateX(-180deg);
        }

        .envelope-seal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, var(--accent-gold), #ffaa00, var(--accent-gold));
            background-size: 200% 200%;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 45px;
            z-index: 10;
            box-shadow: 
                0 20px 50px rgba(255, 215, 0, 0.6),
                inset 0 8px 20px rgba(255, 255, 255, 0.6);
            animation: sealGlow 3s infinite alternate, sealRotate 20s infinite linear;
            cursor: pointer;
            transition: var(--transition-smooth);
            overflow: hidden;
        }

        .envelope-seal::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, 
                transparent, 
                rgba(255, 255, 255, 0.8), 
                transparent);
            animation: sealShine 4s infinite linear;
        }

        @keyframes sealRotate {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .envelope-content {
            position: absolute;
            width: 94%;
            height: 90%;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 25px;
            top: 5%;
            left: 3%;
            padding: 50px;
            opacity: 0;
            transform: translateY(300px) scale(0.9);
            transition: all 1.8s cubic-bezier(0.4, 0, 0.2, 1) 0.8s;
            box-shadow: 
                0 30px 70px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            z-index: 1;
            backdrop-filter: blur(20px);
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.6);
        }

        .envelope.open .envelope-content {
            opacity: 1;
            transform: translateY(-320px) scale(1.05);
        }

        .envelope-content h2 {
            font-family: 'Dancing Script', cursive;
            color: var(--primary-pink);
            text-align: center;
            margin-bottom: 25px;
            font-size: 3rem;
            animation: textGlow 2s ease-in-out infinite alternate;
        }

        .envelope-content p {
            text-align: center;
            color: var(--text-dark);
            font-size: 1.3rem;
            line-height: 1.8;
            opacity: 0.9;
            margin-bottom: 20px;
            padding: 0 20px;
        }

        /* HEART LEAVES TREE - Enhanced */
        .tree-container {
            position: relative;
            width: 800px;
            height: 800px;
            margin: 50px 0;
        }

        .tree-structure {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1;
        }

        .tree-trunk {
            width: 100px;
            height: 350px;
            background: linear-gradient(45deg, #8b4513 0%, #a0522d 30%, #8b4513 70%, #a0522d 100%);
            background-size: 200% 100%;
            animation: trunkShimmer 8s infinite linear;
            border-radius: 30px;
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.6),
                inset 0 8px 20px rgba(255, 255, 255, 0.3);
            position: relative;
            z-index: 2;
            overflow: hidden;
        }

        @keyframes trunkShimmer {
            0% { background-position: 0% 0%; }
            100% { background-position: 200% 0%; }
        }

        .heart-leaves {
            position: absolute;
            width: 700px;
            height: 650px;
            bottom: 300px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1;
            filter: drop-shadow(0 15px 40px rgba(0, 0, 0, 0.3));
        }

        .heart-leaf {
            position: absolute;
            width: 50px;
            height: 50px;
            background: var(--heart-color);
            clip-path: polygon(50% 15%, 80% 0%, 100% 35%, 50% 100%, 0% 35%, 20% 0%);
            transform-origin: center bottom;
            animation: leafFloat 6s infinite ease-in-out;
            cursor: pointer;
            transition: var(--transition-smooth);
            filter: drop-shadow(0 10px 25px rgba(0, 0, 0, 0.3));
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
        }

        .heart-leaf::before {
            content: '';
            position: absolute;
            top: 6px;
            left: 6px;
            right: 6px;
            bottom: 6px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.4), transparent);
            clip-path: polygon(50% 15%, 80% 0%, 100% 35%, 50% 100%, 0% 35%, 20% 0%);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
        }

        .heart-leaf:hover {
            transform: scale(1.6) rotate(25deg);
            filter: 
                drop-shadow(0 0 40px currentColor)
                brightness(1.3);
            animation: heartPulse 1s infinite alternate;
            z-index: 100;
        }

        @keyframes heartPulse {
            0% { transform: scale(1.5) rotate(20deg); }
            100% { transform: scale(1.8) rotate(30deg); }
        }

        /* New Heart Colors */
        .heart-leaf-red { --heart-color: linear-gradient(135deg, #ff3366, #ff6699, #ff3366); }
        .heart-leaf-pink { --heart-color: linear-gradient(135deg, #ff69b4, #ff99cc, #ff69b4); }
        .heart-leaf-purple { --heart-color: linear-gradient(135deg, #da70d6, #e6a0e6, #da70d6); }
        .heart-leaf-blue { --heart-color: linear-gradient(135deg, #87ceeb, #b3e0ff, #87ceeb); }
        .heart-leaf-gold { --heart-color: linear-gradient(135deg, #ffd700, #ffed99, #ffd700); }
        .heart-leaf-orange { --heart-color: linear-gradient(135deg, #ff9900, #ffcc66, #ff9900); }
        .heart-leaf-green { --heart-color: linear-gradient(135deg, #2ecc71, #85e0a3, #2ecc71); }
        .heart-leaf-teal { --heart-color: linear-gradient(135deg, #1abc9c, #7fd9c7, #1abc9c); }
        .heart-leaf-rainbow { 
            --heart-color: linear-gradient(135deg, 
                #ff3366, #ff69b4, #da70d6, 
                #87ceeb, #2ecc71, #ffd700, 
                #ff9900);
            background-size: 400% 400%;
            animation: rainbowShift 4s ease infinite;
        }

        @keyframes rainbowShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Tree Title - Enhanced */
        .tree-title {
            position: absolute;
            top: -80px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Dancing Script', cursive;
            color: var(--primary-pink);
            font-size: 3.5rem;
            text-align: center;
            white-space: nowrap;
            animation: titleFloat 6s infinite ease-in-out;
            text-shadow: 
                0 5px 20px rgba(0, 0, 0, 0.4),
                0 0 40px rgba(255, 105, 180, 0.5);
            padding: 20px 50px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.95), 
                rgba(255, 240, 245, 0.95));
            border-radius: 60px;
            backdrop-filter: blur(15px);
            border: 3px solid rgba(255, 105, 180, 0.3);
            box-shadow: 
                0 25px 50px rgba(255, 105, 180, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
        }

        /* Cake Celebration - Enhanced */
        .cake-wrapper {
            position: relative;
            margin: 60px 0;
            cursor: pointer;
            animation: cakeFloat 10s ease-in-out infinite;
            perspective: 1000px;
        }

        @keyframes cakeFloat {
            0%, 100% { 
                transform: translateY(0) rotate(0deg) scale(1);
            }
            25% { 
                transform: translateY(-25px) rotate(3deg) scale(1.03);
            }
            50% { 
                transform: translateY(-10px) rotate(-2deg) scale(0.98);
            }
            75% { 
                transform: translateY(-30px) rotate(4deg) scale(1.04);
            }
        }

        .cake-container {
            width: 420px;
            height: 420px;
            position: relative;
            border-radius: 35px;
            overflow: hidden;
            box-shadow: 
                0 40px 80px rgba(255, 105, 180, 0.4),
                0 0 60px rgba(255, 105, 180, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            border: 5px solid rgba(255, 255, 255, 0.8);
            transition: var(--transition-smooth);
            transform-style: preserve-3d;
        }

        .cake-container:hover {
            transform: scale(1.1) rotateY(5deg);
            box-shadow: 
                0 60px 120px rgba(255, 105, 180, 0.5),
                0 0 100px rgba(255, 105, 180, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
        }

        .cake-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: all 1.2s cubic-bezier(0.4, 0, 0.2, 1);
            filter: brightness(1.15) saturate(1.3) contrast(1.1);
        }

        .cake-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, 
                transparent 30%, 
                rgba(0, 0, 0, 0.7) 100%);
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding: 50px;
            opacity: 0;
            transition: opacity 1s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .cake-container:hover .cake-overlay {
            opacity: 1;
        }

        .cake-text {
            color: white;
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            text-align: center;
            transform: translateY(40px);
            transition: transform 1s cubic-bezier(0.4, 0, 0.2, 1);
            text-shadow: 
                0 5px 20px rgba(0, 0, 0, 0.7),
                0 0 30px rgba(255, 105, 180, 0.7);
        }

        .cake-container:hover .cake-text {
            transform: translateY(0);
        }

        /* Custom Gallery - Enhanced */
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 40px;
            margin: 60px 0;
            max-width: 1200px;
            padding: 0 30px;
            width: 100%;
        }

        .gallery-item {
            position: relative;
            border-radius: 30px;
            overflow: hidden;
            box-shadow: 
                0 35px 70px rgba(0, 0, 0, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
            transition: var(--transition-smooth);
            cursor: pointer;
            aspect-ratio: 3/4;
            background: var(--soft-white);
            transform-style: preserve-3d;
        }

        .gallery-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, 
                rgba(255, 105, 180, 0.1), 
                rgba(218, 112, 214, 0.1));
            opacity: 0;
            transition: opacity 0.6s ease;
            z-index: 1;
        }

        .gallery-item:hover::before {
            opacity: 1;
        }

        .gallery-item:hover {
            transform: translateY(-30px) scale(1.08) rotateY(5deg);
            box-shadow: 
                0 60px 120px rgba(0, 0, 0, 0.35),
                0 0 80px rgba(255, 105, 180, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }

        .gallery-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .gallery-item:hover .gallery-img {
            transform: scale(1.2);
        }

        .gallery-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, 
                rgba(0, 0, 0, 0.9), 
                transparent);
            color: white;
            padding: 40px 30px 30px;
            transform: translateY(100%);
            transition: transform 1s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            text-shadow: 0 5px 20px rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(15px);
            z-index: 2;
        }

        .gallery-item:hover .gallery-overlay {
            transform: translateY(0);
        }

        /* Final Message Page - Enhanced & Permanent */
        .final-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9000;
            display: none;
            opacity: 0;
            transition: opacity 1.5s ease;
        }

        .final-page.active {
            display: flex;
            opacity: 1;
        }

        .final-container {
            width: 100%;
            max-width: 1200px;
            margin: auto;
            padding: 40px;
            position: relative;
            z-index: 2;
        }

        .final-message-box {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.98), 
                rgba(255, 240, 245, 0.98));
            padding: 80px;
            border-radius: 50px;
            box-shadow: 
                0 50px 100px rgba(255, 105, 180, 0.3),
                0 0 100px rgba(255, 105, 180, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(30px);
            border: 4px solid rgba(255, 255, 255, 0.8);
            position: relative;
            overflow: hidden;
            transform-style: preserve-3d;
        }

        .final-message-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 10px;
            background: linear-gradient(90deg, 
                var(--primary-pink), 
                var(--accent-purple), 
                var(--accent-blue), 
                var(--accent-green), 
                var(--accent-gold),
                var(--primary-pink));
            background-size: 300% 100%;
            animation: finalGradient 6s linear infinite;
        }

        @keyframes finalGradient {
            0% { background-position: 0% 50%; }
            100% { background-position: 300% 50%; }
        }

        .final-typing-text {
            font-family: 'Georgia', serif;
            font-size: 1.6rem;
            line-height: 2;
            color: var(--text-dark);
            white-space: pre-wrap;
            overflow-wrap: break-word;
            opacity: 0.95;
            min-height: 400px;
            padding: 20px;
            text-align: center;
        }

        body.night-mode .final-typing-text {
            color: var(--text-light);
        }

        .final-cursor {
            display: inline-block;
            width: 5px;
            height: 1.6em;
            background: linear-gradient(180deg, 
                var(--primary-pink), 
                var(--secondary-pink),
                var(--accent-purple));
            margin-left: 3px;
            animation: blink 0.7s infinite;
            vertical-align: middle;
            border-radius: 3px;
        }

        /* Back to Start Button */
        .back-to-start {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10000;
        }

        .back-btn {
            padding: 20px 50px;
            background: linear-gradient(135deg, 
                var(--primary-pink), 
                var(--secondary-pink),
                var(--accent-purple));
            border: none;
            border-radius: 50px;
            color: white;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 1.2rem;
            cursor: pointer;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 
                0 15px 35px rgba(255, 105, 180, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.5);
            position: relative;
            overflow: hidden;
            letter-spacing: 2px;
        }

        .back-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.4), 
                transparent);
            transition: left 0.8s ease;
        }

        .back-btn:hover::before {
            left: 100%;
        }

        .back-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 
                0 25px 50px rgba(255, 105, 180, 0.5),
                0 0 60px rgba(255, 105, 180, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }

        /* Floating Hearts */
        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .floating-heart {
            position: absolute;
            font-size: 24px;
            opacity: 0;
            animation: floatHeart 15s linear infinite;
            text-shadow: 0 0 20px currentColor;
        }

        @keyframes floatHeart {
            0% {
                transform: translateY(100vh) translateX(0) rotate(0deg) scale(0.5);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(-100px) translateX(100px) rotate(360deg) scale(0.5);
                opacity: 0;
            }
        }

        /* Magic Sparkles */
        .magic-sparkles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .sparkle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            z-index: 999;
            animation: sparklePop 1.5s ease-out forwards;
            box-shadow: 
                0 0 20px white, 
                0 0 40px var(--primary-pink);
        }

        @keyframes sparklePop {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.5) rotate(180deg);
                opacity: 1;
            }
            100% {
                transform: scale(0) rotate(360deg);
                opacity: 0;
            }
        }

        /* Controls - Enhanced */
        .controls {
            position: fixed;
            top: 40px;
            right: 40px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            z-index: 1000;
        }

        .control-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.3), 
                rgba(255, 240, 245, 0.3));
            border: 2px solid rgba(255, 255, 255, 0.4);
            color: var(--primary-pink);
            font-size: 1.6rem;
            cursor: pointer;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(20px);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.5);
            position: relative;
            overflow: hidden;
        }

        .control-btn::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, 
                transparent, 
                rgba(255, 255, 255, 0.4), 
                transparent);
            animation: controlShine 6s infinite linear;
        }

        .control-btn:hover {
            background: white;
            transform: scale(1.25) rotate(15deg);
            box-shadow: 
                0 30px 60px rgba(255, 105, 180, 0.5),
                0 0 50px rgba(255, 105, 180, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.7);
            color: var(--secondary-pink);
        }

        /* Day/Night Toggle - Enhanced */
        .day-night-toggle {
            position: fixed;
            top: 40px;
            left: 40px;
            z-index: 1000;
        }

        .toggle-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.3), 
                rgba(255, 240, 245, 0.3));
            border: 2px solid rgba(255, 255, 255, 0.4);
            color: var(--primary-pink);
            font-size: 1.6rem;
            cursor: pointer;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(20px);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.5);
            position: relative;
            overflow: hidden;
        }

        .toggle-btn::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, 
                transparent, 
                rgba(255, 255, 255, 0.4), 
                transparent);
            animation: toggleShine 8s infinite linear;
        }

        .toggle-btn:hover {
            background: white;
            transform: scale(1.25) rotate(15deg);
            box-shadow: 
                0 30px 60px rgba(255, 105, 180, 0.5),
                0 0 50px rgba(255, 105, 180, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.7);
            color: var(--secondary-pink);
        }

        /* Navigation Dots - Enhanced */
        .nav-dots {
            position: fixed;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 30px;
            z-index: 1000;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.2), 
                rgba(255, 240, 245, 0.2));
            padding: 25px 50px;
            border-radius: 70px;
            backdrop-filter: blur(25px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 
                0 20px 50px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        .dot {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: rgba(255, 105, 180, 0.4);
            cursor: pointer;
            transition: var(--transition-smooth);
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .dot::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 50%;
            background: linear-gradient(45deg, 
                var(--primary-pink), 
                var(--secondary-pink));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .dot:hover {
            transform: scale(2);
            background: var(--primary-pink);
        }

        .dot.active {
            background: var(--primary-pink);
            transform: scale(2);
            box-shadow: 
                0 0 30px var(--primary-pink),
                0 0 60px rgba(255, 105, 180, 0.6);
            border-color: white;
        }

        .dot.active::before {
            opacity: 1;
            animation: dotGlow 2s infinite alternate;
        }

        @keyframes dotGlow {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1.3); opacity: 0.7; }
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .tree-container {
                width: 650px;
                height: 650px;
            }
            
            .heart-leaves {
                width: 550px;
                height: 500px;
                bottom: 250px;
            }
            
            .heart-leaf {
                width: 40px;
                height: 40px;
            }
            
            .cake-container {
                width: 350px;
                height: 350px;
            }
            
            .gallery {
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 30px;
            }
        }

        @media (max-width: 768px) {
            .birthday-text {
                font-size: 3.5rem;
            }
            
            .loading-bar {
                width: 300px;
                height: 6px;
            }
            
            .stage-title {
                font-size: 2.8rem;
                margin-bottom: 40px;
            }
            
            .envelope-wrapper {
                width: 350px;
                height: 250px;
            }
            
            .countdown-container {
                padding: 30px;
                width: 95%;
            }
            
            .countdown-number {
                font-size: 3.5rem;
                min-width: 100px;
                padding: 15px;
            }
            
            .countdown-unit {
                min-width: 100px;
            }
            
            .tree-container {
                width: 450px;
                height: 500px;
            }
            
            .heart-leaves {
                width: 400px;
                height: 350px;
                bottom: 200px;
            }
            
            .heart-leaf {
                width: 30px;
                height: 30px;
            }
            
            .tree-title {
                font-size: 2.2rem;
                top: -50px;
                padding: 15px 30px;
            }
            
            .final-message-box {
                padding: 40px 30px;
                margin: 30px 20px;
            }
            
            .controls, .day-night-toggle {
                top: 25px;
                right: 25px;
            }
            
            .day-night-toggle {
                left: 25px;
            }
            
            .nav-dots {
                bottom: 40px;
                padding: 20px 35px;
                gap: 25px;
            }
            
            .control-btn, .toggle-btn {
                width: 60px;
                height: 60px;
                font-size: 1.4rem;
            }
        }

        @media (max-width: 480px) {
            .stage-title {
                font-size: 2.2rem;
                margin-bottom: 30px;
            }
            
            .birthday-text {
                font-size: 2.8rem;
            }
            
            .envelope-wrapper {
                width: 300px;
                height: 210px;
            }
            
            .countdown-number {
                font-size: 2.8rem;
                min-width: 80px;
                padding: 12px;
            }
            
            .countdown-unit {
                min-width: 80px;
            }
            
            .tree-container {
                width: 320px;
                height: 400px;
            }
            
            .heart-leaves {
                width: 280px;
                height: 250px;
                bottom: 160px;
            }
            
            .heart-leaf {
                width: 25px;
                height: 25px;
            }
            
            .cake-container {
                width: 280px;
                height: 280px;
            }
            
            .gallery {
                grid-template-columns: 1fr;
                max-width: 320px;
                gap: 20px;
            }
            
            .final-message-box {
                padding: 30px 20px;
            }
            
            .final-typing-text {
                font-size: 1.3rem;
            }
            
            .back-btn {
                padding: 15px 35px;
                font-size: 1.1rem;
            }
            
            .nav-dots {
                padding: 15px 25px;
                gap: 20px;
            }
            
            .dot {
                width: 14px;
                height: 14px;
            }
        }
    </style>
</head>
<body>
    <!-- Background Music -->
    <audio id="background-music" loop>
        <source src="song.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <!-- Background Effects -->
    <div class="flowing-gradient"></div>
    <div class="magic-background" id="magic-background"></div>
    <div class="floating-hearts" id="floating-hearts"></div>
    <div class="magic-sparkles" id="magic-sparkles"></div>

    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="birthday-text">Happy Birthday Lakshita! üíñ</div>
        <div class="loading-bar">
            <div class="loading-progress"></div>
        </div>
        <p style="color: white; margin-top: 40px; font-family: 'Dancing Script', cursive; font-size: 1.6rem; text-shadow: 0 2px 15px rgba(0,0,0,0.3);">
            Creating magical moments just for you... ‚ú®
        </p>
    </div>

    <!-- Main Content Container -->
    <div class="container">
        <!-- Stage 1: Birthday Countdown -->
        <div id="stage-1" class="stage active">
            <h2 class="stage-title">Birthday Countdown üéâ</h2>
            
            <div class="countdown-container">
                <div class="countdown-title">Counting down to December 18th!</div>
                <div class="countdown-timer">
                    <div class="countdown-unit">
                        <div class="countdown-number" id="days">00</div>
                        <div class="countdown-label">Days</div>
                    </div>
                    <div class="countdown-unit">
                        <div class="countdown-number" id="hours">00</div>
                        <div class="countdown-label">Hours</div>
                    </div>
                    <div class="countdown-unit">
                        <div class="countdown-number" id="minutes">00</div>
                        <div class="countdown-label">Minutes</div>
                    </div>
                    <div class="countdown-unit">
                        <div class="countdown-number" id="seconds">00</div>
                        <div class="countdown-label">Seconds</div>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 30px;">
                    <div class="birthday-status" id="birthday-status"></div>
                </div>
            </div>
            
            <p class="instruction">Get ready to celebrate Lakshita's special day! The magic begins here... ‚ú®</p>
        </div>

        <!-- Stage 2: Envelope -->
        <div id="stage-2" class="stage">
            <h2 class="stage-title">Your Birthday Invitation üíå</h2>
            <div class="envelope-wrapper">
                <div class="envelope">
                    <div class="envelope-body">
                        <img src="envelope.png" alt="Beautiful Birthday Envelope" class="envelope-img">
                    </div>
                    <div class="envelope-flap"></div>
                    <div class="envelope-seal">üíù</div>
                    <div class="envelope-content">
                        <h2>Dearest Lakshita,</h2>
                        <p>On this beautiful day, I've prepared something very special just for you. Every moment has been crafted with love and care for the amazing person you are!</p>
                        <p style="margin-top: 25px; font-style: italic; color: var(--primary-pink); font-family: 'Dancing Script', cursive; font-size: 1.8rem;">
                            Click the golden seal to open your birthday surprise! üíñ
                        </p>
                    </div>
                </div>
            </div>
            <p class="instruction">Click the magical golden seal to reveal your birthday invitation</p>
        </div>

        <!-- Stage 3: HEART LEAVES TREE -->
        <div id="stage-3" class="stage">
            <h2 class="stage-title">Your Sakura HeartTree üå∏</h2>
            <div class="tree-container">
                <div class="tree-title">"Your Sakura HeartTree is blooming..."</div>
                
                <div class="tree-structure">
                    <div class="tree-trunk"></div>
                </div>
                
                <!-- Heart Leaves Container -->
                <div class="heart-leaves" id="heart-leaves"></div>
            </div>
            <p class="instruction">Click on the magical heart leaves to discover special birthday messages! Each leaf holds a wish for you üíï</p>
        </div>

        <!-- Stage 4: Cake Celebration -->
        <div id="stage-4" class="stage">
            <h2 class="stage-title">Make a Wish! üéÇ</h2>
            <div class="cake-wrapper">
                <div class="cake-container" id="cake-container">
                    <img src="cake.jpg" alt="Beautiful Birthday Cake" class="cake-img" id="cake-img">
                    <div class="cake-overlay">
                        <div class="cake-text">Click to Cut the Cake! ‚ú®</div>
                    </div>
                    <div class="candle" id="candle"></div>
                    <div class="flame" id="flame"></div>
                    <div class="cake-cut" id="cake-cut"></div>
                </div>
            </div>
            <p class="instruction">Click on the cake to cut it and make your birthday wish come true!</p>
        </div>

        <!-- Stage 5: Memory Gallery -->
        <div id="stage-5" class="stage">
            <h2 class="stage-title">Beautiful Memories üì∏</h2>
            <div class="gallery">
                <div class="gallery-item">
                    <img src="pic_one.jpg" alt="Beautiful Memory 1" class="gallery-img">
                    <div class="gallery-overlay">Lakshita's Precious Moments üíï</div>
                </div>
                <div class="gallery-item">
                    <img src="pic_two.jpg" alt="Beautiful Memory 2" class="gallery-img">
                    <div class="gallery-overlay">Special Times ‚ú®</div>
                </div>
                <div class="gallery-item">
                    <img src="pic_three.png" alt="Beautiful Memory 3" class="gallery-img">
                    <div class="gallery-overlay">Cherished Memories üå∏</div>
                </div>
            </div>
            <p class="instruction">Hover over the photos to see them come to life! Each memory is a treasure ‚ú®</p>
        </div>
    </div>

    <!-- Final Message Page (Permanent) -->
    <div id="final-page" class="final-page">
        <div class="final-container">
            <div class="final-message-box">
                <div class="final-typing-text" id="final-typing-text"></div>
                <div class="final-cursor"></div>
            </div>
        </div>
    </div>

    <!-- Back to Start Button (Only on Final Page) -->
    <div class="back-to-start" id="back-to-start" style="display: none;">
        <button class="back-btn" id="back-btn">
            <i class="fas fa-star"></i> Back to Start
        </button>
    </div>

    <!-- Day/Night Toggle -->
    <div class="day-night-toggle">
        <button class="toggle-btn">
            <i class="fas fa-moon"></i>
        </button>
    </div>

    <!-- Controls -->
    <div class="controls">
        <button class="control-btn active" id="music-toggle">
            <i class="fas fa-volume-up"></i>
        </button>
        <button class="control-btn" id="magic-btn">
            <i class="fas fa-magic"></i>
        </button>
        <button class="control-btn" id="heart-btn">
            <i class="fas fa-heart"></i>
        </button>
    </div>

    <!-- Navigation Dots -->
    <div class="nav-dots">
        <div class="dot active" data-stage="1"></div>
        <div class="dot" data-stage="2"></div>
        <div class="dot" data-stage="3"></div>
        <div class="dot" data-stage="4"></div>
        <div class="dot" data-stage="5"></div>
        <div class="dot" data-stage="final">‚≠ê</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Create magical background particles
            function createMagicParticles() {
                const container = document.getElementById('magic-background');
                if (!container) return;
                
                for (let i = 0; i < 50; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'magic-particle';
                    particle.style.left = `${Math.random() * 100}%`;
                    particle.style.top = `${Math.random() * 100}%`;
                    particle.style.animationDelay = `${Math.random() * 15}s`;
                    particle.style.animationDuration = `${15 + Math.random() * 10}s`;
                    
                    const colors = [
                        'rgba(255, 105, 180, 0.4)',
                        'rgba(255, 20, 147, 0.4)',
                        'rgba(218, 112, 214, 0.4)',
                        'rgba(135, 206, 235, 0.4)',
                        'rgba(255, 215, 0, 0.4)'
                    ];
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    particle.style.background = `radial-gradient(circle, ${color} 30%, transparent 70%)`;
                    particle.style.boxShadow = `0 0 25px ${color}`;
                    
                    container.appendChild(particle);
                }
            }
            
            // Create floating hearts
            function createFloatingHearts() {
                const container = document.getElementById('floating-hearts');
                if (!container) return;
                
                const hearts = ['üíñ', 'üíï', 'üíó', 'üíì', 'üíû', 'üíù', 'üíò', '‚ù§Ô∏è', '‚ú®', 'üå∏', 'üéÄ', 'üåü'];
                
                for (let i = 0; i < 25; i++) {
                    const heart = document.createElement('div');
                    heart.className = 'floating-heart';
                    heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                    heart.style.left = `${Math.random() * 100}%`;
                    heart.style.animationDelay = `${Math.random() * 15}s`;
                    heart.style.animationDuration = `${12 + Math.random() * 8}s`;
                    
                    const colors = [
                        '#ff3366', '#ff69b4', '#da70d6', 
                        '#87ceeb', '#ffd700', '#ff9900',
                        '#2ecc71', '#1abc9c'
                    ];
                    heart.style.color = colors[Math.floor(Math.random() * colors.length)];
                    heart.style.fontSize = `${15 + Math.random() * 15}px`;
                    
                    container.appendChild(heart);
                }
            }
            
            // Create magic sparkles
            function createMagicSparkles(x, y) {
                const container = document.getElementById('magic-sparkles');
                if (!container) return;
                
                for (let i = 0; i < 12; i++) {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'sparkle';
                    sparkle.style.left = `${x + (Math.random() - 0.5) * 100}px`;
                    sparkle.style.top = `${y + (Math.random() - 0.5) * 100}px`;
                    sparkle.style.animationDelay = `${i * 0.05}s`;
                    
                    container.appendChild(sparkle);
                    
                    setTimeout(() => {
                        sparkle.remove();
                    }, 1500);
                }
            }
            
            // Add sparkle effect on clicks
            document.addEventListener('click', function(e) {
                createMagicSparkles(e.clientX, e.clientY);
            });
            
            // Background Music
            const backgroundMusic = document.getElementById('background-music');
            let isMusicPlaying = false;
            
            // Set initial volume
            backgroundMusic.volume = 0.4;
            
            // Start music on user interaction
            function startMusic() {
                if (!isMusicPlaying) {
                    backgroundMusic.play().then(() => {
                        isMusicPlaying = true;
                        document.getElementById('music-toggle').classList.add('active');
                    }).catch(e => {
                        console.log("Music play blocked, will try again on interaction");
                    });
                }
            }
            
            // Start music on first click
            document.addEventListener('click', function firstClick() {
                startMusic();
                document.removeEventListener('click', firstClick);
            }, { once: true });
            
            // Also try to start after loading
            setTimeout(startMusic, 2000);
            
            // Music toggle button
            const musicBtn = document.getElementById('music-toggle');
            musicBtn.addEventListener('click', function(e) {
                if (isMusicPlaying) {
                    backgroundMusic.pause();
                    isMusicPlaying = false;
                    this.innerHTML = '<i class="fas fa-volume-mute"></i>';
                    this.classList.remove('active');
                } else {
                    backgroundMusic.play();
                    isMusicPlaying = true;
                    this.innerHTML = '<i class="fas fa-volume-up"></i>';
                    this.classList.add('active');
                }
                createMagicSparkles(e.clientX, e.clientY);
            });
            
            // Magic button
            document.getElementById('magic-btn').addEventListener('click', function(e) {
                createMagicSparkles(e.clientX, e.clientY);
                createMagicParticles();
                
                // Add floating hearts temporarily
                for (let i = 0; i < 10; i++) {
                    setTimeout(() => {
                        createMagicSparkles(
                            Math.random() * window.innerWidth,
                            Math.random() * window.innerHeight
                        );
                    }, i * 100);
                }
            });
            
            // Heart button
            document.getElementById('heart-btn').addEventListener('click', function(e) {
                createMagicSparkles(e.clientX, e.clientY);
                
                // Create heart shower
                for (let i = 0; i < 20; i++) {
                    setTimeout(() => {
                        const heart = document.createElement('div');
                        heart.textContent = 'üíñ';
                        heart.style.position = 'fixed';
                        heart.style.left = `${e.clientX + (Math.random() - 0.5) * 200}px`;
                        heart.style.top = `${e.clientY}px`;
                        heart.style.fontSize = '30px';
                        heart.style.opacity = '1';
                        heart.style.zIndex = '1000';
                        heart.style.pointerEvents = 'none';
                        heart.style.color = '#ff3366';
                        heart.style.textShadow = '0 0 20px #ff3366';
                        heart.style.animation = `floatUp 2s ease-out forwards`;
                        
                        document.body.appendChild(heart);
                        
                        setTimeout(() => {
                            heart.remove();
                        }, 2000);
                    }, i * 100);
                }
            });
            
            // BIRTHDAY COUNTDOWN
            function updateCountdown() {
                const now = new Date();
                const currentYear = now.getFullYear();
                
                // Set birthday to December 18th of current year
                let birthday = new Date(currentYear, 11, 18);
                
                // If birthday has already passed this year, set to next year
                if (now > birthday) {
                    birthday = new Date(currentYear + 1, 11, 18);
                }
                
                const diff = birthday - now;
                
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                document.getElementById('days').textContent = days.toString().padStart(2, '0');
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
                
                // Update birthday status
                const statusElement = document.getElementById('birthday-status');
                if (days === 0 && hours === 0 && minutes === 0 && seconds === 0) {
                    statusElement.textContent = "üéâ HAPPY BIRTHDAY LAKSHITA! üéâ";
                    statusElement.style.animation = 'heartbeat 1s infinite';
                    showFinalPage();
                } else if (days === 1) {
                    statusElement.textContent = "üéÅ Birthday is tomorrow! Get ready!";
                } else if (days < 7) {
                    statusElement.textContent = `‚ú® Only ${days} days to go! Exciting!`;
                } else if (days < 30) {
                    statusElement.textContent = `üéÇ ${days} days until the big day!`;
                } else {
                    statusElement.textContent = `‚è≥ Counting down to December 18th!`;
                }
            }
            
            // Update countdown every second
            setInterval(updateCountdown, 1000);
            updateCountdown();
            
            // Hide loading screen
            setTimeout(() => {
                const loadingScreen = document.getElementById('loading-screen');
                loadingScreen.style.opacity = '0';
                loadingScreen.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                    createMagicParticles();
                    createFloatingHearts();
                }, 1000);
            }, 3500);
            
            // Stage Navigation
            const stages = document.querySelectorAll('.stage');
            const dots = document.querySelectorAll('.dot');
            let currentStage = 1;
            
            function navigateToStage(stageNumber) {
                if (stageNumber === currentStage) return;
                
                if (stageNumber === 'final') {
                    showFinalPage();
                    return;
                }
                
                // Hide back button
                document.getElementById('back-to-start').style.display = 'none';
                
                // Hide final page if active
                document.getElementById('final-page').classList.remove('active');
                
                // Smooth transition out
                stages.forEach(stage => {
                    if (stage.classList.contains('active')) {
                        stage.style.opacity = '0';
                        stage.style.transform = 'translateY(30px) scale(0.95)';
                        setTimeout(() => {
                            stage.classList.remove('active');
                        }, 400);
                    }
                });
                
                // Smooth transition in
                setTimeout(() => {
                    const targetStage = document.getElementById(`stage-${stageNumber}`);
                    if (targetStage) {
                        targetStage.classList.add('active');
                        setTimeout(() => {
                            targetStage.style.opacity = '1';
                            targetStage.style.transform = 'translateY(0) scale(1)';
                        }, 50);
                        
                        // Update navigation dots
                        dots.forEach((dot, index) => {
                            if (index === stageNumber - 1) {
                                dot.classList.add('active');
                            } else {
                                dot.classList.remove('active');
                            }
                        });
                        
                        // Special dot for final page
                        dots[5].classList.remove('active');
                        
                        currentStage = stageNumber;
                        
                        // Special initialization for each stage
                        switch(stageNumber) {
                            case 3:
                                createHeartLeavesTree();
                                break;
                            case 4:
                                initCakeStage();
                                break;
                        }
                        
                        // Create magic sparkles at center
                        createMagicSparkles(window.innerWidth / 2, window.innerHeight / 2);
                    }
                }, 450);
            }
            
            // Show final page (permanent)
            function showFinalPage() {
                // Hide all stages
                stages.forEach(stage => {
                    stage.classList.remove('active');
                    stage.style.opacity = '0';
                });
                
                // Update dots
                dots.forEach(dot => dot.classList.remove('active'));
                dots[5].classList.add('active');
                
                // Show final page
                const finalPage = document.getElementById('final-page');
                finalPage.classList.add('active');
                setTimeout(() => {
                    finalPage.style.opacity = '1';
                }, 50);
                
                // Show back button
                document.getElementById('back-to-start').style.display = 'block';
                
                // Start typing effect
                startFinalTyping();
                
                // Create celebration effects
                createCelebrationEffects();
            }
            
            // Navigation dots click
            dots.forEach((dot, index) => {
                dot.addEventListener('click', (e) => {
                    createMagicSparkles(e.clientX, e.clientY);
                    if (index === 5) {
                        showFinalPage();
                    } else {
                        navigateToStage(index + 1);
                    }
                });
            });
            
            // Back to start button
            document.getElementById('back-btn').addEventListener('click', function(e) {
                createMagicSparkles(e.clientX, e.clientY);
                navigateToStage(1);
            });
            
            // Stage 2: Envelope click
            const envelopeSeal = document.querySelector('.envelope-seal');
            if (envelopeSeal) {
                envelopeSeal.addEventListener('click', function(e) {
                    createMagicSparkles(e.clientX, e.clientY);
                    const envelope = document.querySelector('.envelope');
                    if (!envelope.classList.contains('open')) {
                        envelope.classList.add('open');
                        
                        // Move to next stage after delay
                        setTimeout(() => {
                            navigateToStage(3);
                        }, 3000);
                    }
                });
            }
            
            // Stage 4: Cake Stage
            let cakeCut = false;
            
            function initCakeStage() {
                const cakeContainer = document.getElementById('cake-container');
                const flame = document.getElementById('flame');
                const cakeCutElement = document.getElementById('cake-cut');
                
                // Reset cake state
                cakeCut = false;
                cakeContainer.style.transform = 'scale(1)';
                flame.style.animation = 'flicker 0.4s infinite alternate';
                flame.style.opacity = '1';
                cakeCutElement.classList.remove('active');
                
                // Cake click event
                cakeContainer.addEventListener('click', function(e) {
                    if (!cakeCut) {
                        createMagicSparkles(e.clientX, e.clientY);
                        cutCake();
                        cakeCut = true;
                    }
                });
            }
            
            function cutCake() {
                const cakeContainer = document.getElementById('cake-container');
                const cakeImg = document.getElementById('cake-img');
                const flame = document.getElementById('flame');
                const cakeCutElement = document.getElementById('cake-cut');
                
                // Blow out candle
                flame.style.animation = 'none';
                flame.style.opacity = '0';
                flame.style.transform = 'translateX(-50%) scale(0.3)';
                
                // Cake cutting animation
                cakeCutElement.classList.add('active');
                
                // Cake image animation
                cakeImg.style.transform = 'scale(1.2) rotate(10deg)';
                cakeContainer.style.transform = 'scale(1.12)';
                
                // Move to next stage after delay
                setTimeout(() => {
                    navigateToStage(5);
                }, 2500);
            }
            
            // Stage 3: Create Heart Leaves Tree
            function createHeartLeavesTree() {
                const heartLeavesContainer = document.getElementById('heart-leaves');
                if (!heartLeavesContainer) return;
                
                heartLeavesContainer.innerHTML = '';
                
                const leafClasses = [
                    'heart-leaf-red', 'heart-leaf-pink', 'heart-leaf-purple', 
                    'heart-leaf-blue', 'heart-leaf-gold', 'heart-leaf-orange',
                    'heart-leaf-green', 'heart-leaf-teal', 'heart-leaf-rainbow'
                ];
                
                const messages = [
                    "You shine brighter than the stars! ‚≠ê",
                    "Your smile lights up the world! üòä",
                    "May all your dreams come true! ‚ú®",
                    "Stay as amazing as you are! üåü",
                    "Wishing you endless happiness! üíñ",
                    "You're one in a million! üå∏",
                    "Keep spreading your magic! üéÄ",
                    "Stay blessed always! üôè",
                    "Your kindness inspires everyone! üíï",
                    "May joy follow you everywhere! üéâ",
                    "Stay true to your beautiful self! üí´",
                    "You make the world better! üåà",
                    "Stay strong and beautiful! üí™",
                    "Your heart is pure gold! ü•á",
                    "May love surround you always! üíò",
                    "Stay curious and wonderful! üîÆ",
                    "You're a beautiful soul! üåπ",
                    "Keep shining bright! üí°",
                    "Stay magical every day! üßö",
                    "You're loved more than you know! üíû"
                ];
                
                // Create heart leaves in a beautiful tree pattern
                const totalLeaves = 180;
                const centerX = 350;
                const centerY = 300;
                
                for (let i = 0; i < totalLeaves; i++) {
                    setTimeout(() => {
                        const leaf = document.createElement('div');
                        leaf.className = 'heart-leaf';
                        
                        // Random color class
                        const colorClass = leafClasses[Math.floor(Math.random() * leafClasses.length)];
                        leaf.classList.add(colorClass);
                        
                        // Create a tree-shaped distribution
                        const angle = Math.random() * Math.PI * 2;
                        const distance = 50 + Math.random() * 250;
                        const x = Math.cos(angle) * distance;
                        const y = Math.sin(angle) * distance * 0.6;
                        
                        // Adjust for tree shape
                        const adjustedY = y - Math.abs(x) * 0.4;
                        
                        leaf.style.left = `${centerX + x}px`;
                        leaf.style.top = `${centerY + adjustedY}px`;
                        
                        // Random rotation
                        const rotation = Math.random() * 360;
                        leaf.style.transform = `rotate(${rotation}deg)`;
                        
                        // Random animation delay
                        leaf.style.animationDelay = `${Math.random() * 6}s`;
                        leaf.style.animationDuration = `${4 + Math.random() * 4}s`;
                        
                        // Random size
                        const size = 0.6 + Math.random() * 1.0;
                        leaf.style.width = `${50 * size}px`;
                        leaf.style.height = `${50 * size}px`;
                        
                        // Click event
                        leaf.addEventListener('click', function(e) {
                            createMagicSparkles(e.clientX, e.clientY);
                            const msgIndex = Math.floor(Math.random() * messages.length);
                            
                            // Show message in a beautiful way
                            const messageDiv = document.createElement('div');
                            messageDiv.textContent = messages[msgIndex];
                            messageDiv.style.position = 'fixed';
                            messageDiv.style.top = `${e.clientY - 100}px`;
                            messageDiv.style.left = `${e.clientX}px`;
                            messageDiv.style.transform = 'translateX(-50%)';
                            messageDiv.style.background = 'linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,240,245,0.95))';
                            messageDiv.style.padding = '15px 25px';
                            messageDiv.style.borderRadius = '25px';
                            messageDiv.style.boxShadow = '0 15px 40px rgba(255,105,180,0.4)';
                            messageDiv.style.color = 'var(--primary-pink)';
                            messageDiv.style.fontFamily = "'Dancing Script', cursive";
                            messageDiv.style.fontSize = '1.8rem';
                            messageDiv.style.zIndex = '10000';
                            messageDiv.style.opacity = '0';
                            messageDiv.style.transition = 'all 0.5s ease';
                            
                            document.body.appendChild(messageDiv);
                            
                            // Animate in
                            setTimeout(() => {
                                messageDiv.style.opacity = '1';
                                messageDiv.style.transform = 'translateX(-50%) translateY(-20px)';
                            }, 10);
                            
                            // Remove after delay
                            setTimeout(() => {
                                messageDiv.style.opacity = '0';
                                messageDiv.style.transform = 'translateX(-50%) translateY(-40px)';
                                setTimeout(() => {
                                    messageDiv.remove();
                                }, 500);
                            }, 3000);
                            
                            // Leaf animation
                            this.style.transform = `scale(1.8) rotate(${rotation + 45}deg)`;
                            this.style.filter = 'drop-shadow(0 0 50px currentColor) brightness(1.4)';
                            this.style.zIndex = '1000';
                            
                            setTimeout(() => {
                                this.style.transform = `rotate(${rotation}deg) scale(${size})`;
                                this.style.filter = 'drop-shadow(0 10px 25px rgba(0, 0, 0, 0.3))';
                                this.style.zIndex = '1';
                            }, 1500);
                        });
                        
                        heartLeavesContainer.appendChild(leaf);
                    }, i * 20);
                }
            }
            
            // Stage 5: Gallery interactions
            const galleryItems = document.querySelectorAll('.gallery-item');
            galleryItems.forEach((item, index) => {
                item.addEventListener('click', function(e) {
                    createMagicSparkles(e.clientX, e.clientY);
                    
                    const messages = [
                        "A precious memory of you! üíï",
                        "This moment will be cherished forever! üì∏",
                        "Your beauty shines in every photo! ‚ú®",
                        "A snapshot of pure happiness! üåü"
                    ];
                    
                    // Show message
                    const messageDiv = document.createElement('div');
                    messageDiv.textContent = messages[index % messages.length];
                    messageDiv.style.position = 'fixed';
                    messageDiv.style.top = '50%';
                    messageDiv.style.left = '50%';
                    messageDiv.style.transform = 'translate(-50%, -50%)';
                    messageDiv.style.background = 'linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,240,245,0.95))';
                    messageDiv.style.padding = '20px 40px';
                    messageDiv.style.borderRadius = '30px';
                    messageDiv.style.boxShadow = '0 25px 60px rgba(255,105,180,0.5)';
                    messageDiv.style.color = 'var(--primary-pink)';
                    messageDiv.style.fontFamily = "'Dancing Script', cursive";
                    messageDiv.style.fontSize = '2.5rem';
                    messageDiv.style.zIndex = '10000';
                    messageDiv.style.opacity = '0';
                    messageDiv.style.transition = 'all 0.5s ease';
                    
                    document.body.appendChild(messageDiv);
                    
                    // Animate in
                    setTimeout(() => {
                        messageDiv.style.opacity = '1';
                    }, 10);
                    
                    // Remove after delay
                    setTimeout(() => {
                        messageDiv.style.opacity = '0';
                        setTimeout(() => {
                            messageDiv.remove();
                        }, 500);
                    }, 2000);
                });
            });
            
            // Final page typing effect
            function startFinalTyping() {
                const typingText = document.getElementById('final-typing-text');
                if (!typingText) return;
                
                const message = `To My Dearest Lakshita,

Happy Birthday to the most wonderful, beautiful, and amazing person I know! üéâüéÇ

As the clock strikes midnight on December 18th, I want you to know that you are 
truly special in every way. Your smile has the power to brighten the darkest days, 
your laughter is the most beautiful melody, and your heart is pure gold.

On this magical day, I wish for you:

üíñ Infinite happiness that grows with each passing day
‚ú® Dreams that take flight and touch the stars
üå∏ Health that blooms like the most beautiful flowers
üåü Success in every endeavor you pursue
üéÄ Love that surrounds you always
üåà Adventures that create memories to last a lifetime
üéâ Joy that fills your heart to the brim
üí´ Strength to overcome any challenge
üîÆ Wisdom to guide your beautiful journey
üßö Magic in every moment of your life

May this year be your best one yet, filled with love, laughter, and all the 
wonderful things you deserve. You are loved more than words can express, 
and cherished more than you could ever know.

Remember, you are:
‚Ä¢ A beautiful soul that lights up every room
‚Ä¢ A kind heart that touches every life
‚Ä¢ A brilliant mind that inspires everyone
‚Ä¢ A wonderful friend who is truly irreplaceable
‚Ä¢ And most importantly, YOU - perfect just as you are

May your birthday be as magical as you are, and may all your wishes come true!

With all my love, admiration, and warmest birthday wishes,
Forever Yours üíù

P.S. Always remember how special you are! ‚ú®`;

                typingText.textContent = '';
                let i = 0;
                
                function typeWriter() {
                    if (i < message.length) {
                        typingText.textContent += message.charAt(i);
                        i++;
                        setTimeout(typeWriter, 30);
                    }
                }
                
                // Start typing after a brief pause
                setTimeout(typeWriter, 1000);
            }
            
            // Celebration effects for final page
            function createCelebrationEffects() {
                // Create lots of sparkles
                for (let i = 0; i < 50; i++) {
                    setTimeout(() => {
                        createMagicSparkles(
                            Math.random() * window.innerWidth,
                            Math.random() * window.innerHeight
                        );
                    }, i * 100);
                }
                
                // Add floating animation to final page
                const finalPage = document.getElementById('final-page');
                finalPage.style.animation = 'gentleFloat 10s ease-in-out infinite';
                
                // Add CSS for floating animation if not exists
                if (!document.querySelector('#float-animation')) {
                    const style = document.createElement('style');
                    style.id = 'float-animation';
                    style.textContent = `
                        @keyframes gentleFloat {
                            0%, 100% { transform: translateY(0); }
                            50% { transform: translateY(-20px); }
                        }
                    `;
                    document.head.appendChild(style);
                }
            }
            
            // Day/Night mode toggle
            const toggleBtn = document.querySelector('.toggle-btn');
            if (toggleBtn) {
                toggleBtn.addEventListener('click', function(e) {
                    createMagicSparkles(e.clientX, e.clientY);
                    document.body.classList.toggle('night-mode');
                    const icon = this.querySelector('i');
                    if (document.body.classList.contains('night-mode')) {
                        icon.className = 'fas fa-sun';
                        icon.style.color = '#ffd700';
                    } else {
                        icon.className = 'fas fa-moon';
                        icon.style.color = '#ff69b4';
                    }
                });
            }
            
            // Initialize
            createMagicParticles();
            createFloatingHearts();
            
            // Auto-advance through stages (optional, can be disabled)
            let autoAdvance = setInterval(() => {
                if (currentStage < 5) {
                    navigateToStage(currentStage + 1);
                } else {
                    clearInterval(autoAdvance);
                }
            }, 45000); // 45 seconds per stage
        });
    </script>
</body>
</html>
