<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Lakshtu ðŸ’–</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(45deg, #ff4f9a, #667eea, #764ba2);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            width: 100%;
            max-width: 1200px;
            padding: 20px;
            position: relative;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #ff4f9a, #667eea);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 1s;
        }

        .loader {
            width: 80px;
            height: 80px;
            position: relative;
        }

        .loader div {
            position: absolute;
            border: 4px solid white;
            border-radius: 50%;
            animation: loader 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
            border-color: white transparent transparent transparent;
        }

        .loader div:nth-child(1) { animation-delay: -0.45s; }
        .loader div:nth-child(2) { animation-delay: -0.3s; }
        .loader div:nth-child(3) { animation-delay: -0.15s; }

        @keyframes loader {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Stage Containers */
        .stage {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            width: 100%;
        }

        .stage.active {
            display: flex;
        }

        /* Stage 1: Premium Envelope */
        .stage-title {
            color: white;
            font-size: 3rem;
            margin-bottom: 40px;
            text-align: center;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.3);
            animation: titleFloat 3s ease-in-out infinite;
        }

        @keyframes titleFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .envelope-wrapper {
            position: relative;
            width: 320px;
            height: 220px;
            cursor: pointer;
            perspective: 1000px;
            margin: 20px 0;
        }

        .envelope {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 1s;
        }

        .envelope-body {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff4f9a, #ff3399);
            border-radius: 10px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            transform: translateZ(10px);
        }

        .envelope-flap {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff66cc, #ff3399);
            clip-path: polygon(0 0, 50% 50%, 100% 0, 100% 100%, 0 100%);
            transform-origin: top;
            transition: transform 1s;
            transform: rotateX(0deg);
            z-index: 2;
        }

        .envelope.open .envelope-flap {
            transform: rotateX(180deg);
        }

        .envelope-content {
            position: absolute;
            width: 90%;
            height: 90%;
            background: white;
            border-radius: 8px;
            top: 5%;
            left: 5%;
            padding: 30px;
            opacity: 0;
            transform: translateY(100px);
            transition: all 1s 0.5s;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .envelope.open .envelope-content {
            opacity: 1;
            transform: translateY(-200px) scale(1.1);
        }

        .envelope-content h2 {
            color: #ff4f9a;
            text-align: center;
            margin-bottom: 15px;
        }

        /* Stage 2: Heart Tree */
        .tree-container {
            width: 400px;
            height: 500px;
            position: relative;
            margin: 40px 0;
        }

        .tree {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
        }

        .tree-trunk {
            width: 40px;
            height: 200px;
            background: linear-gradient(to right, #8b4513, #a0522d);
            margin: 0 auto;
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .tree-branches {
            position: absolute;
            bottom: 200px;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 300px;
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            border-radius: 50% 50% 0 0;
        }

        .heart-leaf {
            position: absolute;
            width: 40px;
            height: 40px;
            background: var(--heart-color);
            clip-path: polygon(50% 0%, 100% 35%, 82% 100%, 50% 75%, 18% 100%, 0% 35%);
            opacity: 0;
            transform: scale(0) rotate(0deg);
            animation: heartGrow 0.8s forwards;
            filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.2));
            cursor: pointer;
            transition: transform 0.3s;
        }

        .heart-leaf:hover {
            transform: scale(1.3) !important;
            filter: drop-shadow(0 0 15px currentColor);
            z-index: 10;
        }

        @keyframes heartGrow {
            to {
                opacity: 1;
                transform: scale(1) rotate(var(--rotate-angle));
            }
        }

        /* Cake */
        .cake-container {
            margin-top: 30px;
            cursor: pointer;
            animation: cakeFloat 4s ease-in-out infinite;
        }

        .cake {
            width: 200px;
            border-radius: 10px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            transition: transform 0.3s;
        }

        .cake:hover {
            transform: scale(1.1);
        }

        @keyframes cakeFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        /* Stage 3: Gallery */
        .gallery {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            margin: 40px 0;
            max-width: 1000px;
        }

        .gallery-item {
            width: 280px;
            height: 350px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            transition: all 0.4s;
            cursor: pointer;
        }

        .gallery-item:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s;
        }

        .gallery-item:hover img {
            transform: scale(1.1);
        }

        /* Message Box */
        .message-box {
            max-width: 800px;
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.3);
            margin: 30px 20px;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .message-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #ff4f9a, #667eea, #764ba2);
            border-radius: 20px 20px 0 0;
        }

        .typing-text {
            font-size: 1.2rem;
            line-height: 1.8;
            color: #333;
            min-height: 300px;
            font-family: 'Georgia', serif;
        }

        .cursor {
            display: inline-block;
            width: 3px;
            height: 1.3em;
            background: #ff4f9a;
            margin-left: 2px;
            animation: blink 0.7s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        /* Controls */
        .controls {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 15px;
            z-index: 1000;
        }

        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
            border-color: rgba(255, 255, 255, 0.5);
        }

        /* Navigation Dots */
        .nav-dots {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 30px;
            border-radius: 50px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s;
        }

        .dot:hover {
            transform: scale(1.3);
            background: rgba(255, 255, 255, 0.5);
        }

        .dot.active {
            background: white;
            transform: scale(1.4);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.8);
        }

        /* Instruction */
        .instruction {
            color: white;
            font-size: 1.2rem;
            margin-top: 20px;
            text-align: center;
            opacity: 0.9;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        /* Floating Hearts */
        .floating-heart {
            position: fixed;
            pointer-events: none;
            z-index: 1;
            font-size: 24px;
            animation: floatUp linear forwards;
        }

        @keyframes floatUp {
            to {
                transform: translateY(-100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .stage-title {
                font-size: 2.2rem;
            }
            
            .envelope-wrapper {
                width: 280px;
                height: 190px;
            }
            
            .tree-container {
                width: 320px;
                height: 400px;
            }
            
            .gallery {
                flex-direction: column;
                align-items: center;
            }
            
            .gallery-item {
                width: 90%;
                max-width: 300px;
            }
            
            .message-box {
                padding: 25px;
                margin: 15px;
            }
            
            .controls {
                top: 10px;
                right: 10px;
            }
            
            .nav-dots {
                bottom: 20px;
                padding: 10px 20px;
            }
        }

        @media (max-width: 480px) {
            .stage-title {
                font-size: 1.8rem;
            }
            
            .envelope-wrapper {
                width: 250px;
                height: 170px;
            }
            
            .tree-container {
                width: 280px;
                height: 350px;
            }
            
            .cake {
                width: 160px;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loader"><div></div><div></div><div></div><div></div></div>
        <div style="color: white; margin-top: 20px; font-size: 1.2rem;">Loading Birthday Magic...</div>
    </div>

    <!-- Controls -->
    <div class="controls">
        <button class="control-btn" id="musicToggle" title="Music">
            <i class="fas fa-music"></i>
        </button>
        <button class="control-btn" id="heartsToggle" title="Hearts">
            <i class="fas fa-heart"></i>
        </button>
    </div>

    <!-- Navigation -->
    <div class="nav-dots">
        <div class="dot active" data-stage="1"></div>
        <div class="dot" data-stage="2"></div>
        <div class="dot" data-stage="3"></div>
    </div>

    <!-- Stage 1: Premium Envelope -->
    <div class="stage active" id="stage1">
        <h1 class="stage-title">Open Your Birthday Surprise! ðŸ’Œ</h1>
        <div class="envelope-wrapper" id="envelopeWrapper">
            <div class="envelope" id="envelope">
                <div class="envelope-body"></div>
                <div class="envelope-flap"></div>
                <div class="envelope-content">
                    <h2>Happy Birthday Lakshtu! ðŸ’–</h2>
                    <p style="text-align: center; color: #666;">Your magical journey begins here...</p>
                </div>
            </div>
        </div>
        <div class="instruction">Click the envelope to open it</div>
    </div>

    <!-- Stage 2: Heart Tree -->
    <div class="stage" id="stage2">
        <h1 class="stage-title">Your Birthday Heart Tree ðŸŒ¸</h1>
        <div class="tree-container" id="treeContainer">
            <div class="tree">
                <div class="tree-trunk"></div>
                <div class="tree-branches"></div>
            </div>
        </div>
        <div class="cake-container" id="cakeContainer">
            <img src="cake.jpg" alt="Birthday Cake" class="cake" id="cake">
        </div>
        <div class="instruction">Click the cake to make a wish!</div>
    </div>

    <!-- Stage 3: Final -->
    <div class="stage" id="stage3">
        <h1 class="stage-title">Happy Birthday Lakshtu! ðŸŽ‰</h1>
        <div class="gallery">
            <div class="gallery-item">
                <img src="pic_one.jpg" alt="Memory 1">
            </div>
            <div class="gallery-item">
                <img src="pic_two.jpg" alt="Memory 2">
            </div>
            <div class="gallery-item">
                <img src="pic_three.png" alt="Memory 3">
            </div>
        </div>
        <div class="message-box">
            <div class="typing-text" id="typingText"></div>
            <span class="cursor" id="cursor"></span>
        </div>
        <div class="instruction">Scroll to read the message â€¢ Double tap to skip typing</div>
    </div>

    <!-- Audio -->
    <audio id="bgMusic" loop>
        <source src="song.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Simple and reliable JavaScript
        document.addEventListener('DOMContentLoaded', function() {
            // Get elements
            const loadingScreen = document.getElementById('loadingScreen');
            const envelopeWrapper = document.getElementById('envelopeWrapper');
            const envelope = document.getElementById('envelope');
            const cake = document.getElementById('cake');
            const typingText = document.getElementById('typingText');
            const cursor = document.getElementById('cursor');
            const musicToggle = document.getElementById('musicToggle');
            const heartsToggle = document.getElementById('heartsToggle');
            const bgMusic = document.getElementById('bgMusic');
            const stages = document.querySelectorAll('.stage');
            const dots = document.querySelectorAll('.dot');
            
            // State
            let currentStage = 1;
            let isMusicPlaying = false;
            let heartsActive = true;
            
            // Message
            const message = `My Dearest Lakshtu,

Happy Birthday! Today is all about celebrating you - the amazing, beautiful person who brings so much joy into the world.

Your smile lights up every room you enter. Your kindness touches every heart you meet. Your presence makes every moment special.

On this wonderful day, I wish for you:

ðŸ’« Endless happiness and laughter
ðŸ’« Dreams that come true
ðŸ’« Love that grows stronger each day
ðŸ’« Adventures that fill your soul
ðŸ’« Success in all your endeavors
ðŸ’« Peace in your heart
ðŸ’« Health and vitality
ðŸ’« Magical memories

May this year be your best one yet, filled with beautiful moments and wonderful surprises. You deserve all the love and happiness in the world.

Thank you for being you - absolutely perfect in every way.

Happy Birthday, my dear Lakshtu!
May your day be as bright and beautiful as you are.

With all my love,
Forever yours... ðŸ’–`;

            // Initialize
            setTimeout(() => {
                loadingScreen.style.opacity = '0';
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                    startHearts();
                }, 1000);
            }, 2000);

            // Envelope click
            envelopeWrapper.addEventListener('click', function() {
                envelope.classList.add('open');
                createSparkles(envelopeWrapper);
                
                setTimeout(() => {
                    showStage(2);
                    createHeartTree();
                    playMusic();
                }, 1500);
            });

            // Cake click
            cake.addEventListener('click', function() {
                // Candle effect
                createCandleEffect();
                
                setTimeout(() => {
                    showStage(3);
                    startTyping();
                }, 2000);
            });

            // Show stage
            function showStage(stageNum) {
                // Hide all stages
                stages.forEach(stage => stage.classList.remove('active'));
                
                // Show current stage
                document.getElementById(`stage${stageNum}`).classList.add('active');
                
                // Update dots
                dots.forEach((dot, index) => {
                    if (index + 1 === stageNum) {
                        dot.classList.add('active');
                    } else {
                  
