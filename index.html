<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday Lakshtu ðŸ’–</title>

<style>
/* --------------------------------------------------
                BASE STYLES
-------------------------------------------------- */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

:root{
  --bg1:#fff6f3;
  --bg2:#ffeef9;
  --accent:#ff4f9a;

  --peach:#ffb88c;
  --muted:#63414a;

  /* NIGHT MODE */
  --night1:#0f0f1a;
  --night2:#1a1a2d;
  --nightText:#ffe7f7;
}

body{
  margin:0;
  font-family:'Poppins',sans-serif;
  background:linear-gradient(160deg,var(--bg1),var(--bg2));
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow-x:hidden;
  transition:0.6s;
}

/* NIGHT MODE CLASS */
body.night{
  background:linear-gradient(160deg,var(--night1),var(--night2));
  color:var(--nightText);
}

.container{
  width:100%;
  max-width:900px;
  padding:20px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:12px;
  background:rgba(255,255,255,0.96);
  border-radius:16px;
  box-shadow:0 30px 80px rgba(120,50,80,0.06);
  transition:0.6s;
}

body.night .container{
  background:rgba(255,255,255,0.08);
  backdrop-filter:blur(8px);
  box-shadow:0 20px 60px rgba(255,255,255,0.1);
}

.btn{
  padding:12px 20px;
  border-radius:999px;
  border:none;
  color:white;
  font-weight:700;
  cursor:pointer;
  background:linear-gradient(180deg,var(--peach),var(--accent));
  box-shadow:0 0 14px #ff6fa7;
  transition:transform .18s, box-shadow .4s;
}

.btn:hover{
  box-shadow:0 0 20px #ff8ec2;
}

.stage{display:none;flex-direction:column;align-items:center;gap:12px;}
.stage.active{display:flex;}

/* PETALS FALLING */
.petal{
  position:fixed;
  width:18px;height:18px;
  background:pink;
  border-radius:60% 40% 60% 40%;
  opacity:0.8;
  pointer-events:none;
  animation:fall 7s linear infinite;
  filter:blur(0.5px);
}

@keyframes fall{
  0%{transform:translateY(-10vh) rotate(0deg);}
  100%{transform:translateY(110vh) rotate(360deg);}
}

/* Glow elements */
.glow{
  filter:drop-shadow(0 0 12px rgba(255,120,160,0.8));
}

/* Envelope */
#envelope{
  width:320px;
  max-width:86vw;
  border-radius:12px;
  cursor:pointer;
  transition:0.5s;
  box-shadow:0 0 20px #ff8abf;
}
#envelope:hover{transform:translateY(-6px);}

/* TREE */
#treeContainer{
  width:360px;height:360px;
  position:relative;
}

.leaf-heart{
  position:absolute;
  width:30px;  /* bigger */
  height:30px; /* bigger */
  background:radial-gradient(circle,#ff2f7f,#ff8bbb);
  transform:translate(-50%,-50%) scale(0);
  opacity:0;
  transition:0.9s cubic-bezier(.21,1.18,.57,1.01);
  clip-path:polygon(50% 0%,61% 7%,72% 17%,80% 28%,85% 40%,87% 52%,
    86% 63%,82% 72%,75% 81%,66% 88%,56% 93%,50% 95%,44% 93%,
    34% 88%,25% 81%,18% 72%,14% 63%,13% 52%,15% 40%,20% 28%,
    28% 17%,39% 7%);
  filter:drop-shadow(0 0 10px #ff4f9a);
}

.leaf-heart.bloom{
  opacity:1;
  transform:translate(-50%,-50%) scale(1.2);
}

/* CAKE */
#cakeImg{
  width:360px;
  border-radius:16px;
  cursor:pointer;
  box-shadow:0 0 20px pink;
}

/* Gift */
#gift3D{
  width:240px;height:140px;
  border-radius:12px;
  background:linear-gradient(180deg,#fff3e6,#ffd6b3);
  box-shadow:0 0 20px #ffc0a0;
  cursor:pointer;
}

/* NIGHT MODE BUTTON */
#nightBtn{
  position:fixed;
  top:15px;right:15px;
  padding:10px 16px;
  background:#333;
  color:white;
  border-radius:999px;
  border:none;
  cursor:pointer;
  font-size:14px;
  opacity:0.8;
}
</style>
</head>

<body>

<button id="nightBtn">ðŸŒ™ Night Mode</button>

<div class="container">

<!-- INTRO -->
<div id="intro" class="stage active">
  <h2 style="color:var(--accent)">It's your special day!</h2>
  <div style="color:#7a3b54">Ready to open your surprise?</div>
  <button id="startBtn" class="btn glow">Start & Play Music ðŸ’–</button>
</div>

<!-- ENVELOPE -->
<div id="envelopeStage" class="stage">
  <img id="envelope" class="glow" src="envelope.png">
  <div style="font-size:13px;color:#7a3b54">Tap the envelope ðŸ’Œ</div>
</div>

<!-- TREE -->
<div id="treeStage" class="stage">
  <div id="treeContainer"><canvas id="treeCanvas"></canvas></div>
  <div style="font-size:13px;color:#7a3b54">Your blooming heart tree ðŸŒ³ðŸ’–</div>
</div>

<!-- CAKE -->
<div id="cakeStage" class="stage">
  <img id="cakeImg" class="glow" src="cake.jpg">
  <div style="font-size:13px;color:#7a3b54">Tap the cake ðŸŽ‚</div>
</div>

<!-- GIFT -->
<div id="giftStage" class="stage">
  <div id="gift3D" class="glow"><div id="giftText">Open Gift</div></div>
</div>

<!-- FINAL LETTER -->
<div id="finalStage" class="stage">
  <div id="finalPanel" style="width:90%;background:#fff0f7;padding:20px;border-radius:14px;box-shadow:0 0 20px pink;">
    <div id="typed" style="white-space:pre-wrap;font-size:16px;"></div>
  </div>
</div>

<!-- GALLERY -->
<section id="gallery" style="display:none;text-align:center;padding:30px">
  <h2 style="color:#ff5599;font-size:2rem">Our Beautiful Moments ðŸ’—</h2>
  <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;width:90%;margin:auto;">
    <div><img src="pic_three.png" style="width:100%;border-radius:20px;"></div>
    <div><img src="pic_one.jpg" style="width:100%;border-radius:20px;"></div>
    <div><img src="pic_two.jpg" style="width:100%;border-radius:20px;"></div>
  </div>
</section>

</div>

<audio id="bgm" src="song.mp3" preload="auto" loop></audio>

<script>
/* -------------------------------------
        START BUTTON + MUSIC
-------------------------------------- */
startBtn.onclick = ()=>{
  bgm.play().catch(()=>{});
  intro.classList.remove("active");
  envelopeStage.classList.add("active");
};

/* -------------------------------------
        PETAL FALLING GENERATOR
-------------------------------------- */
function createPetal(){
  const petal=document.createElement("div");
  petal.className="petal";
  petal.style.left=Math.random()*100+"vw";
  petal.style.animationDuration=6+Math.random()*4+"s";
  petal.style.opacity=0.5+Math.random()*0.5;
  document.body.appendChild(petal);
  setTimeout(()=>petal.remove(),10000);
}
setInterval(createPetal,300);

/* -------------------------------------
        HEART TREE
-------------------------------------- */
const canvas=document.getElementById("treeCanvas");
const ctx=canvas.getContext("2d");
const leafLayer=document.getElementById("treeContainer");

function resizeCanvas(){
  canvas.width=canvas.clientWidth;
  canvas.height=canvas.clientHeight;
}
resizeCanvas();

function drawTrunk(){
  ctx.lineWidth=26;
  ctx.strokeStyle="#5a3b27";
  ctx.lineCap="round";

  ctx.beginPath();
  ctx.moveTo(canvas.width/2, canvas.height);
  ctx.bezierCurveTo(canvas.width/2 -35, canvas.height*0.7,
    canvas.width/2 -40, canvas.height*0.45,
    canvas.width/2 -10, canvas.height*0.32);
  ctx.stroke();

  ctx.beginPath();
  ctx.moveTo(canvas.width/2, canvas.height);
  ctx.bezierCurveTo(canvas.width/2 +35, canvas.height*0.7,
    canvas.width/2 +40, canvas.height*0.45,
    canvas.width/2 +10, canvas.height*0.32);
  ctx.stroke();
}

function drawBranches(){
  ctx.lineWidth=12;
  ctx.strokeStyle="#734b32";

  ctx.beginPath();
  ctx.moveTo(canvas.width/2 -10, canvas.height*0.32);
  ctx.bezierCurveTo(canvas.width/2 -120, canvas.height*0.1,
    canvas.width/2 -60, canvas.height*0.05,
    canvas.width/2, canvas.height*0.17);
  ctx.stroke();

  ctx.beginPath();
  ctx.moveTo(canvas.width/2 +10, canvas.height*0.32);
  ctx.bezierCurveTo(canvas.width/2 +120, canvas.height*0.1,
    canvas.width/2 +60, canvas.height*0.05,
    canvas.width/2, canvas.height*0.17);
  ctx.stroke();
}

function generateLeaves(){
  const leafCount=160;
  const cx=canvas.width/2;
  const cy=canvas.height*0.18;
  const size=150;

  for(let i=0;i<leafCount;i++){
    const angle=Math.random()*Math.PI*2;
    const r=size*(0.55+Math.random()*0.45);

    const leaf=document.createElement("div");
    leaf.className="leaf-heart";
    leaf.style.left=(cx+r*Math.cos(angle))+"px";
    leaf.style.top=(cy+r*Math.sin(angle*1.2))+"px";
    leafLayer.appendChild(leaf);

    setTimeout(()=>leaf.classList.add("bloom"),200+i*35);
  }
}

function drawHeartTree(){
  drawTrunk();
  drawBranches();
  generateLeaves();
}

/* Envelope â†’ Tree */
envelope.onclick=()=>{
  envelopeStage.classList.remove("active");
  treeStage.classList.add("active");
  setTimeout(drawHeartTree,500);
};

/* Tree â†’ Cake */
cakeImg.onclick=()=>{
  treeStage.classList.remove("active");
  cakeStage.classList.add("active");
};

/* Cake â†’ Gift */
cakeImg.onclick=()=>{
  cakeStage.classList.remove("active");
  giftStage.classList.add("active");
};

/* Gift â†’ Final Letter */
gift3D.onclick=()=>{
  giftStage.classList.remove("active");
  gallery.style.display="block";
  finalStage.classList.add("active");
  startTyping();
};

/* Typewriter Message */
const message = `My sweet Lakshtu,

You make my world brighter just by being in it.  
You are the kindest part of my heart â€” the calm in my chaos  
and the softest place where my feelings rest.

Thank you for loving me in your own beautiful ways.  
Thank you for choosing me, supporting me, and making every day special  
without even trying.

On your birthday, I just want you to know â€”  
you are precious to me, loved beyond words,  
and you will always have a place in my heart.

I LOVE YOU, LAKSHTU ðŸ’–âœ¨`;

let i=0;
function startTyping(){
  typed.textContent="";
  function type(){
    if(i<message.length){
      typed.textContent+=message[i++];
      setTimeout(type,26+Math.random()*18);
    }
  }
  type();
}

/* NIGHT MODE TOGGLE */
nightBtn.onclick=()=>{
  document.body.classList.toggle("night");
};
</script>
</body>
</html>
