<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday Lakshtu ðŸ’–</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

:root{
  --accent:#ff4f9a;
  --peach:#ffb88c;
}

body{
  margin:0;
  font-family:'Poppins',sans-serif;
  background:#0b001a;
  color:white;
  overflow:hidden;
}

/* STAGES */
.stage{
  display:none;
  width:100%;
  height:100vh;
  position:absolute;
  top:0;left:0;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  transition: opacity 1s ease;
}
.stage.active{ display:flex; opacity:1; }

/* ENVELOPE */
#envelope{
  width:260px;
  cursor:pointer;
  animation: float 2.5s ease-in-out infinite, glow 1.8s ease-in-out infinite;
}
@keyframes float{
  0%{transform:translateY(0);}
  50%{transform:translateY(-14px);}
  100%{transform:translateY(0);}
}
@keyframes glow{
  0%{filter:drop-shadow(0 0 0px #ff4fa6);}
  50%{filter:drop-shadow(0 0 18px #ff4fa6);}
  100%{filter:drop-shadow(0 0 0px #ff4fa6);}
}

/* TREE */
#treeStage{
  background:#0b001a;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  position:relative;
}
#treeContainer{
  width:500px; height:500px; position:relative;
}
#treeCanvas{ 
  width:100%; 
  height:100%; 
  position:absolute;
}
.leaf{
  position:absolute;
  width:30px;height:30px;
  background:pink;
  transform:translate(-50%,-50%) scale(0);
  clip-path:polygon(50% 0%,61% 7%,72% 17%,80% 28%,85% 40%,87% 52%,86% 63%,82% 72%,75% 81%,66% 88%,56% 93%,50% 95%,44% 93%,34% 88%,25% 81%,18% 72%,14% 63%,13% 52%,15% 40%,20% 28%,28% 17%,39% 7%);
  transition:.7s ease;
  filter:drop-shadow(0 0 12px hotpink);
}
.leaf.grow{ transform:translate(-50%,-50%) scale(1); animation: glowPulse 3s infinite alternate;}
@keyframes glowPulse{
  0%{filter:drop-shadow(0 0 12px hotpink);}
  50%{filter:drop-shadow(0 0 28px #ff66ff);}
  100%{filter:drop-shadow(0 0 12px hotpink);}
}

/* PETALS */
.petals{
  position:absolute;
  width:12px;height:12px;
  background:pink;
  border-radius:50%;
  opacity:0.8;
  animation:fall linear infinite;
}
@keyframes fall{
  0%{transform:translateY(-20px) rotate(0deg);}
  100%{transform:translateY(500px) rotate(360deg);}
}

/* CAKE */
#cake{
  width:240px;
  margin-top:30px;
  transform:scale(0);
  transition:.7s ease;
  filter:drop-shadow(0 0 25px white);
  cursor:pointer;
}
#cake.show{ transform:scale(1); }

/* FINAL STAGE */
#finalStage{
  flex-direction:column;
  background:linear-gradient(180deg,#0d0d0d,#1a001a);
  overflow-y:auto;
  align-items:center;
}
#letterBox{
  width:90%;max-width:650px;margin:20px auto;padding:20px;font-size:18px;
  background:rgba(255,255,255,0.05);
  border-radius:16px;
  white-space:pre-wrap;
}
.cursor{
  display:inline-block;width:8px;height:20px;
  background:#ff4f9a;
  animation:blink 1s infinite;
}
@keyframes blink{50%{opacity:0;}}
.gallery{
  display:flex;flex-wrap:wrap;gap:20px;justify-content:center;margin-top:20px;
}
.gallery img{
  width:260px;height:330px;object-fit:cover;border-radius:16px;
  box-shadow:0 0 20px rgba(255,50,150,0.6);
  animation: glowPulse 3s infinite ease-in-out;
}
.gallery img.special{ width:320px;height:380px; box-shadow:0 0 35px #ff66ff; }
.gallery img.pic2{ width:360px;height:440px; filter:brightness(1.3) drop-shadow(0 0 30px #ff99ff);}
</style>
</head>
<body>

<!-- PAGE 1: Envelope -->
<div id="page1" class="stage active">
  <h2>Tap the envelope ðŸ’Œ</h2>
  <img src="envelope.png" id="envelope">
</div>

<!-- PAGE 2: Tree + Cake -->
<div id="page2" class="stage">
  <div id="treeContainer">
    <canvas id="treeCanvas"></canvas>
  </div>
  <img src="cake.jpg" id="cake">
</div>

<!-- PAGE 3: Final Letter + Gallery -->
<div id="finalStage" class="stage">
  <h1>Our Beautiful Memories ðŸ’—</h1>
  <div class="gallery">
    <img src="pic_one.jpg" class="special">
    <img src="pic_two.jpg" class="pic2">
    <img src="pic_three.png">
  </div>
  <div id="letterBox"></div><span class="cursor"></span>
</div>

<audio id="bgm" src="song.mp3" preload="auto" loop></audio>

<script>
// --- PAGE TRANSITIONS ---
const page1=document.getElementById("page1");
const page2=document.getElementById("page2");
const finalStage=document.getElementById("finalStage");
const envelope=document.getElementById("envelope");
const bgm=document.getElementById("bgm");
const cake=document.getElementById("cake");

// --- PAGE 1 ---
envelope.onclick=()=>{
  bgm.play().catch(()=>{});
  page1.classList.remove("active");
  page2.classList.add("active");
  setTimeout(initTree,500);
}

// --- TREE ---
const canvas=document.getElementById("treeCanvas");
const ctx=canvas.getContext("2d");
function resizeCanvas(){
  canvas.width=canvas.clientWidth;
  canvas.height=canvas.clientHeight;
}
resizeCanvas();
window.addEventListener('resize',resizeCanvas);
const leafLayer=document.getElementById("treeContainer");

// Draw trunk
function drawTrunk(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.lineWidth=28;
  ctx.strokeStyle="#ff33cc";
  ctx.beginPath();
  ctx.moveTo(canvas.width/2,canvas.height);
  ctx.bezierCurveTo(canvas.width/2-50,canvas.height*0.7,canvas.width/2-30,canvas.height*0.4,canvas.width/2,canvas.height*0.2);
  ctx.stroke();
}

// Draw branches
function drawBranches(){
  ctx.lineWidth=14;
  ctx.strokeStyle="#ff66ff";
  ctx.beginPath();
  ctx.moveTo(canvas.width/2,canvas.height*0.2);
  ctx.bezierCurveTo(canvas.width/2-180,canvas.height*0.1,canvas.width/2-80,canvas.height*0.02,canvas.width/2,canvas.height*0.15);
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(canvas.width/2,canvas.height*0.2);
  ctx.bezierCurveTo(canvas.width/2+180,canvas.height*0.1,canvas.width/2+80,canvas.height*0.02,canvas.width/2,canvas.height*0.15);
  ctx.stroke();
}

// Create heart leaves
function createLeaves(){
  const colors=["#ff4fa6","#ff8bd5","#ff66cc","#ff99ff"];
  const cx=canvas.width/2;
  const cy=canvas.height*0.15;
  for(let i=0;i<200;i++){
    let leaf=document.createElement("div");
    leaf.className="leaf";
    leaf.style.background=colors[Math.floor(Math.random()*colors.length)];
    let angle=Math.random()*Math.PI*2;
    let r=180*(0.4+Math.random()*0.6);
    leaf.style.left=(cx+r*Math.cos(angle))+"px";
    leaf.style.top=(cy+r*Math.sin(angle*1.1))+"px";
    leafLayer.appendChild(leaf);
    setTimeout(()=>leaf.classList.add("grow"),200+i*15);
  }
}

// Falling petals
for(let i=0;i<30;i++){
  let p=document.createElement("div");
  p.className="petals";
  p.style.left=Math.random()*window.innerWidth+"px";
  p.style.animationDuration=(3+Math.random()*3)+"s";
  p.style.animationDelay=(Math.random()*5)+"s";
  document.body.appendChild(p);
}

function initTree(){
  drawTrunk();
  drawBranches();
  createLeaves();
  setTimeout(()=>cake.classList.add("show"),2000);
}

// --- PAGE 2: Cake click â†’ Final Stage ---
cake.onclick=()=>{
  page2.classList.remove("active");
  finalStage.classList.add("active");
  startTyping();
}

// --- TYPEWRITER ---
let message=`My sweet Lakshtu,

You make my world brighter just by being in it.
Your smile, your voice, the way you talk â€” everything feels magical.

Thank you for choosing me, caring for me,
and making my heart feel safe.

On your special day, I want you to know:

You are precious.
You are loved.
You are my favourite person.

I LOVE YOU, LAKSHTU ðŸ’–âœ¨`;

let i=0;
function startTyping(){
  const letterBox=document.getElementById("letterBox");
  const cursor=document.querySelector(".cursor");
  letterBox.textContent="";
  function step(){
    if(i<message.length){
      letterBox.textContent+=message[i++];
      setTimeout(step,26+Math.random()*18);
    } else { cursor.style.display="none"; }
  }
  step();
}
</script>
</body>
</html>
